var __extends=this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);c.prototype=b.prototype,a.prototype=new c},plat;!function(a){"use strict;";function b(){}function c(a){for(var b=[],d=1;d<arguments.length;d++)b[d-1]=arguments[d];if(t(a))return a;var e=q(a);e&&(a=b.shift());var f,h;return A(function(b){g(b)&&(f=Object.keys(b),A(function(d){if(h=b[d],e){if(v(h))return void c(e,a[d]||(a[d]=[]),h);if(x(h))return void(a[d]=new Date(h.getTime()));if(n(h))return void(a[d]=new RegExp(h));if(j(h))return void(a[d]=h.cloneNode(!0));if(g(h))return void c(e,a[d]||(a[d]={}),h)}a[d]=h},f))},b),a}function d(a){for(var b=[],d=1;d<arguments.length;d++)b[d-1]=arguments[d];return c.apply(null,[!0,a].concat(b))}function e(a,b){if(!g(a))return a;if(x(a))return new Date(a.getTime());if(n(a))return new RegExp(a);if(j(a))return a.cloneNode(b);if(f(a))return new a.constructor(a.message);var e={};return v(a)&&(e=[]),q(b)&&b?d(e,a):c(e,a)}function f(a){return kg.call(a)===mg}function g(a){return null!=a&&"object"==typeof a}function h(a){return!!(a&&a.document&&a.setInterval)}function i(a){return!(!a||a.nodeType!==Node.DOCUMENT_NODE)}function j(a){return!(!a||"number"!=typeof a.nodeType)}function k(a){return!(!a||a.nodeType!==Node.DOCUMENT_FRAGMENT_NODE)}function l(a){return g(a)&&kg.call(a)===ng}function m(a){return"string"==typeof a||g(a)&&kg.call(a)===tg}function n(a){return g(a)&&kg.call(a)===sg}function o(a){return g(a)&&(kg.call(a)===ug||s(a.then))}function p(a){return t(a)?!0:m(a)||v(a)?0===a.length:g(a)?0===Object.keys(a).length:!1}function q(a){return a===!0||a===!1||g(a)&&kg.call(a)===pg}function r(a){return("number"==typeof a||g(a)&&kg.call(a)===rg)&&!isNaN(a)}function s(a){return"function"==typeof a}function t(a){return null===a||void 0===a}function u(a){return void 0===a}function v(a){return ig?Array.isArray(a):kg.call(a)===og}function w(a){return t(a)||h(a)||s(a)?!1:m(a)||a.length>=0}function x(a){return"object"==typeof a&&kg.call(a)===qg}function y(a,b,c){var d=[];return t(b)?d:s(b.filter)?b.filter(a,c):(A(function(b,c,e){a(b,c,e)&&d.push(b)},b),d)}function z(a,b){return y(function(b){return!G(function(a,c){return b[c]!==a},a)},b)}function A(a,b,c){if(t(b)||!g(b)&&!w(b))return b;var d,e,f;if(s(b.forEach))return b.forEach(a,c);if(w(b))for(d=0,f=b.length;f>d;++d)a.call(c,b[d],d,b);else{var h=Object.keys(b);for(f=h.length;h.length>0;)e=h.shift(),a.call(c,b[e],e,b)}return b}function B(a,b,c){var d=[];return t(b)?d:s(b.map)?b.map(a,c):(A(function(e,f){d.push(a.call(c,e,f,b))},b),d)}function C(a,b,c){return zb=zb||plat.acquire(Pb),zb.all(B(a,b,c))}function D(a,b,c,d){zb=zb||plat.acquire(Pb);var e=zb.resolve([]);if(!v(b))return e;a=a.bind(c);var f=function(b,c,d,e){return b.then(function(b){return a(c,d,e).then(function(a){return b.concat(a)})})};return d===!0?b.reduceRight(f,e):b.reduce(f,e)}function E(a,b,c){return D(a,b,c)}function F(a,b,c){return D(a,b,c,!0)}function G(a,b,c){if(t(b)||s(b))return!1;var d,e,f,g;if(s(b.some))return b.some(a,c);if(w(b)){for(d=0,f=b.length;f>d;++d)if(g=a.call(c,b[d],d,b),g===!0)return!0}else{var h=Object.keys(b);for(f=h.length;h.length>0;)if(e=h.shift(),g=a.call(c,b[e],e,b),g===!0)return!0}return!1}function H(a,b,c){return I(a,0,b,c)}function I(a,b,c,d){function e(){a.apply(d,c)}var f=setTimeout(e,b);return function(){clearTimeout(f)}}function J(a,b,c,d){function e(){a.apply(d,c)}var f=setInterval(e,b);return function(){clearInterval(f)}}function K(a,c){Ab=Ab||plat.acquire(Qb);var d=Ab.requestAnimationFrame;if(u(d))return H(function(){a.call(c,Date.now())});var e=d(a.bind(c)),f=Ab.cancelAnimationFrame||b;return function(){f(e)}}function L(a){function b(){return a+c.join("")}t(a)&&(a="");var c=jg[a];t(c)&&(c=jg[a]=["0","/"]);for(var d,e=c.length;e--;){if(d=c[e].charCodeAt(0),57===d)return c[e]="A",b();if(90===d)return c[e]="a",b();if(122!==d)return c[e]=String.fromCharCode(d+1),b();c[e]="0"}return c.unshift("0"),b()}function M(a){return!m(a)||p(a)?a:(a=a.charAt(0).toLowerCase()+a.slice(1),Bb=Bb||plat.acquire(_b).camelCaseRegex,a.replace(Bb,function(a,b,c,d){return d?c.toUpperCase():c}))}function N(a,b){return!m(a)||p(a)?a:(t(b)&&(b=""),Cb=Cb||plat.acquire(_b).capitalCaseRegex,a.replace(Cb,function(a,c){return c?b+a.toLowerCase():a.toLowerCase()}))}function O(a,b){return t(a)||delete a[b],a}function P(a,b){return t(a)?a:a[b]}function Q(a){if(!p(a)){for(var b,c=a.split("&"),d={},e=c.length,f=0;e>f;++f)b=c[f].split("="),d[b[0]]=b[1];return d}}function R(a){return!v(a)&&!g(a)||p(a)?"":"?"+B(function(a,b){return b+"="+a},a).join("&")}function S(a){return v(a)?a.reduce(function(a,b){return a&&b!==!1},!0):q(a)?a:!0}function T(a,b,c){var d=k(b),e=!j(b),f=d?b:(Db||(Db=plat.acquire(Tb))).createDocumentFragment();e&&(b=f);var g,h=v(a)?a:Array.prototype.slice.call(a),i=h.length;if(c===!0){var l;for(g=0;i>g;++g)l=h[g].cloneNode(!0),f.insertBefore(l,null)}else for(g=0;i>g;++g)f.insertBefore(h[g],null);return d||e||b.appendChild(f),b}function U(a){for(var b=Array.prototype.slice.call(a.childNodes);b.length>0;)a.removeChild(b.pop())}function V(a,b){if(s(a.push)||(a=Array.prototype.slice.call(a)),!t(b))return void W(a,b);for(var c;a.length>0;)c=a.pop(),b=c.parentNode,t(b)||b.removeChild(c)}function W(a,b){for(;a.length>0;)b.removeChild(a.pop())}function X(a){Ab=Ab||(Ab=plat.acquire(Qb)),Db=Db||(Db=plat.acquire(Tb));var b=vg.exec(a),c=Db.createElement("div");if(t(b))return c=db(c,a),c.removeChild(c.lastChild);a=a.trim();var d=b[1];if(Ab.pushState&&u(Bg[d]))return db(c,a);if("body"===d)return c=db(Db.createElement("html"),a),c.removeChild(c.lastChild);var e=Cg[d]||Cg._default,f=e[0],g=e[1],h=e[2];for(c=db(c,g+a+h);f-->0;)c=c.lastChild;return c}function Y(a,b){if(U(a),!p(b)){var c=X(b);return c.childNodes.length>0?T(c.childNodes,a):a.insertBefore(c,null),a}}function Z(a,b,c){if(!t(a)&&g(b)){u(c)&&(c=null);var d;if(j(b))return d=b,b=Array.prototype.slice.call(d.childNodes),a.insertBefore(d,c),b;s(b.push)||(b=Array.prototype.slice.call(b)),Db=Db||(Db=plat.acquire(Tb));var e=b.length;d=Db.createDocumentFragment();for(var f=0;e>f;++f)d.insertBefore(b[f],null);return a.insertBefore(d,c),b}}function $(a){var b=a.parentNode,c=Z(b,a.childNodes,a);return b.removeChild(a),c}function _(a,b){if(t(b))return b;if(a.nodeType===Node.ELEMENT_NODE)for(var c,d=a.attributes,e=d.length,f=0;e>f;++f)c=d[f],b.setAttribute(c.name,c.value);var g=a.parentNode;return Z(b,a.childNodes),g.replaceChild(b,a),b}function ab(a){Db=Db||(Db=plat.acquire(Tb));var b=Db.createDocumentFragment();return p(a)||Y(b,a),b}function bb(a,b){if(!t(a)){var c,d=a.nextSibling,e=a.parentNode;if(t(b)&&(b=null),!t(e)&&(t(b)||b.parentNode===e))for(;d!==b;)c=d.nextSibling,e.removeChild(d),d=c}}function cb(a,b){t(a)||(bb(a,b),eb(a),eb(b))}function db(a,b){return Ab=Ab||(Ab=plat.acquire(Qb)),Ab.msApp?MSApp.execUnsafeLocalFunction(function(){a.innerHTML=b}):a.innerHTML=b,a}function eb(a){if(j(a)){var b=a.parentNode;t(b)||b.removeChild(a)}}function fb(a,b){var c=(a||{}).className;if(m(c)&&m(b)&&""!==b){var d,e,f=b.split(wg);if(u(a.classList)){if(p(c))return void(a.className=b);for(;f.length>0;)d=f.shift(),""!==d&&(e=new RegExp("^"+d+"\\s+|\\s+"+d+"$|\\s+"+d+"\\s+","g"),e.test(c)||(a.className+=" "+d))}else for(;f.length>0;)d=f.shift(),""!==d&&a.classList.add(d)}}function gb(a,b){var c=(a||{}).className;if(m(c)&&m(b)&&""!==b){var d,e=b.split(wg);if(u(a.classList)){if(c===b)return void(a.className="");for(;e.length>0;)d=e.shift(),""!==d&&(a.className=c=c.replace(new RegExp("^"+d+"\\s+|\\s+"+d+"$|\\s+"+d+"\\s+","g"),""))}else for(;e.length>0;)d=e.shift(),""!==d&&a.classList.remove(d)}}function hb(a,b){var c=(a||{}).className;if(m(c)&&m(b)&&""!==b){var d,e=b.split(wg);if(u(a.classList)){var f;if(""===c)a.className=b;else if(c===b)return void(a.className="");for(;e.length>0;)if(d=e.shift(),""!==d){if(f=new RegExp("^"+d+"\\s+|\\s+"+d+"$|\\s+"+d+"\\s+","g"),f.test(c)){a.className=c=c.replace(f,"");continue}a.className+=" "+d}}else for(;e.length>0;)d=e.shift(),""!==d&&a.classList.toggle(d)}}function ib(a,b,c){var d=(a||{}).className;if(m(d)&&m(c)&&""!==c){if(u(a.classList)){var e=new RegExp("^"+b+"\\s+","g"),f=new RegExp("\\s+"+b+"\\s+","g"),g=new RegExp("\\s+"+b+"$","g");return void(a.className=d.replace(e,c+" ").replace(f," "+c+" ").replace(g," "+c))}a.classList.add(c),a.classList.remove(b)}}function jb(a,b){var c=(a||{}).className;if(!m(c)||!m(b)||""===b)return!1;var d=b.split(wg);if(u(a.classList)){if(""===c)return!1;if(c===b)return!0;for(var e;d.length>0;)if(e=d.shift(),""!==e&&!new RegExp("^"+e+"\\s|\\s"+e+"$|\\s"+e+"\\s","g").test(c))return!1;return!0}for(;d.length>0;)if(e=d.shift(),""!==e&&!a.classList.contains(e))return!1;return!0}function kb(a){return Eb=Eb||(Eb=plat.acquire(oc)),Fb=Fb||(Fb=plat.acquire(Mb)),Eb.put(a,Eb.read(a)["catch"](function(b){return t(b)?Fb.ajax({url:a}):void 0}).then(function(b){if(k(b))return Eb.put(a,b);if(!g(b)||!m(b.response))return Gb=Gb||(Gb=plat.acquire(Zb)),Gb.warn("No template found at "+a,Gb.AJAX),Eb.put(a);var c=b.response;return p(c.trim())?Eb.put(a):Eb.put(a,c)})["catch"](function(b){return H(function(){Gb=Gb||(Gb=plat.acquire(Zb)),Gb.fatal("Failure to get template from "+a+".",Gb.TEMPLATE)}),b}))}function lb(a){var b,c=v(a);b=Lg.Injector.getDependencies(c?a:[a]);for(var d=b.length,e=[],f=0;d>f;++f)e.push(b[f].inject());return c?e:e[0]}function mb(){return Mg}function nb(a){Og.prototype=a||Error.prototype,Ng.prototype=new Og}function ob(a,b,c){var d;switch(a instanceof Error?nb(Object.getPrototypeOf(a)):Og.prototype!==Error.prototype&&nb(),d=new Ng(a,""),b){case Mg.PARSE:d.name=mf;break;case Mg.BIND:d.name=nf;break;case Mg.COMPILE:d.name=of;break;case Mg.NAME:d.name=pf;break;case Mg.NAVIGATION:d.name=qf;break;case Mg.TEMPLATE:d.name=rf;break;case Mg.CONTEXT:d.name=sf;break;case Mg.EVENT:d.name=tf;break;case Mg.INJECTABLE:d.name=uf;break;case Mg.COMPAT:d.name=vf;break;default:d=new Og(a)}if(a instanceof Error){var e=Object.getOwnPropertyNames(a),f=e.length;d.message="",d=Object.create(d);for(var g=0;f>g;++g)d[e[g]]=a[e[g]];d.stack=a.stack,d.code=a.code}var h=lb(Vb);if(h.dispatch(ve,Mg,d),c){if(a instanceof Error)throw a;throw d}}function pb(){return window}function qb(a){return a.document}function rb(a){return!t(Yg[a])}function sb(a){return!t(Xg[a])}function tb(a){return!t(Wg[a])}function ub(a){return!u(Zg[a])}function vb(a,b,c,d,e,f){return _g._parser=a,_g._ContextManager=b,_g._EventManager=c,_g._Promise=d,_g._dom=e,_g._Exception=f,_g}function wb(){return ah}function xb(a,b,c,d,e,f){return fh._compat=a,fh._EventManager=b,fh._document=c,fh._compiler=d,fh._LifecycleEvent=e,fh._Exception=f,fh}function yb(a){return a.app}var zb,Ab,Bb,Cb,Db,Eb,Fb,Gb,Hb,Ib="$",Jb="context",Kb=Ib+"AppStatic",Lb=Ib+"App",Mb=Ib+"Http",Nb=Ib+"HttpRequestInstance",Ob=Ib+"HttpConfig",Pb=Ib+"Promise",Qb=Ib+"Compat",Rb=Ib+"ControlFactory",Sb=Ib+"AttributeControlFactory",Tb=Ib+"Document",Ub=Ib+"DispatchEventInstance",Vb=Ib+"ErrorEventStatic",Wb=Ib+"EventManagerStatic",Xb=Ib+"LifecycleEventStatic",Yb=Ib+"LifecycleEventInstance",Zb=Ib+"ExceptionStatic",$b=Ib+"Parser",_b=Ib+"Regex",ac=Ib+"Tokenizer",bc=Ib+"NavigatorInstance",cc=Ib+"ContextManagerStatic",dc=Ib+"ContextManagerInstance",ec=Ib+"Compiler",fc=Ib+"CommentManagerFactory",gc=Ib+"CommentManagerInstance",hc=Ib+"ElementManagerFactory",ic=Ib+"ElementManagerInstance",jc=Ib+"NodeManagerStatic",kc=Ib+"TextManagerFactory",lc=Ib+"TextManagerInstance",mc=Ib+"CacheFactory",nc=Ib+"ManagerCache",oc=Ib+"TemplateCache",pc=Ib+"Animator",qc=Ib+"AttributesFactory",rc=Ib+"AttributesInstance",sc=Ib+"BindableTemplatesFactory",tc=Ib+"Dom",uc=Ib+"DomEvents",vc=Ib+"IDomEventsConfig",wc=Ib+"DomEventInstance",xc=Ib+"ResourcesFactory",yc=Ib+"ResourcesInstance",zc=Ib+"TemplateControlFactory",Ac=Ib+"TemplateControlInstance",Bc=Ib+"Utils",Cc=Ib+"Browser",Dc=Ib+"BrowserConfig",Ec=Ib+"Router",Fc=Ib+"RouterStatic",Gc=Ib+"UrlUtilsInstance",Hc=Ib+"Window",Ic=Ib+"LocalStorage",Jc=Ib+"SessionStorage",Kc=Ib+"BaseSegmentFactory",Lc=Ib+"BaseSegmentInstance",Mc=Ib+"StaticSegmentInstance",Nc=Ib+"VariableSegmentInstance",Oc=Ib+"DynamicSegmentInstance",Pc=Ib+"SplatSegmentInstance",Qc=Ib+"StateStatic",Rc=Ib+"StateInstance",Sc=Ib+"RouteRecognizerInstance",Tc=Ib+"InjectorStatic",Uc=Ib+"History",Vc=Ib+"Location",Wc="plat-",Xc=Wc+"bind",Yc=Wc+"href",Zc=Wc+"src",$c=Wc+"keydown",_c=Wc+"keypress",ad=Wc+"keyup",bd=Wc+"name",cd=Wc+"options",dd=Wc+"checked",ed=Wc+"disabled",fd=Wc+"selected",gd=Wc+"readonly",hd=Wc+"visible",id=Wc+"style",jd=Wc+"tap",kd=Wc+"blur",ld=Wc+"change",md=Wc+"copy",nd=Wc+"cut",od=Wc+"paste",pd=Wc+"dbltap",qd=Wc+"focus",rd=Wc+"submit",sd=Wc+"touchstart",td=Wc+"touchend",ud=Wc+"touchmove",vd=Wc+"touchcancel",wd=Wc+"hold",xd=Wc+"release",yd=Wc+"swipe",zd=Wc+"swipeleft",Ad=Wc+"swiperight",Bd=Wc+"swipeup",Cd=Wc+"swipedown",Dd=Wc+"track",Ed=Wc+"trackleft",Fd=Wc+"trackright",Gd=Wc+"trackup",Hd=Wc+"trackdown",Id=Wc+"trackend",Jd=Wc+"react",Kd=Wc+"link",Ld=Wc+"foreach",Md=Wc+"html",Nd=Wc+"if",Od=Wc+"ignore",Pd=Wc+"select",Qd=Wc+"template",Rd=Wc+"viewport",Sd=Wc+"control",Td=Wc+"viewcontrol",Ud=Wc+"resources",Vd=Wc+Jb,Wd=Wc+"callback",Xd="data-",Yd="__templateControlCache",Zd="head",$d="meta",_d="title",ae="description",be="author",ce="creator",de="link",ee="href",fe="name",ge="property",he="image",ie="video",je="type",ke="rel",le="url",me="article:",ne="og:",oe="twitter:",pe="content",qe="ready",re="suspend",se="resume",te="online",ue="offline",ve="error",we="shutdown",xe="exiting",ye="beforeLoad",ze="beforeNavigate",Ae="navigated",Be="navigating",Ce="urlChanged",De="pause",Ee="deviceReady",Fe="backbutton",Ge="backclick",He="backButtonPressed",Ie=Wc+"hide",Je=Wc+"animating",Ke=Wc+"animation",Le=Wc+"transition",Me=Wc+"enter",Ne=Wc+"leave",Oe=Wc+"move",Pe=Wc+"fadein",Qe=Wc+"fadeout",Re="$",Se=Re+"tap",Te=Re+"dbltap",Ue=Re+"touchstart",Ve=Re+"touchend",We=Re+"touchmove",Xe=Re+"touchcancel",Ye=Re+"hold",Ze=Re+"release",$e=Re+"swipe",_e=Re+"swipeleft",af=Re+"swiperight",bf=Re+"swipeup",cf=Re+"swipedown",df=Re+"track",ef=Re+"trackleft",ff=Re+"trackright",gf=Re+"trackup",hf=Re+"trackdown",jf=Re+"trackend",kf="Error",lf="Plat"+kf,mf="Parsing"+kf,nf="Binding"+kf,of="Compiling"+kf,pf="PlatName"+kf,qf="Navigating"+kf,rf="Templating"+kf,sf="Context"+kf,tf="DispatchEvent"+kf,uf="Injectable"+kf,vf="Compatibility"+kf,wf={index:"index",even:"even",odd:"odd",first:"first",last:"last"},xf="base",yf="variable",zf="static",Af="splat",Bf="dynamic",Cf=1e3,Df="{{",Ef="}}",Ff="static",Gf="singleton",Hf="instance",If="factory",Jf="class",Kf="css",Lf="-compiled",Mf="-@",Nf="-init",Of=": start node",Pf=": end node",Qf="popstate",Rf="hashchange",Sf="wrapped",Tf="plat_callback",Uf="js",Vf="noop",Wf="__app__",Xf="resource",Yf=Xf+"s",Zf="alias",$f=Zf+"es",_f="observable",ag="injectable",bg="object",cg="function",dg="literal",eg="root",fg="rootContext",gg="control",hg=Jb,ig=!!Array.isArray,jg={},kg=Object.prototype.toString,lg="[object ",mg=lg+"Error]",ng=lg+"File]",og=lg+"Array]",pg=lg+"Boolean]",qg=lg+"Date]",rg=lg+"Number]",sg=lg+"RegExp]",tg=lg+"String]",ug=lg+"Promise]",vg=/<([\w:]+)/,wg=/\s+/g,xg=[1,'<select multiple="multiple">',"</select>"],yg=[1,"<table>","</table>"],zg=[3,"<table><tbody><tr>","</tr></tbody></table>"],Ag=[1,'<svg xmlns="http://www.w3.org/2000/svg" version="1.1">',"</svg>"],Bg={thead:yg,tbody:yg,tfoot:yg,colgroup:yg,caption:yg,tr:[2,"<table><tbody>","</tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],td:zg,th:zg},Cg=c({},Bg,{option:xg,optgroup:xg,legend:[1,"<fieldset>","</fieldset>"],area:[1,"<map>","</map>"],param:[1,"<object>","</object>"],text:Ag,circle:Ag,ellipse:Ag,line:Ag,path:Ag,polygon:Ag,polyline:Ag,rect:Ag,_default:[0,"",""]}),Dg={},Eg={},Fg={},Gg={},Hg={},Ig={},Jg={},Kg={};!function(a){function b(b,c,d,e,f,g){var h=b[c]=new Lg.Injector(c,d,e,f);return g===!0&&(Ig[c]=h),a}function c(b,c,d){var e=lb(Tc),f=lb(Kb);return f.registerApp(new e(b,c,d)),a}function d(a,c,d,e){if(!m(a))throw new Error("A Control must be registered with a string name");return a=a.toLowerCase(),"head"===a&&(e=!0),b(Dg,a,c,d,e?Ff:void 0)}function e(a,c,d){if(!m(a))throw new Error("A ViewControl must be registered with a string name");return a=a.toLowerCase(),b(Eg,a,c,d)}function f(a,c,d,e){if(m(e)){if(e=e.toLowerCase(),e===If||e===Ff||e===Jf)return b(Gg,a,c,d,e,!0);if(e!==Gf&&e!==Hf)throw new Error("Invalid injectable type "+e+" during injectable registration.")}else e=Gf;return b(Gg,a,c,d,e,!1)}function g(c,d,e,f){if(m(f)&&(f=f.toLowerCase(),f!==Kf&&f!==Uf))throw new Error('Invalid animationType "'+f+'" during animation registration.');return b(f===Uf?Kg:Jg,c,d,e,a.injectable.INSTANCE)}a.app=c,a.control=d,a.viewControl=e,a.injectable=f;var f;!function(a){a.STATIC=Ff,a.SINGLETON=Gf,a.INSTANCE=Hf,a.FACTORY=If,a.CLASS=Jf}(f=a.injectable||(a.injectable={})),a.animation=g;var g;!function(a){a.CSS=Kf,a.JS=Uf}(g=a.animation||(a.animation={}))}(Hb=a.register||(a.register={}));var Lg;!function(a){var d=function(){function a(b,c,d,e){void 0===e&&(e=null),this.name=b,this.Constructor=c,this.type=e;var f,g=this.dependencies=a.convertDependencies(d),h=g.indexOf(Vf);if(Object.defineProperty(c,"__injectorName",{value:b,enumerable:!1,configurable:!0,writable:!0}),Object.defineProperty(c,"__injectorDependencies",{value:g.slice(0),enumerable:!1,configurable:!0,writable:!0}),h>-1){var i=d[h];if(t(i))throw new TypeError("The dependency for "+b+" at index "+h+" is undefined, did you forget to include a file?");throw new TypeError("Could not resolve dependency "+i.slice(9,i.indexOf("("))+" for "+b+". Are you using a static injectable Type?")}if(f=a.__findCircularReferences(this),m(f))throw new Error("Circular dependency detected from "+this.name+" to "+f+".");if(b===Kb){var j=this.inject();this.dependencies=g,j.start()}}return a.initialize=function(){for(var a=Ig,b=Object.keys(a),c=b.length,d=0;c>d;++d)a[b[d]].inject();Ig={}},a.getDependencies=function(b){if(t(b)||p(b))return[];for(var c=[],d=b.length,e=0;d>e;++e)c.push(a.getDependency(b[e]));return c},a.getDependency=function(b){return t(b)||b===Vf?a.__noop():a.isInjector(b)?b:a.__locateInjector(b)},a.convertDependencies=function(b){if(!v(b))return[];for(var c=a.convertDependency,d=[],e=b.length,f=0;e>f;++f)d.push(c(b[f]));return d},a.convertDependency=function(b){return t(b)?Vf:a.__getInjectorName(b)},a.isInjector=function(a){return s(a.inject)&&!u(a.type)&&!u(a.name)&&!u(a.Constructor)},a.__getInjectorName=function(b){if(t(b))return Vf;if(m(b))return b;var c=b,d=g(c._inject)?c._inject:{};if(m(c.__injectorName)&&(b=c.__injectorName),!m(b))return new a(b,c,d.dependencies);var e=a.__findInjector.bind(a,b),f=e(Gg)||e(Hg)||e(Ig)||e(Eg)||e(Dg)||e(Jg)||e(Kg);return!g(f)&&m(b)&&(f=Hg[b]=new a(b,c,c._inject.dependencies)),g(f)?f.name:Vf},a.__construct=function(b,c,d){if(t(b)||t(b.prototype))return b;var e,f=Object.create(b.prototype),h=d===Hf;h&&(e=Fg[b.__injectorName]),g(e)||(e=a.__walk(f,Object.getPrototypeOf(f),{}),h&&(Fg[b.__injectorName]=e));for(var i=lb(B(function(a){return a},e)),j=Object.keys(e),k=j.length,l=0;k>l;++l)f[j[l]]=i[l];var m=f.constructor.apply(f,c);return u(m)?f:m},a.__walk=function(b,d,f){var h=d.constructor,i={};g(h._inject)&&h!==Object&&(i=a.__walk(b,Object.getPrototypeOf(d),f));var j=e(h._inject,!0);return c({},f,i,j)},a.__locateInjector=function(b){if(!t(b)){var c=b;m(b.__injectorName)&&(c=b.__injectorName);var d=a.__findInjector.bind(a,c),e=d(Gg)||d(Hg)||d(Ig)||d(Dg)||d(Eg)||d(Jg)||d(Kg);return g(e)||(s(b)?(m(c)||(c=L(Wc)),e=new a(c,b,g(b._inject)?b._injectorDependencies:[]),Hg[c]=e):e=a.__wrap(b)),e}},a.__findInjector=function(b,c){if(!t(b)){if(b===a||b===Tc){var d=a.__wrap(a);return d.name=Tc,d}return m(b)?c[b]||c[b.toLowerCase()]:void 0}},a.__wrap=function(a){return{inject:function(){return a},name:Sf,dependencies:[],Constructor:a}},a.__noop=function(){return{inject:b,type:Vf,name:Vf,dependencies:[],Constructor:b}},a.__findCircularReferences=function(b){if(g(b)&&v(b.dependencies))for(var c,d,e,f=b.name,h=b.dependencies,i=[{name:f,dependencies:h.slice(0)}],j=a.__locateInjector;i.length>0;){c=i.pop(),h=c.dependencies,e=h.length;for(var k=0;e>k;++k){if(d=h[k],d===f)return c.name;b=j(d),g(b)&&v(b.dependencies)&&i.push({name:b.name,dependencies:b.dependencies.slice(0)})}}},a.prototype.inject=function(){for(var b,c,d=[],e=this.type,f=this.dependencies,g=f.length,h=0;g>h;++h)b=a.getDependency(f[h]),d.push(b.inject());return c=a.__construct(this.Constructor,d,e),m(e)&&e!==Hf&&this._wrapInjector(c),c.__injectable__type=e,c},a.prototype._wrapInjector=function(a){return this.inject=function(){return a},this},a}();a.Injector=d;var f;!function(a){a.control=Dg,a.viewControl=Eg,a.injectable=Gg,a.staticInjectable=Ig,a.animation=Jg,a.jsAnimation=Kg}(f=a.injectors||(a.injectors={}))}(Lg=a.dependency||(a.dependency={})),u(window)||(u(window.plat)&&(window.plat=plat),u(window.module)&&(window.module={})),a.acquire=lb;var Mg=function(){function a(){}return a.warn=function(a,b){ob(a,b,!1)},a.fatal=function(a,b){ob(a,b,!0)},a.PARSE=0,a.COMPILE=1,a.BIND=2,a.NAME=3,a.NAVIGATION=4,a.TEMPLATE=5,a.AJAX=6,a.CONTEXT=7,a.EVENT=8,a.INJECTABLE=9,a.COMPAT=10,a.PROMISE=11,a.ANIMATION=12,a.CONTROL=13,a}();a.Exception=Mg,a.IExceptionStatic=mb,Hb.injectable(Zb,mb,null,Ff);var Ng=function(){function a(a,b){this.message=a,this.name=b}return a}(),Og=function(){function a(a){this.message=a,this.name=lf,this.message=a||""}return a}(),Pg=function(){function a(){this.__events={},this.__defineBooleans(),this.__defineMappedEvents(),this.__defineAnimationEvents(),this.__determineCss()}return a.prototype.hasEvent=function(a){var b=this.__events,c=b[a];if(u(c)){var d=this._document.createElement("div");c=b[a]="input"===a&&9===this.IE?!1:!u(d["on"+a])}return c},a.prototype.__defineBooleans=function(){var a=this._window,b=a.navigator||{},c=(b.userAgent||"").toLowerCase(),d=this._history,e=a.define,f=a.MSApp,h=a.WinJS,i=(/android ((?:\d|\.)+)/.exec(c)||[])[1];if(m(i)&&(i=parseInt(i.replace(/\./g,""),10)),this.isCompatible=s(Object.defineProperty)&&s(this._document.querySelector),this.cordova=!t(a.cordova),this.pushState=!(t(d)||t(d.pushState)),this.fileSupported=!(u(a.File)||u(a.FormData)),this.amd=s(e)&&!t(e.amd),this.msApp=g(f)&&s(f.execUnsafeLocalFunction),this.winJs=g(h)&&g(h.Application),this.indexedDb=!t(a.indexedDB),this.proto=g({}.__proto__),this.getProto=s(Object.getPrototypeOf),this.setProto=s(Object.setPrototypeOf),this.hasTouchEvents=!u(a.ontouchstart),this.hasPointerEvents=!!b.pointerEnabled,this.hasMsPointerEvents=!!b.msPointerEnabled,r(i))return void(this.ANDROID=i);var j=parseInt((/msie (\d+)/.exec(c)||[])[1],10)||parseInt((/trident\/.*; rv:(\d+)/.exec(c)||[])[1],10);r(j)&&(this.IE=j)},a.prototype.__defineMappedEvents=function(){this.mappedEvents=this.hasPointerEvents?{$touchstart:"pointerdown",$touchend:"pointerup",$touchmove:"pointermove",$touchcancel:"pointercancel"}:this.hasMsPointerEvents?{$touchstart:"MSPointerDown",$touchend:"MSPointerUp",$touchmove:"MSPointerMove",$touchcancel:"MSPointerCancel"}:this.hasTouchEvents?{$touchstart:"touchstart",$touchend:"touchend",$touchmove:"touchmove",$touchcancel:"touchcancel"}:{$touchstart:"mousedown",$touchend:"mouseup",$touchmove:"mousemove",$touchcancel:null}},a.prototype.__defineAnimationEvents=function(){var a,b,c=this._window,d=this._document.documentElement,e=c.getComputedStyle(d,"");if(u(e.OLink)){var f=Array.prototype.slice.call(e).join("").match(/-(moz|webkit|ms)-/);a=v(f)&&f.length>1?f[1]:"",b="ms"===a?"MS":a[0].toUpperCase()+a.slice(1)}else a="o",b="O";this.vendorPrefix={lowerCase:a,css:""===a?"":"-"+a+"-",upperCase:b},this.requestAnimationFrame=c.requestAnimationFrame||c[a+"RequestAnimationFrame"],this.cancelAnimationFrame=c.cancelAnimationFrame||c[a+"CancelRequestAnimationFrame"]||c[a+"CancelAnimationFrame"];var g,h=d.style;(g=!u(h.animation))?this.animationEvents={$animation:"animation",$animationStart:"animationstart",$animationEnd:"animationend",$animationIteration:"animationiteration",$transition:"transition",$transitionStart:"transitionstart",$transitionEnd:"transitionend"}:(g=!u(h[b+"Animation"]))&&(this.animationEvents={$animation:a+"Animation",$animationStart:a+"AnimationStart",$animationEnd:a+"AnimationEnd",$animationIteration:a+"AnimationIteration",$transition:a+"Transition",$transitionStart:a+"TransitionStart",$transitionEnd:a+"TransitionEnd"}),this.animationSupported=g},a.prototype.__determineCss=function(){var a=this._document,b=a.head,c=a.createElement("div");c.setAttribute(Ie,""),b.insertBefore(c,null);var d=this._window.getComputedStyle(c),e=d.display,f=d.visibility;this.platCss="none"===e||"hidden"===f?!0:!1,b.removeChild(c)},a._inject={_window:Hc,_history:Uc,_document:Tb},a}();a.Compat=Pg,Hb.injectable(Qb,Pg);var Qg=function(){function a(){}return a.prototype.noop=function(){},a.prototype.extend=function(a){for(var b=[],d=1;d<arguments.length;d++)b[d-1]=arguments[d];return c.apply(null,[a].concat(b))},a.prototype.deepExtend=function(a){for(var b=[],d=1;d<arguments.length;d++)b[d-1]=arguments[d];return c.apply(null,[!0,a].concat(b))},a.prototype.clone=function(a,b){return e(a,b)},a.prototype.isObject=function(a){return g(a)},a.prototype.isWindow=function(a){return h(a)},a.prototype.isDocument=function(a){return i(a)},a.prototype.isNode=function(a){return j(a)},a.prototype.isDocumentFragment=function(a){return k(a)},a.prototype.isString=function(a){return m(a)},a.prototype.isRegExp=function(a){return n(a)},a.prototype.isPromise=function(a){return o(a)},a.prototype.isEmpty=function(a){return p(a)},a.prototype.isBoolean=function(a){return q(a)},a.prototype.isNumber=function(a){return r(a)},a.prototype.isFunction=function(a){return s(a)},a.prototype.isNull=function(a){return t(a)},a.prototype.isUndefined=function(a){return u(a)},a.prototype.isArray=function(a){return v(a)},a.prototype.isArrayLike=function(a){return w(a)},a.prototype.isDate=function(a){return x(a)},a.prototype.filter=function(a,b,c){return y(a,b,c)},a.prototype.where=function(a,b){return z(a,b)},a.prototype.forEach=function(a,b,c){return A(a,b,c)},a.prototype.map=function(a,b,c){return B(a,b,c)},a.prototype.mapAsync=function(a,b,c){return C(a,b,c)},a.prototype.mapAsyncInOrder=function(a,b,c){return E(a,b,c)},a.prototype.mapAsyncInDescendingOrder=function(a,b,c){return F(a,b,c)},a.prototype.pluck=function(a,b){return B(function(b){return b[a]},b)},a.prototype.some=function(a,b,c){return G(a,b,c)},a.prototype.postpone=function(a,b,c){return I(a,0,b,c)},a.prototype.defer=function(a,b,c,d){return I(a,b,c,d)},a.prototype.setInterval=function(a,b,c,d){return J(a,b,c,d)},a.prototype.requestAnimationFrame=function(a,b){return K(a,b)},a.prototype.uniqueId=function(a){return L(a)},a.prototype.camelCase=function(a){return M(a)},a.prototype.delimit=function(a,b){return N(a,b)},a}();a.Utils=Qg,Hb.injectable(Bc,Qg),a.Window=pb,Hb.injectable(Hc,pb),a.Document=qb,Hb.injectable(Tb,qb,[Hc]);var Rg;!function(a){var b=function(){function a(){this.markupRegex=new RegExp(Df+"[\\S\\s]*"+Ef),this.argumentRegex=/\((.*)\)/,this.initialUrlRegex=/\/[^\/]*\.(?:html|htm)/,this.protocolRegex=/:\/\//,this.invalidVariableRegex=/[^a-zA-Z0-9@_$]/,this.fileNameRegex=/.*(?:\/|\\)/,this.shiftedKeyRegex=/[A-Z!@#$%^&*()_+}{":?><|~]/,this.fullUrlRegex=/^(?:[a-z0-9\-]+:)(?:\/\/)?|(?:\/\/)/i,this.validateEmail=new RegExp('^(([^<>()[\\]\\.,;:\\s@\\"]+(\\.[^<>()[\\]\\.,;:\\s@\\"]+)*)|(\\".+\\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$'),this.validateTelephone=/^\+?[0-9\.\-\s]*$/,this.dynamicSegmentsRegex=/^:([^\/]+)$/,this.splatSegmentRegex=/^\*([^\/]+)$/}return Object.defineProperty(a.prototype,"newLineRegex",{get:function(){return/\r|\n/g},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"optionalRouteRegex",{get:function(){return/\((.*?)\)/g},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"namedParameterRouteRegex",{get:function(){return/(\(\?)?:\w+/g},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"wildcardRouteRegex",{get:function(){return/\*\w*/g},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"escapeRouteRegex",{get:function(){return/[\-{}\[\]+?.,\\\^$|#\s]/g},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"camelCaseRegex",{get:function(){return/([\-_\.\s])(\w+?)/g},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"capitalCaseRegex",{get:function(){return/[A-Z]/g},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"whiteSpaceRegex",{get:function(){return/("[^"]*?"|'[^']*?')|[\s\r\n\t\v]/g},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"quotationRegex",{get:function(){return/'|"/g},enumerable:!0,configurable:!0}),a}();a.Regex=b,Hb.injectable(_b,b);var c=function(){function a(){this.__previousChar="",this.__variableRegex=lb(_b).invalidVariableRegex,this.__outputQueue=[],this.__operatorStack=[],this.__argCount=[],this.__objArgCount=[],this.__lastColonChar=[],this.__lastCommaChar=[]}return a.prototype.createTokens=function(a){if(t(a))return[];this._input=a;for(var b,c=a.length,d=0,e=!1,f=this._isSpace,g=this._isAlphaNumeric,h=0;c>h;h++)if(b=a[h],!f(b)){if(g(b))h=this.__handleAplhaNumeric(h,b);else if(rb(b))switch(b){case".":h=this.__handlePeriod(h,b);break;case"{":this.__handleLeftBrace(b);break;case"}":this.__handleRightBrace(b);break;case"[":this.__handleLeftBracket(b);break;case"]":this.__handleRightBracket(b);break;case"(":this.__handleLeftParenthesis(b);break;case")":this.__handleRightParenthesis(b);break;case",":this.__handleComma(b);break;case"'":case'"':h=this.__handleStringLiteral(h,b)}else if(tb(b))switch(b){case"?":e=!0,d++,this.__handleQuestion(b);break;case":":d=this.__handleColon(b,d);break;default:h=this.__handleOtherOperator(h,b)}else if(";"===b)return this._throwError("Unexpected semicolon"),[];this.__previousChar=b}if(e&&d>0)return this._throwError("Improper ternary expression"),[];if(this.__objArgCount.length>0)return this._throwError("Improper object literal"),[];this.__popRemainingOperators();var i=this.__outputQueue;return this._resetTokenizer(),i},a.prototype._checkType=function(a,b){return b?this._isNumeric(a):this._isAlphaNumeric(a)},a.prototype._lookAhead=function(a,b,c){for(var d,e=this._input,f=e.length;++b<f&&(d=e[b],this._checkType(d,c));)a+=d;return a},a.prototype._lookAheadForOperatorFn=function(a,b){for(var c,d=a,e=this._input,f=e.length;++b<f&&(c=e[b],d+=c,tb(d));)a=d;return a},a.prototype._lookAheadForDelimiter=function(a,b){for(var c,d="",e=this._input,f=e.length;++b<f&&(c=e[b])!==a;)d+=c;return d},a.prototype._popStackForVal=function(a,b,c){for(var d=this.__outputQueue,e=this.__operatorStack;a.val!==b;)if(d.push(e.shift()),a=e[0],0===e.length)return this._throwError(c)},a.prototype._isValEqual=function(a,b){return t(a)||t(a.val)?t(b):""===a.val?""===b:-1!==b.indexOf(a.val)},a.prototype._isValUnequal=function(a,b){return t(a)||t(a.val)?!t(b):""===a.val?""!==b:-1===b.indexOf(a.val)},a.prototype._resetTokenizer=function(){this._input=null,this.__previousChar="",this.__outputQueue=[],this.__operatorStack=[],this.__argCount=[],this.__objArgCount=[],this.__lastColonChar=[],this.__lastCommaChar=[]},a.prototype._throwError=function(a){var b=this._Exception;b.fatal(a+" in "+this._input,b.PARSE)},a.prototype._isNumeric=function(a){return a>="0"&&"9">=a},a.prototype._isSpace=function(a){return" "===a||"\r"===a||"\n"===a||"	"===a||""===a||" "===a},a.prototype._isAlphaNumeric=function(a){return a>="a"&&"z">=a||a>="A"&&"Z">=a||a>="0"&&"9">=a||"@"===a||"_"===a||"$"===a},a.prototype._isStringValidVariable=function(a){return!this.__variableRegex.test(a)},a.prototype.__handleAplhaNumeric=function(a,b){var c=this._isNumeric(b),d=this._lookAhead(b,a,c);return this.__outputQueue.push(c?{val:Number(d),args:0}:{val:d,args:-1}),a+d.length-1},a.prototype.__handlePeriod=function(a,b){var c,d=this.__outputQueue,e=this.__operatorStack,f=d.length-1,g=this.__previousChar;return 0>f||this._isSpace(g)||!t(Wg[g])||"("===g||","===g?(c=this._lookAhead(b,a,!0),a+=c.length-1,d.push({val:parseFloat(c),args:0})):this._isValEqual(e[0],b)?d.push({val:b,args:0}):t(d[f])||!r(Number(d[f].val))||this._isValEqual(d[f-1],b)?e.unshift({val:b,args:0}):(c=this._lookAhead(b,a,!0),a+=c.length-1,d[f].val+=parseFloat(c)),a
},a.prototype.__handleLeftBrace=function(a){this.__operatorStack.unshift({val:a,args:0}),this.__objArgCount.push(0),this.__lastColonChar.push(a),this.__lastCommaChar.push(a)},a.prototype.__handleRightBrace=function(){var a=this.__operatorStack,b=a[0],c=this.__objArgCount.pop();return t(b)?this._throwError("Improper object literal"):(this._popStackForVal(b,"{","Improper object literal"),a.shift(),this.__lastColonChar.pop(),this.__lastCommaChar.pop(),void this.__outputQueue.push({val:"{}",args:c}))},a.prototype.__handleLeftBracket=function(a){var b=this.__previousChar,c=this.__operatorStack;this._isValEqual(c[0],".")&&this.__outputQueue.push(c.shift()),c.unshift({val:a,args:0}),this.__argCount.push({num:0,isArray:!("]"===b||")"===b||this._isAlphaNumeric(b))}),this.__lastCommaChar.push(a)},a.prototype.__handleRightBracket=function(){var a=this.__operatorStack,b=a[0],c=this.__argCount.pop();return t(b)||t(c)?this._throwError("Brackets mismatch"):(c.isArray||c.num--,this._popStackForVal(b,"[","Brackets mismatch"),a.shift(),this.__lastCommaChar.pop(),void this.__outputQueue.push({val:"[]",args:"["===this.__previousChar?-1:c.num+1}))},a.prototype.__handleLeftParenthesis=function(a){var b=this.__previousChar,c=this.__operatorStack;if(this._isAlphaNumeric(b)||"]"===b||")"===b){var d=this.__outputQueue,e=d[d.length-1];this._isValEqual(e,"[]")?(c.unshift(d.pop()),c.unshift(d.pop())):this._isValEqual(e,"()")||this._isNumeric(e.val)||c.unshift(d.pop()),this.__argCount.push({num:0})}c.unshift({val:a,args:0}),this.__lastCommaChar.push(a)},a.prototype.__handleRightParenthesis=function(){var a=this.__operatorStack,b=a[0],c=this.__argCount.pop();if(t(b))return this._throwError("Parentheses mismatch");if(this._popStackForVal(b,"(","Parentheses mismatch"),a.shift(),this.__lastCommaChar.pop(),!t(c)){var d=c.num;if("("===this.__previousChar)return void(this.__removeFnFromStack(d)&&this.__outputQueue.push({val:"()",args:0}));this.__removeFnFromStack(d+1)&&this.__outputQueue.push({val:"()",args:d+1})}},a.prototype.__handleComma=function(){var a=this.__lastCommaChar,b=a[a.length-1];if("("===b||"["===b){var c=this.__argCount,d=c.length;if(!(d>0))return this._throwError("Mismatch with "+b);c[d-1].num++}var e=this.__operatorStack[0];return t(e)?this._throwError("Unexpected comma"):void this._popStackForVal(e,b,"Unexpected comma")},a.prototype.__handleStringLiteral=function(a,b){var c=this._lookAheadForDelimiter(b,a),d=this.__operatorStack;return this._isValEqual(d[0],"([")?d.unshift({val:c,args:0}):this.__outputQueue.push({val:c,args:0}),a+c.length+1},a.prototype.__handleQuestion=function(a){this.__lastColonChar.push(a),this.__determinePrecedence(a)},a.prototype.__handleColon=function(a,b){var c=this.__lastColonChar,d=c[c.length-1],e=this.__outputQueue;if("?"===d){var f=this.__operatorStack,g=f[0];if(t(g))return void this._throwError("Ternary mismatch");b--,c.pop(),this._popStackForVal(g,"?","Ternary mismatch"),e.push(f.shift()),f.unshift({val:a,args:-2})}else{if("{"!==d)return void this._throwError("Unexpected colon");var h=this.__objArgCount,i=e.length-1;if(h[h.length-1]++,0>i)return void this._throwError("Unexpected colon");e[i].args=1}return b},a.prototype.__handleOtherOperator=function(a,b){var c=this._lookAheadForOperatorFn(b,a);return this.__determinePrecedence(c),a+c.length-1},a.prototype.__popRemainingOperators=function(){for(var a,b,c=this.__outputQueue,d=this.__operatorStack;d.length>0;){if(a=d.shift(),b=a.val,"("===b||")"===b)return this._throwError("Parentheses mismatch");c.push(a)}},a.prototype.__determineOperator=function(a){switch(a){case"+":case"-":if(0===this.__outputQueue.length||tb(this.__previousChar))return Wg["u"+a];default:return Wg[a]}},a.prototype.__determinePrecedence=function(a){var b,c,d=this.__determineOperator(a),e=d.precedence,f="ltr"===d.associativity,g=this.__operatorStack,h=this.__outputQueue;if(0===g.length)return void g.unshift({val:a,args:d.fn.length-2});do if(c=g[0].val,"."!==c){if(b=Wg[c],t(b)||!(b.precedence<e||f&&b.precedence===e))return void g.unshift({val:a,args:d.fn.length-2});h.push(g.shift())}else h.push(g.shift());while(g.length>0);g.unshift({val:a,args:d.fn.length-2})},a.prototype.__removeFnFromStack=function(a){for(var b,c=this.__outputQueue,d=this.__operatorStack,e=d[0],f=this._isValEqual,g=this._isValUnequal,h=!1;!t(e)&&g(e,"([")&&(this._isStringValidVariable(e.val)||f(e.val,".[]")||sb(e.val));)b=d.shift(),-1!==b.args||f(b,".[]")||(b.args=-2),c.push(b),e=d[0],h=!0;return h||g(c[c.length-a-1],"()")||(h=!0),h},a._inject={_Exception:Zb},a}();a.Tokenizer=c,Hb.injectable(ac,c);var d=function(){function a(){this._tokens=[],this.__cache={},this.__codeArray=[],this.__identifiers=[],this.__tempIdentifiers=[],this.__aliases={}}return a.prototype.parse=function(a){var b=this.__cache[a];if(!t(b))return b;this._tokens=this._tokenizer.createTokens(a),b=this._evaluate(a);var c=b.identifiers;if(0===c.length){var d=b.evaluate(null);b.evaluate=function(){return d}}return this.__cache[a]=b,b},a.prototype.clearCache=function(a){return m(a)?void O(this.__cache,a):void(this.__cache={})},a.prototype._evaluate=function(a){for(var b,c,d,e=this._tokens,f=e.length,g=this.__tempIdentifiers,h=this.__codeArray,i=!1,j=0;f>j;j++)if(b=e[j],c=b.val,d=b.args,sb(c))switch(c){case"()":i=this.__handleFunction(j,d,i);break;case"{}":h.push(this.__convertObject(d)),g.push(".");break;default:0>d?(h.push("[]"),g.push(".")):d>0?(h.push(this.__convertArrayLiteral(d)),g.push(".")):i=this.__indexIntoObject(j,c,i)}else if(tb(c))if(0===d)h.push(this.__convertPrimitive(j,c,d));else switch(c){case"?":this.__handleQuestion();break;case":":this.__handleColon();break;case"+":case"-":1===d&&(c="u"+c);default:this.__handleOperator(c,d)}else h.push(0>d?this.__convertFunction(j,c,i):this.__convertPrimitive(j,c,d));this._popRemainingIdentifiers(),this._makeIdentifiersUnique();var k={evaluate:new Function(Jb,$f,"var initialContext;return "+(0===h.length?'"'+a+'"':h.join(""))+";"),expression:a,identifiers:this.__identifiers.slice(0),aliases:Object.keys(this.__aliases)};return this._resetParser(),k},a.prototype._peek=function(a){return this._tokens[a+1]},a.prototype._lookBack=function(a){return this._tokens[a-1]},a.prototype._popRemainingIdentifiers=function(){for(var a,b=this.__identifiers,c=this.__tempIdentifiers;c.length>0;)a=c.pop(),"."!==a&&b.push(a)},a.prototype._makeIdentifiersUnique=function(){for(var a,b=this.__identifiers,c=[],d={};b.length>0;)a=b.pop(),d[a]||(d[a]=!0,c.push(a));this.__identifiers=c},a.prototype._isValEqual=function(a,b){return t(a)||t(a.val)?t(b):""===a.val?""===b:-1!==b.indexOf(a.val)},a.prototype._isValUnequal=function(a,b){return t(a)||t(a.val)?!t(b):""===a.val?""!==b:-1===b.indexOf(a.val)},a.prototype._resetParser=function(){this._tokens=[],this.__codeArray=[],this.__identifiers=[],this.__tempIdentifiers=[],this.__aliases={}},a.prototype._throwError=function(a){var b=this._Exception;b.fatal(a,b.PARSE)},a.prototype.__convertPrimitive=function(a,b,c){if(c>0)return this.__tempIdentifiers.push("."),b;var d=r(Number(b)),e=this._peek(a),f=!(t(e)||e.args>=1),g=this._isValEqual;return ub(b)||m(b)&&(d||this._isValUnequal(e,"[]()")||g(e,"[]")&&!f)?(this.__tempIdentifiers.push("."),'"'+b+'"'):(this.__tempIdentifiers.push(!d||g(e,".[]")&&f?b:"."),b)},a.prototype.__convertFunction=function(a,b,c){if("@"===b[0])this.__aliases[b.slice(1)]=!0;else if(ub(b))return this.__tempIdentifiers.push("."),b;var d=this._peek(a),e=this._isValEqual;if(this.__tempIdentifiers.push(e(this._tokens[a-1],"()")&&e(d,".[]")?".":b),t(d))return"(initialContext = ("+this.__findInitialContext.toString()+')(context,aliases,"'+b+'"))';switch(d.val){case".":case"()":return b;default:if(!c)return"(initialContext = ("+this.__findInitialContext.toString()+')(context,aliases,"'+b+'"))'}},a.prototype.__convertObject=function(a){for(var b,c,d,e=this.__identifiers,f=this.__tempIdentifiers,g=this.__codeArray,h=0,i="{";h++<a;)d=g.pop(),b=g.pop(),i+=',"'+b+'":'+d,f.length>1&&(c=f.pop(),f.pop(),"."!==c&&e.push(c));return i.replace(",","")+"}"},a.prototype.__convertArrayLiteral=function(a){for(var b,c=this.__identifiers,d=this.__tempIdentifiers,e=this.__codeArray,f=0,g="";f++<a;)g=e.pop()+","+g,d.length>0&&(b=d.pop(),"."!==b&&c.push(b));return"["+g.slice(0,-1)+"]"},a.prototype.__handleFunction=function(a,b,c){var d,e,f=this.__identifiers,g=this.__tempIdentifiers,h=this.__codeArray,i=0,j=this._lookBack(a),k=!t(j)&&(-2===j.args||this._isValEqual(j,".[]")),l="",m="",n="",o=!1;for(k&&(m=h.pop(),n=g.pop());i++<b;)l=h.pop()+","+l,g.length>0&&(d=g.pop(),"."!==d&&(f.push(d),o=!0));if(e=b>0?".call(initialContext || context,"+l.slice(0,l.length-1)+")":".call(initialContext || context)",c)if(c=!1,h.length>0){var q=h.pop(),r=g.length-1;0>r||"."===g[r]||""===n?""!==n&&o&&"["!==q[0]&&"]"!==q[q.length-1]&&(f[f.length-1]+="."+n):(g[r]+="."+n,f.push(g.pop())),e=p(m)?q+e:"(("+this.__indexIntoContext.toString()+")("+q+',"'+m+'") || (function () {}))'+e}else this._throwError("Improper expression or context");else k?(e="(initialContext = (("+this.__findInitialContext.toString()+')(context,aliases,"'+m+'") || (function () {}))'+e+")",f.push(m)):e=h.pop()+e;h.push(e);var s=g.length;return this._isValEqual(this._peek(a),"[]")&&s>0&&"."!==g[s-1]&&f.push(g.pop()),c},a.prototype.__indexIntoObject=function(a,b,c){var d=this._isValEqual;if(d(this._peek(a),"()"))return!0;var e,f=this.__codeArray,g=f.pop(),h=this.__identifiers,i=this.__tempIdentifiers,j=this._lookBack(a),k=i.pop(),l=!t(k);return l&&"@"===k[0]?(g="("+this.__indexIntoContext.toString()+")("+f.pop()+","+g+")",h.push(k),i.length>0&&h.push(i.pop())):d(j,"++--()[]*/%?:>=<=&&||!===")?(g="("+this.__indexIntoContext.toString()+")("+f.pop()+","+g+")",i.push(".")):"[]"!==b||t(j)||j.args>=0?(g="("+this.__indexIntoContext.toString()+")("+f.pop()+',"'+g+'")',e=i.length-1,e>=0?"."!==i[e]&&(i[e]+="."+k):l&&"."!==k&&"."!==b&&h.push(k)):(g="("+this.__indexIntoContext.toString()+")("+f.pop()+","+g+")",e=i.length-1,e>=0&&"."!==i[e]&&h.push(i.pop()),h.push(k)),f.push(g),c},a.prototype.__handleQuestion=function(){for(var a,b=this.__identifiers,c=this.__tempIdentifiers,d=this.__codeArray,e=d.pop(),f=0;2>f&&c.length>0;f++)a=c.pop(),"."!==a&&b.push(a);d.push(d.pop()+"?"+e)},a.prototype.__handleColon=function(){for(var a,b=this.__identifiers,c=this.__tempIdentifiers,d=this.__codeArray,e=d.pop(),f=0;2>f&&c.length>0;f++)a=c.pop(),"."!==a&&b.push(a);d.push(d.pop()+":"+e)},a.prototype.__handleOperator=function(a,b){for(var c,d=this.__identifiers,e=this.__tempIdentifiers,f=this.__codeArray,g=0,h="";g++<b;)h="function (context, aliases) { return "+f.pop()+"; },"+h,e.length>0&&(c=e.pop(),"."!==c&&d.push(c));f.push("("+Wg[a].fn.toString()+")(context, aliases,"+h.slice(0,h.length-1)+")")},a.prototype.__findInitialContext=function(a,b,c){return"@"===c[0]&&null!==b&&"object"==typeof b?b[c.slice(1)]:null!==a&&"object"==typeof a?a[c]:void 0},a.prototype.__indexIntoContext=function(a,b){return null!==a&&"object"==typeof a?a[b]:void 0},a._inject={_tokenizer:ac,_Exception:Zb},a}();a.Parser=d,Hb.injectable($b,d)}(Rg=a.expressions||(a.expressions={}));var Sg;!function(a){function b(a){return a.location}function c(){return d.config}a.Location=b,Hb.injectable(Vc,b,[Hc]);var d=function(){function a(){this.uid=L(Wc),this.__lastUrl=this._location.href,this.__initializing=!1,this._EventManager.on(this.uid,ye,this.initialize,this),this._compat.msApp&&(this._stack=[])}return a.prototype.initialize=function(){var b=(a.config,this._compat);this._EventManager.dispose(this.uid),this.__initializing=!0,lb(Gc);var c=this.url(),d=c,e=this._urlChanged.bind(this),f=this._dom,g=this._window;d!==c&&this.url(d,!0),b.pushState&&f.addEventListener(g,Qf,e,!1),f.addEventListener(g,Rf,e,!1),this.__initializing=!1},a.prototype.url=function(a,b){var c=this._location;return m(a)&&this.__lastUrl!==a&&(!b&&v(this._stack)&&this._stack.push(c.href),this._setUrl(a,b)),this.__currentUrl||c.href},a.prototype.back=function(a){r(a)||(a=1);var b=this._stack;return v(b)&&b.length>1?(this._stack=b=b.slice(0,b.length-(a-1)),this.url(b.pop()),void b.pop()):void this._history.go(-a)},a.prototype.forward=function(a){r(a)||(a=1),this._history.go(a)},a.prototype.urlUtils=function(b){b=b||this.url();var c=lb(Gc),d=a.config;return d.routingType===d.HASH&&(b=b.replace(new RegExp("#"+(d.hashPrefix||"")+"/?"),"")),c.initialize(b),c},a.prototype.isCrossDomain=function(a){if(!m(a))return!1;var b=this.urlUtils(a),c=this.urlUtils();return b.protocol!==c.protocol||b.hostname!==c.hostname||b.port!==c.port},a.prototype._urlChanged=function(){if(!this.__initializing){this.__currentUrl=null;var b=this.url(),c=a.config;if(!(this.__lastUrl===b||c.routingType===c.STATE&&b.indexOf(this.__lastUrl+"#")>-1)){this.__lastUrl=b;var d=this._EventManager;d.dispatch(Ce,this,d.DIRECT,[this.urlUtils()])}}},a.prototype._setUrl=function(b,c){b=this.formatUrl(b);var d=this.urlUtils(b),e=a.config.baseUrl,f=this._history,g=this._location;return-1===d.href.indexOf(e)?void(g.href=b):(this._regex.fullUrlRegex.test(b)||"/"===b[0]||(b=e+b),void(this._compat.pushState?(c?f.replaceState(null,"",b):f.pushState(null,"",b),this.__initializing||this._urlChanged()):(this.__currentUrl=b,c?g.replace(b):g.href=b)))},a.prototype.formatUrl=function(b){var c=a.config,d=(c.baseUrl,!this._regex.fullUrlRegex.test(b)||b.indexOf(c.baseUrl)>-1);if(!m(b))return"";if(b===c.baseUrl)return b;if("/"===b[0]&&(b=b.slice(1)),d&&c.routingType===c.HASH){var e=-1!==b.indexOf(this.urlUtils().protocol),f=c.hashPrefix||"",g=new RegExp("#"+f+"|#/");"/"!==b[b.length-1]&&-1===b.indexOf("?")&&(b+="/"),e&&!g.test(b)?b=b+"#"+f+"/":g.test(b)||(b="#"+f+("/"!==b[0]?"/":"")+b)}return d&&-1===b.indexOf(c.baseUrl)&&(b=c.baseUrl+b),b},a._inject={_EventManager:Wb,_compat:Qb,_regex:_b,_window:Hc,_location:Vc,_history:Uc,_dom:tc},a.config={HASH:"hash",STATE:"state",routingType:"hash",hashPrefix:"!",baseUrl:""},a}();a.Browser=d,Hb.injectable(Cc,d),a.IBrowserConfig=c,Hb.injectable(Dc,c);var e=function(){function a(){var b=this._browserConfig;if(p(b.baseUrl)||!this._regex.fullUrlRegex.test(b.baseUrl)){var c=this._window.location.href,d=c.replace(this._regex.initialUrlRegex,"/"),e=b.baseUrl;for(m(e)?0===e.indexOf("/")&&(e=e.slice(1)):e="",e=a.__getBaseUrl(d)+e;"/"===e[e.length-1];)e=e.slice(0,-1);b.baseUrl=e+"/"}}return a.__getQuery=function(a){return Q(a)},a.__getBaseUrl=function(){{var a=lb(_b),b=lb(Vc),c=b.origin,d=b.protocol;b.host}return"file:"===d||d.indexOf("wmapp")>-1||d.indexOf("ms-appx")>-1?c=b.href:u(c)&&(c=b.protocol+"//"+b.host),c=c.replace(a.initialUrlRegex,""),c.split("?")[0].split("#")[0]+"/"},a.prototype.initialize=function(b){b=b||"";var c=a.__urlUtilsElement||(a.__urlUtilsElement=this._document.createElement("a")),d=this._browserConfig;"/"===b[0]&&0!==b.indexOf("//")&&(b=b.slice(1)),this._regex.fullUrlRegex.test(b)||(b=d.baseUrl+b),c.setAttribute("href",b),b=c.href,c.setAttribute("href",b),b=c.href;c.protocol?c.protocol.replace(/:$/,""):"";this.href=b,this.protocol=c.protocol?c.protocol.replace(/:$/,""):"",this.host=c.host,this.search=c.search?c.search.replace(/^\?/,""):"",this.hash=c.hash?c.hash.replace(/^#/,""):"",this.hostname=c.hostname,this.port=c.port;var e;e=p(d.baseUrl)?"/"===c.pathname.charAt(0)?c.pathname:"/"+c.pathname:b.replace(d.baseUrl,"/"),e=e.replace(this._regex.initialUrlRegex,"/"),this.pathname=e.split("?")[0].split("#")[0],this.query=a.__getQuery(this.search)},a.prototype.toString=function(){return this.href},a._inject={_EventManager:Wb,_document:Tb,_window:Hc,_compat:Qb,_regex:_b,_browserConfig:Dc},a}();a.UrlUtils=e,Hb.injectable(Gc,e,null,Hf)}(Sg=a.web||(a.web={}));var Tg;!function(a){function d(){return function(){x.nextTick(h)}}function e(){var a=new w(h),b=lb(Tb),c=lb(Hc),d=b.createElement("div");return a.observe(d,{attributes:!0}),c.addEventListener("unload",function(){a.disconnect(),a=null},!1),function(){d.setAttribute("drainQueue","drainQueue")}}function f(){var a=a,b="undefined"!=typeof a?a:this;return function(){b.setTimeout(h,1)}}function h(){for(var a,b,c,d=0;d<n.length;d++)a=n[d],b=a[0],c=a[1],b(c);n=[]}function i(a){return!t(a.Promise)&&s(a.Promise.all)&&s(a.Promise.race)&&s(a.Promise.resolve)&&s(a.Promise.reject)?a.Promise:y}function j(){return D.config}var k,n=[],q="undefined"!=typeof window?window:{},w=q.MutationObserver||q.WebKitMutationObserver,x=x;k="undefined"!=typeof x&&"[object process]"==={}.toString.call(x)?d():w?e():f();var y=function(){function a(b){if(!s(b))throw new TypeError("You must pass a resolver function as the first argument to the promise constructor");if(!(this instanceof a))throw new TypeError('Failed to construct "Promise": Please use the "new" operator, this object constructor cannot be called as a function.');this.__subscribers=[],a.__invokeResolveFunction(b,this)}return a.all=function(b){return v(b)?new a(function(a,c){function d(a){return function(b){return e(a,b)}}function e(b,c){g[b]=c,0===--h&&a(g)}var f,g=[],h=b.length;0===h&&a([]);for(var i=0;i<b.length;i++)f=b[i],o(f)?f.then(d(i),c):e(i,f)}):a.all([b])},a.race=function(b){return v(b)?new a(function(a,c){for(var d,e=0;e<b.length;e++)d=b[e],d&&"function"==typeof d.then?d.then(a,c):a(d)}):a.race([b])},a.resolve=function(b){return new a(function(a){a(b)})},a.reject=function(b){return new a(function(a,c){c(b)})},a.__invokeResolveFunction=function(b,c){function d(b){a.__resolve(c,b)}function e(b){a.__reject(c,b)}try{b(d,e)}catch(f){e(f)}},a.__invokeCallback=function(b,c,d,e){var f,g,h,i,j=s(d);if(j)try{f=d(e),h=!0}catch(k){i=!0,g=k}else f=e,h=!0;a.__handleThenable(c,f)||(j&&h?a.__resolve(c,f):i?a.__reject(c,g):1===b?a.__resolve(c,f):2===b&&a.__reject(c,f))},a.__publish=function(b,c){for(var d,e,f=b.__subscribers,g=b.__detail,h=0;h<f.length;h+=3)d=f[h],e=f[h+c],a.__invokeCallback(c,d,e,g);b.__subscribers=null},a.__publishFulfillment=function(b){a.__publish(b,b.__state=1)},a.__publishRejection=function(b){a.__publish(b,b.__state=2)},a.__reject=function(b,c){b.__state===z.PENDING&&(b.__state=0,b.__detail=c,a.config.async(a.__publishRejection,b))},a.__fulfill=function(b,c){b.__state===z.PENDING&&(b.__state=0,b.__detail=c,a.config.async(a.__publishFulfillment,b))},a.__resolve=function(b,c){b===c?a.__fulfill(b,c):a.__handleThenable(b,c)||a.__fulfill(b,c)},a.__handleThenable=function(b,c){var d;if(b===c)return a.__reject(b,new TypeError("A promises callback cannot return the same promise.")),!0;if(o(c))try{return c.then.call(c,function(e){return d?!0:(d=!0,void(c!==e?a.__resolve(b,e):a.__fulfill(b,e)))},function(c){return d?!0:(d=!0,void a.__reject(b,c))}),!0}catch(e){return d?!0:(a.__reject(b,e),!0)}return!1},a.__subscribe=function(a,b,c,d){var e=a.__subscribers,f=e.length;e[f]=b,e[f+1]=c,e[f+2]=d},a.prototype.then=function(c,d){var e=this,f=new this.constructor(b,this);if(this.__state){var g=arguments;a.config.async(function(){a.__invokeCallback(e.__state,f,g[e.__state-1],e.__detail)})}else a.__subscribe(this,f,c,d);return f},a.prototype["catch"]=function(a){return this.then(null,a)},a.prototype.toString=function(){return"[object Promise]"},a.config={async:function(a,b){var c=n.push([a,b]);1===c&&k()}},a}();a.Promise=y;var z;!function(a){a[a.PENDING=void 0]="PENDING",a[a.SEALED=0]="SEALED",a[a.FULFILLED=1]="FULFILLED",a[a.REJECTED=2]="REJECTED"}(z||(z={})),a.IPromise=i,Hb.injectable(Pb,i,[Hc],Jf);var A=function(){function a(){this.__fileSupported=this._compat.fileSupported}return a.prototype.initialize=function(a){this.__options=c({},this._config,a)},a.prototype.execute=function(){var a=this.__options,b=a.url;if(!m(b)||p(b.trim()))return this._invalidOptions();a.url=this._browser.urlUtils(b).toString();var c=a.isCrossDomain||!1,d=!1;return c?d=!0:(this.xhr=new XMLHttpRequest,u(this.xhr.withCredentials)&&(d=this._browser.isCrossDomain(b))),d?(this.xhr=null,this.jsonpCallback=a.jsonpCallback||L(Tf),this.executeJsonp()):this._sendXhrRequest()},a.prototype.executeJsonp=function(){var a=this,c=this.__options,d=c.url;if(!m(d)||p(d.trim()))return this._invalidOptions();c.url=this._browser.urlUtils(d).toString(),t(this.jsonpCallback)&&(this.jsonpCallback=c.jsonpCallback||L(Wd));var e=new C(function(e,f){var g=a._window,h=a._document,i=h.createElement("script"),j=a.jsonpCallback,k=c.jsonpIdentifier||"callback";i.src=d+(d.indexOf("?")>-1?"&":"?")+k+"="+j;var l=g[j];g[j]=function(b){s(a.clearTimeout)&&a.clearTimeout(),h.head.removeChild(i),u(l)?O(g,j):g[j]=l,e({response:b,status:200})},h.head.appendChild(i);var m=c.timeout;r(m)&&m>0&&(a.clearTimeout=H(function(){a.clearTimeout=I(function(){f(new B({response:"Request timed out in "+m+"ms for "+d,status:408})),g[j]=b},m-1)}))});return e.initialize(this),e},a.prototype._xhrOnReadyStateChange=function(){var a=this.xhr;if(4===a.readyState){var b=a.status;if(0===b){var c=a.response;if(t(c))try{c=a.responseText}catch(d){}return p(c)?!1:!0}return b>=200&&300>b||304===b?!0:!1}},a.prototype._sendXhrRequest=function(){var a=this,b=this.xhr,c=this.__options,d=c.method,e=c.url,f=new C(function(f,h){if(b.onreadystatechange=function(){var b=a._xhrOnReadyStateChange();if(!t(b)){var d=a._formatResponse(c.responseType,b);b?f(d):h(new B(d)),a.xhr=c=null}},!m(d)){var i=a._Exception;i.warn('AjaxOptions method was not of type string. Defaulting to "GET".',i.AJAX),d="GET"}b.open(d.toUpperCase(),e,!0,c.user,c.password);var j=c.responseType;if(a.__fileSupported||""===j||"text"===j||(j=""),"json"===j)try{b.responseType=j}catch(k){b.responseType=""}b.withCredentials=c.withCredentials;var l=c.overrideMimeType,n=c.data;if(m(l)&&!p(l)&&b.overrideMimeType(l),t(n)||""===n)a.__setHeaders(),b.send();else{var o=c.transforms||[],q=o.length,s=c.contentType,u=m(s)&&!p(s);if(q>0){for(var v=0;q>v;++v)n=o[v](n,b);u&&b.setRequestHeader("Content-Type",s),a.__setHeaders(),b.send(n)}else if(g(n))if(u){var w=s.toLowerCase();-1!==w.indexOf("x-www-form-urlencoded")?(n=a.__serializeFormData(),b.setRequestHeader("Content-Type",s),a.__setHeaders(),b.send(n)):-1!==w.indexOf("multipart/form-data")?a.__fileSupported?(n=a.__appendFormData(),a.__setHeaders(),b.send(n)):a.__submitFramedFormData().then(function(a){f(a)},function(){a.xhr=null}):(n=JSON.stringify(n),b.setRequestHeader("Content-Type",s),a.__setHeaders(),b.send(n))}else a.__setHeaders(),b.send(n);else u&&b.setRequestHeader("Content-Type",s),a.__setHeaders(),b.send(n)}var x=c.timeout;r(x)&&x>0&&(a.clearTimeout=H(function(){a.clearTimeout=I(function(){h(new B({response:"Request timed out in "+x+"ms for "+c.url,status:b.status,getAllResponseHeaders:function(){return b.getAllResponseHeaders()},xhr:b})),b.onreadystatechange=null,b.abort(),a.xhr=null},x-1)}))});return f.initialize(this),f},a.prototype._invalidOptions=function(){var a=this;return new C(function(b,c){var d=a._Exception;d.warn("Attempting a request without specifying a url",d.AJAX),c(new B({response:"Attempting a request without specifying a url",status:null,getAllResponseHeaders:null,xhr:null}))})},a.prototype._formatResponse=function(a,b){var c=this.xhr,d=c.status,e=c.response;if(t(e))try{e=c.responseText}catch(f){}if(0===d&&(d=b?200:404),c.onreadystatechange=null,s(this.clearTimeout)&&this.clearTimeout(),"json"===a&&m(e))try{e=JSON.parse(e)}catch(f){}return{response:e,status:d,getAllResponseHeaders:function(){return c.getAllResponseHeaders()},xhr:c}},a.prototype.__setHeaders=function(){var a,b,c=this.__options.headers,d=Object.keys(c||{}),e=this.xhr,f=d.length;for(b=0;f>b;++b)a=d[b],e.setRequestHeader(a,c[a])},a.prototype.__serializeFormData=function(){for(var a,b,c=this.__options.data,d=Object.keys(c),e=[];d.length>0;){if(a=d.pop(),b=c[a],t(b))b="";else if(g(b)){var f=this._Exception;f.warn('Invalid form entry with key "'+a+'" and value "'+b,f.AJAX),b=JSON.stringify(b)}e.push(encodeURIComponent(a)+"="+encodeURIComponent(b))}return e.join("&").replace(/%20/g,"+")},a.prototype.__appendFormData=function(){for(var a,b,c=this.__options.data,d=new FormData,e=Object.keys(c);e.length>0;)if(a=e.pop(),b=c[a],t(b))d.append(a,"");else if(g(b))if(l(b))d.append(a,b,b.name||b.fileName||"blob");else{var f=this._Exception;f.warn('Invalid form entry with key "'+a+'" and value "'+b,f.AJAX),d.append(a,JSON.stringify(b))}else d.append(a,b);return d},a.prototype.__submitFramedFormData=function(){var a,b=this,c=this.__options,d=c.data,e=c.url,f=this._document,g=f.body,h=lb(Pb),i=f.createElement("form"),j=f.createElement("iframe"),k=L("iframe_target"),l=Object.keys(d);for(j.name=i.target=k,j.src="javascript:false;",i.enctype=i.encoding="multipart/form-data",i.action=e,i.method="POST",i.style.display="none";l.length>0;)a=l.pop(),i.insertBefore(this.__createInput(a,d[a]),null);return new h(function(a,c){b.xhr.abort=function(){j.onload=null,g.removeChild(i),g.removeChild(j),c()},j.onload=function(){var c=j.contentDocument.body.innerHTML;g.removeChild(i),g.removeChild(j),a({response:c,status:200,getAllResponseHeaders:function(){return""}}),b.xhr=j.onload=null},g.insertBefore(i,null),g.insertBefore(j,null),i.submit()})},a.prototype.__createInput=function(a,b){var c=this._document,d=this._Exception,e=c.createElement("input");if(e.type="hidden",e.name=a,t(b))e.value="";else if(g(b))if(!s(b.slice)||u(b.name)||u(b.path))d.warn('Invalid form entry with key "'+a+'" and value "'+b,d.AJAX),e.value=JSON.stringify(b);else{var f=c.querySelectorAll('input[type="file"][name="'+a+'"]'),h=f.length;if(0===h)d.warn('Could not find input[type="file"] with [name="'+a+'"]. Stringifying data instead.',d.AJAX),e.value=JSON.stringify(b);else if(1===h){e=f[0];var i=e.cloneNode(!0);e.parentNode.insertBefore(i,e)}else{for(var j,k=b.path;h-->0;)if(j=f[h],j.value===k){e=j;var l=e.cloneNode(!0);e.parentNode.insertBefore(l,e);break}-1===h&&(d.warn('Could not find input[type="file"] with [name="'+a+'"] and [value="'+b.path+'"]. Stringifying data instead.',d.AJAX),e.value=JSON.stringify(b))}}else e.value=b;return e},a._inject={_Exception:Zb,_browser:Cc,_window:Hc,_document:Tb,_config:Ob,_compat:Qb},a}();a.HttpRequest=A;var B=function(){function a(a){this.name="AjaxError",Error.apply(this),this.response=this.message=a.response,this.status=a.status,this.getAllResponseHeaders=a.getAllResponseHeaders,this.xhr=a.xhr}return a.prototype.toString=function(){var a=this.response,b=a;return g(a)&&!a.hasOwnProperty("toString")&&(b=JSON.stringify(a)),"Request failed with status: "+this.status+" and response: "+b},a}();a.AjaxError=B,B.prototype=Error.prototype;var C=function(a){function c(b,c){a.call(this,b),this._window=lb(Hc),t(c)||(this.__http=c.__http)}return __extends(c,a),c.prototype.initialize=function(a){g(a)&&t(this.__http)&&(this.__http=a)},c.prototype.cancel=function(){var a=this.__http,c=a.xhr,d=a.jsonpCallback;s(a.clearTimeout)&&a.clearTimeout(),t(c)?t(d)||(this._window[d]=b):(c.onreadystatechange=null,c.abort(),a.xhr=null),this.__subscribers=[]},c.prototype.then=function(b,c){return a.prototype.then.call(this,b,c)},c.prototype["catch"]=function(b){return a.prototype["catch"].call(this,b)},c}(y);a.AjaxPromise=C;var D=function(){function a(){this.responseType={DEFAULT:"",ARRAYBUFFER:"arraybuffer",BLOB:"blob",DOCUMENT:"document",JSON:"json",TEXT:"text"},this.contentType={ENCODED_FORM:"application/x-www-form-urlencoded;charset=utf-8",JSON:"application/json;charset=utf-8",MULTIPART_FORM:"multipart/form-data",OCTET_STREAM:"application/octet-stream;charset=utf-8",XML:"application/xml;charset=utf-8",PLAIN_TEXT:"text/plain",HTML:"text/html"}}return a.prototype.ajax=function(a){var b=lb(Nb);return b.initialize(a),b.execute()},a.prototype.jsonp=function(a){var b=lb(Nb);return b.initialize(a),b.executeJsonp()},a.prototype.json=function(a){var b=lb(Nb);return b.initialize(c({},a,{responseType:"json"})),b.execute()},a.config={url:null,method:"GET",responseType:"",transforms:[],headers:{},withCredentials:!1,timeout:null,jsonpIdentifier:"callback",contentType:"application/json;charset=utf-8"},a}();a.Http=D,Hb.injectable(Mb,D),Hb.injectable(Nb,A,null,Hf),a.IHttpConfig=j,Hb.injectable(Ob,j)}(Tg=a.async||(a.async={}));var Ug;!function(a){function b(){return f}function c(){return a.managerCache}var d={},e={},f=function(){function a(a,b){this.__uid=a,this.__options=b,this.__size=0,t(b)&&(this.__options={timeout:0}),e[a]={}}return a.create=function(b,c){var e=d[b];return t(e)&&(e=d[b]=new a(b,c)),e},a.fetch=function(a){return d[a]},a.clear=function(){for(var a=Object.keys(d),b=a.length,c=0;b>c;++c)d[a[c]].clear();d={}},a.prototype.info=function(){return{uid:this.__uid,size:this.__size,options:this.__options}},a.prototype.put=function(a,b){var c=e[this.__uid][a];e[this.__uid][a]=b,u(c)&&this.__size++;var d=this.__options.timeout;return r(d)&&d>0&&I(this.remove,d,[a],this),b},a.prototype.read=function(a){return e[this.__uid][a]},a.prototype.remove=function(a){O(e[this.__uid],a),this.__size--},a.prototype.clear=function(){e[this.__uid]={},this.__size=0},a.prototype.dispose=function(){this.clear(),O(d,this.__uid)},a}();a.Cache=f,a.ICacheFactory=b,Hb.injectable(mc,b,null,If),a.managerCache=f.create("__managerCache"),a.IManagerCache=c,Hb.injectable(nc,c);var g=function(a){function b(){a.call(this,"__templateCache")}return __extends(b,a),b.prototype.put=function(b,c){var d=this._Promise;if(a.prototype.put.call(this,b,d.resolve(c)),k(c))c=c.cloneNode(!0);else if(j(c)){var e=document.createDocumentFragment();e.appendChild(c.cloneNode(!0)),c=e}else(m(c)||t(c))&&(c=ab(c));return d.resolve(c)},b.prototype.read=function(b){var c=this,d=a.prototype.read.call(this,b);return t(d)?this._Promise.reject(null):d.then(function(a){return c.put(b,a)},function(){var a=c._Exception;return a.warn("Error retrieving template from promise.",a.TEMPLATE),null})},b._inject={_Promise:Pb,_Exception:Zb},b}(f);a.TemplateCache=g,Hb.injectable(oc,g);var h=function(){function a(a){var b=this;this._storage=a,A(function(a,c){b[c]=a},a)}return Object.defineProperty(a.prototype,"length",{get:function(){return this._storage.length},enumerable:!0,configurable:!0}),a.prototype.clear=function(){this._storage.clear()},a.prototype.getItem=function(a){return this._storage.getItem(a)},a.prototype.key=function(a){return this._storage.key(a)},a.prototype.removeItem=function(a){this._storage.removeItem(a)},a.prototype.setItem=function(a,b){this._storage.setItem(a,b),this[a]=this.getItem(a)},a}();a.BaseStorage=h;var i=function(a){function b(){a.call(this,plat.acquire(Hc).localStorage)}return __extends(b,a),b}(h);a.LocalStorage=i,Hb.injectable(Ic,i);var l=function(a){function b(){a.call(this,plat.acquire(Hc).sessionStorage)}return __extends(b,a),b}(h);a.SessionStorage=l,Hb.injectable(Jc,l)}(Ug=a.storage||(a.storage={}));var Vg,Wg={"u+":{precedence:4,associativity:"rtl",fn:function(a,b,c){return+c(a,b)}},"+":{precedence:6,associativity:"ltr",fn:function(a,b,c,d){return c(a,b)+d(a,b)}},"u-":{precedence:4,associativity:"rtl",fn:function(a,b,c){return-c(a,b)}},"-":{precedence:6,associativity:"ltr",fn:function(a,b,c,d){return c(a,b)-d(a,b)}},"*":{precedence:5,associativity:"ltr",fn:function(a,b,c,d){return c(a,b)*d(a,b)}},"/":{precedence:5,associativity:"ltr",fn:function(a,b,c,d){return c(a,b)/d(a,b)}},"%":{precedence:5,associativity:"ltr",fn:function(a,b,c,d){return c(a,b)%d(a,b)}},"?":{precedence:15,associativity:"rtl",fn:function(){return void 0}},":":{precedence:15,associativity:"rtl",fn:function(){return void 0}},">":{precedence:8,associativity:"ltr",fn:function(a,b,c,d){return c(a,b)>d(a,b)}},"<":{precedence:8,associativity:"ltr",fn:function(a,b,c,d){return c(a,b)<d(a,b)}},"!":{precedence:4,associativity:"rtl",fn:function(a,b,c){return!c(a,b)}},"~":{precedence:4,associativity:"rtl",fn:function(a,b,c){return~c(a,b)}},"&":{precedence:10,associativity:"ltr",fn:function(a,b,c,d){return c(a,b)&d(a,b)}},"|":{precedence:12,associativity:"ltr",fn:function(a,b,c,d){return c(a,b)|d(a,b)}},">>":{precedence:7,associativity:"ltr",fn:function(a,b,c,d){return c(a,b)>>d(a,b)}},"<<":{precedence:7,associativity:"ltr",fn:function(a,b,c,d){return c(a,b)<<d(a,b)}},">>>":{precedence:7,associativity:"ltr",fn:function(a,b,c,d){return c(a,b)>>>d(a,b)}},"&&":{precedence:13,associativity:"ltr",fn:function(a,b,c,d){return c(a,b)&&d(a,b)
}},"||":{precedence:14,associativity:"ltr",fn:function(a,b,c,d){return c(a,b)||d(a,b)}},"==":{precedence:9,associativity:"ltr",fn:function(a,b,c,d){return c(a,b)==d(a,b)}},"===":{precedence:9,associativity:"ltr",fn:function(a,b,c,d){return c(a,b)===d(a,b)}},"!=":{precedence:9,associativity:"ltr",fn:function(a,b,c,d){return c(a,b)!=d(a,b)}},"!==":{precedence:9,associativity:"ltr",fn:function(a,b,c,d){return c(a,b)!==d(a,b)}},">=":{precedence:8,associativity:"ltr",fn:function(a,b,c,d){return c(a,b)>=d(a,b)}},"<=":{precedence:8,associativity:"ltr",fn:function(a,b,c,d){return c(a,b)<=d(a,b)}},"=":{precedence:17,associativity:"rtl",fn:function(){var a=plat.acquire(Zb);a.fatal("Assignment operators are not supported",a.PARSE)}},"++":{precedence:3,associativity:"",fn:function(){var a=plat.acquire(Zb);a.fatal("Assignment operators are not supported",a.PARSE)}},"--":{precedence:3,associativity:"",fn:function(){var a=plat.acquire(Zb);a.fatal("Assignment operators are not supported",a.PARSE)}},"+=":{precedence:17,associativity:"rtl",fn:function(){var a=plat.acquire(Zb);a.fatal("Assignment operators are not supported",a.PARSE)}},"-=":{precedence:17,associativity:"rtl",fn:function(){var a=plat.acquire(Zb);a.fatal("Assignment operators are not supported",a.PARSE)}},"*=":{precedence:17,associativity:"rtl",fn:function(){var a=plat.acquire(Zb);a.fatal("Assignment operators are not supported",a.PARSE)}},"/=":{precedence:17,associativity:"rtl",fn:function(){var a=plat.acquire(Zb);a.fatal("Assignment operators are not supported",a.PARSE)}},"%=":{precedence:17,associativity:"rtl",fn:function(){var a=plat.acquire(Zb);a.fatal("Assignment operators are not supported",a.PARSE)}}},Xg={"()":{precedence:2,associativity:null,fn:null},"[]":{precedence:2,associativity:null,fn:null},".":{precedence:2,associativity:null,fn:null},"{}":{precedence:1,associativity:null,fn:null}},Yg={"{":{precedence:1,associativity:null,fn:null},"}":{precedence:1,associativity:null,fn:null},"[":{precedence:2,associativity:null,fn:null},"]":{precedence:2,associativity:null,fn:null},"(":{precedence:2,associativity:null,fn:null},")":{precedence:2,associativity:null,fn:null},".":{precedence:2,associativity:null,fn:null},",":{precedence:18,associativity:null,fn:null},"'":{precedence:0,associativity:null,fn:null},'"':{precedence:0,associativity:null,fn:null}},Zg={"false":!1,"true":!0,"null":null,undefined:"undefined"};!function(a){function c(a){return f._Exception=a,f}var d=["push","pop","reverse","shift","sort","splice","unshift"],f=function(){function a(){this._compat=lb(Qb),this.__identifiers={},this.__identifierHash={},this.__lengthListeners={},this.__contextObjects={},this.__isArrayFunction=!1}return a.getManager=function(b){var c,d=a.__managers,e=b.uid,f=d[e];return t(f)?(c=d[e]=new a,c.context=b,c):c=f},a.dispose=function(b,c){if(!t(b)){var d=b.uid,f=a.__controls,g=f[d]||{},h=a.__managers,i=h[d];t(i)||(i.dispose(),O(h,d));for(var j,k=Object.keys(g);k.length>0;)for(j=g[k.shift()];j.length>0;)j.shift()();O(f,d),t(b.context)||a.defineProperty(b,Jb,c===!0?e(b.context,!0):null,!0,!0,!0)}},a.removeArrayListeners=function(b,c){var d=a.arrayChangeListeners[b];t(d)||O(d,c)},a.getContext=function(a,b){if(t(a))return a;for(b=b.slice(0);b.length>0;)if(a=a[b.shift()],t(a))return a;return a},a.defineProperty=function(a,b,c,d,e,f){Object.defineProperty(a,b,{value:c,enumerable:d===!0,configurable:e===!0,writable:f===!0})},a.defineGetter=function(a,b,c,d,e){Object.defineProperty(a,b,{get:function(){return c},enumerable:d===!0,configurable:e===!0})},a.pushRemoveListener=function(b,c,d){var e,f=a.__controls,g=f[c];t(g)&&(g=f[c]={}),e=g[b],t(e)&&(e=g[b]=[]),e.push(d)},a.spliceRemoveListener=function(b,c,d){var e,f=a.__controls,g=f[c];if(!t(g)&&(e=g[b],!t(e))){var h=e.indexOf(d);-1!==h&&(e.splice(h,1),0===e.length&&O(g,b))}},a.removeIdentifier=function(b,c){for(var d,e=b.length,f=a.__controls,g=0;e>g;++g)d=f[b[g]],t(d)||O(d,c)},a.createContext=function(b,c){var d=b.context;if(!g(d)){if(!t(d)){var e=a._Exception;return void e.warn("A child control is trying to create a child context that has a parent control with a primitive type context",e.BIND)}d=b.context={}}for(var f,h,i=c.split(".");i.length>0;)f=i.shift(),h=d[f],t(h)&&(h=d[f]=r(Number(i[0]))?[]:{}),d=h;return d},a.prototype.getContext=function(a,b){return this._getContext(a.join("."),a,b)},a.prototype.observe=function(c,d){var e=this;if(p(c))return b;var f,h,i=c.split("."),j=i.pop(),k="length"===j,l=this._hasIdentifier(c),n=!t(d);if(i.length>0?(f=i.join("."),h=this._getContext(f,i,!0)):(f=j,h=this.context),!g(h))return n?(k&&(this.__lengthListeners[c]=d,a.pushRemoveListener(c,d.uid,function(){O(e.__lengthListeners,c)})),this._addObservableListener(c,d,k)):b;this.__observedIdentifier=null,this.__contextObjects[c]=h[j];var o=this.__observedIdentifier,q=!t(o),r=b;if(q&&(l=!0),n){var s=b,u=this._addObservableListener(c,d,k);q&&c!==o&&(s=this._addObservableListener(o,d,k)),r=function(){u(),s()}}var w=v(h),x=r,y=b,z=b,A=Number(j);if(w&&A>=h.length)y=this.observe(f+".length",{uid:d.uid,listener:function(a){A>=a||(y(),e._define(c,h,j))}}),r=function(){x(),y()};else if(!l)if(w&&k){var B=i.pop(),C=this.getContext(i,!1);if(this.__observedIdentifier=null,P(C,B),m(this.__observedIdentifier)&&(f=this.__observedIdentifier),n){var D=d.uid;y=this.observeArrayMutation(D,b,f,h,null),z=this.observe(f,{uid:D,listener:function(a,c){y(),y=e.observeArrayMutation(D,b,f,a,c)}})}r=function(){x(),z(),y()}}else this._define(c,h,j);return r},a.prototype.observeArrayMutation=function(a,c,e,f,g){{var h=(d.length,this._compat);h.proto,h.setProto}if(v(g)&&this._restoreArray(g),t(f))return b;var i=e.split("."),j=i.pop(),k=this.getContext(i,!1);this.__observedIdentifier=null,P(k,j),m(this.__observedIdentifier)&&(e=this.__observedIdentifier);var l=[];return s(c)&&l.push(this._pushArrayListener(a,e,c)),this._overwriteArray(e,f),function(){for(;l.length>0;)l.pop()()}},a.prototype.dispose=function(){this.context=null,this.__identifiers={},this.__identifierHash={},this.__contextObjects={}},a.prototype._pushArrayListener=function(b,c,d){var e=a.arrayChangeListeners,f=e[c];t(f)&&(f=e[c]={});var g=f[b];t(g)&&(g=f[b]=[]);var h=!1,i=function(){if(!h){h=!0,a.spliceRemoveListener(c,b,i);var j=g.indexOf(d);-1!==j&&(g.splice(j,1),0===g.length&&(O(f,b),p(f)&&O(e,c)))}};return g.push(d),a.pushRemoveListener(c,b,i),i},a.prototype._restoreArray=function(a){var b=this._compat;if(b.setProto)Object.setPrototypeOf(a,Object.create(Array.prototype));else if(b.proto)a.__proto__=Object.create(Array.prototype);else for(var c,e=d.length,f=0;e>f;++f)c=d[f],a[c]=Array.prototype[c]},a.prototype._overwriteArray=function(b,c){var e,f,g=this._compat,h=d.length;if(g.proto){var i=Object.create(Array.prototype);for(f=0;h>f;++f)e=d[f],i[e]=this._overwriteArrayFunction(b,e);return void(g.setProto?Object.setPrototypeOf(c,i):c.__proto__=i)}for(f=0;h>f;++f)e=d[f],a.defineProperty(c,e,this._overwriteArrayFunction(b,e),!1,!0,!0)},a.prototype._getContext=function(a,b,c){var d=this.__contextObjects[a];return t(d)&&(d=c===!0?this.__contextObjects[a]=this._observeImmediateContext(b,a):this._getImmediateContext(b)),d},a.prototype._getImmediateContext=function(a){for(var b=this.context;a.length>0&&(b=b[a.shift()],!t(b)););return b},a.prototype._observeImmediateContext=function(a,b){return t(this.__identifiers[b])&&this.observe(b,null),this._getImmediateContext(a)},a.prototype._getValues=function(a,b,c){for(var d,e=!0,f=!0;a.length>1;)if(d=a.shift(),e&&(b=b[d],t(b)&&(e=!1)),f&&(c=c[d],t(c)&&(f=!1)),!e&&!f)return null;d=a[0];var g,h;return t(b)||(g=b[d]),t(c)||(h=c[d]),{newValue:g,oldValue:h}},a.prototype._notifyChildProperties=function(c,d,e,f){var h=this;f=f||Object.keys(this.__identifierHash[c]||{});for(var i,j,k,l,n,o,q,r,s,u,w,x=f.length,y={},z=".",A="length",B=c.length+1,C=0;x>C;++C){if(i=f[C],j=i.slice(B),l=j.split(z),o=l.pop(),q=o===A,k=l.join(z),p(k)){if(r=d,s=e,u=t(r)?void 0:r[o],w=t(s)?void 0:s[o],q&&!v(s)&&v(r)){var D=this.__lengthListeners[i];if(!t(D)){var E=D.uid,F=c.split(z),G=F.pop(),H=F.join(z),I=this._getContext(H,F,!1);this.__observedIdentifier=null,P(I,G),m(this.__observedIdentifier)&&(H=this.__observedIdentifier);var J=this.observeArrayMutation(E,b,H,r,null);this.observe(H,{uid:E,listener:function(a,c){J(),J=h.observeArrayMutation(E,b,H,a,c)}}),O(this.__lengthListeners,i)}}}else{if(n=y[k],t(n)&&(n=y[k]=this._getValues(l,d,e),t(n))){this._execute(i,null,null);continue}r=n.newValue,s=n.oldValue,u=t(r)?void 0:r[o],w=t(s)?void 0:s[o]}y[j]={newValue:u,oldValue:w},g(r)&&(!v(r)||r.length>o)&&this._define(i,r,o),t(w)||v(s)&&q||a.defineProperty(s,o,w,!0,!0,!0),this._execute(i,u,w)}y=null},a.prototype._addObservableListener=function(b,c,d){var e=this;if(d===!0){var f=b.split(".");f.pop();var h=f.pop(),i=this.getContext(f,!1);g(i)&&(this.__observedIdentifier=null,P(i,h),m(this.__observedIdentifier)&&(b=this.__observedIdentifier+(d===!0?".length":"")))}this.__add(b,c);var j=c.uid,k=function(){a.spliceRemoveListener(b,j,k),e._removeCallback(b,c)};return a.pushRemoveListener(b,j,k),k},a.prototype._define=function(a,b,c){g(b[c])?this.__defineObject(a,b,c):this.__definePrimitive(a,b,c)},a.prototype._overwriteArrayFunction=function(b,c){var d=a.arrayChangeListeners[b]||{},e=this;return function(){for(var a=[],f=0;f<arguments.length;f++)a[f-0]=arguments[f];var g,h,i,j,k,l,m=this.length,n=this.slice(0),o="unshift"===c,p="shift"===c,q="splice"===c,r=p||o||q,s="sort"===c||"reverse"===c;r?(e.__isArrayFunction=!0,g=Array.prototype[c].apply(this,a),e.__isArrayFunction=!1,k=this.length,j=0,p?(i=0,l=m>0?[g]:[]):o?(i=a.length,l=[]):(i=a.length-2,j=a[0],l=g)):(g=Array.prototype[c].apply(this,a),k=this.length,s?h=n:"push"===c?(i=a.length,j=m,l=[]):"pop"===c&&(i=0,j=k,l=m>0?[g]:[]));var t,u,v,w,x=Object.keys(d),y=x.length;for(v=0;y>v;++v)for(t=d[x[v]],u=t.length,w=0;u>w;++w)t[w]([{object:this,type:c,index:j,removed:l,addedCount:i,oldArray:h}]);return r?e._notifyChildProperties(b,this,n):k!==m&&e._execute(b+".length",k,m),g}},a.prototype._removeCallback=function(a,b){var c=this.__identifiers[a];if(!t(c)){var d=c.indexOf(b);-1!==d&&(c.splice(d,1),0===c.length&&O(this.__contextObjects,a))}},a.prototype._hasIdentifier=function(a){return!p(this.__identifiers[a])},a.prototype._execute=function(a,b,c){var d=this.__identifiers[a];if(u(b)?O(this.__contextObjects,a):this.__contextObjects[a]=b,!t(d))for(var e=d.slice(0),f=e.length,g=0;f>g;++g)e[g].listener(b,c)},a.prototype.__defineObject=function(b,c,d){var e=this,f=c[d];Object.defineProperty(c,d,{configurable:!0,enumerable:!0,get:function(){return e.__observedIdentifier=b,f},set:function(h){if(f!==h){var i=f;if(f=h,!e.__isArrayFunction){var j,k=e.__identifierHash[b],l=!1;g(k)&&(j=Object.keys(k),l=j.length>0),e._execute(b,f,i),l?(e._notifyChildProperties(b,f,i,j),g(f)||e.__definePrimitive(b,c,d)):p(e.__identifiers[b])?a.defineProperty(c,d,f,!0,!0,!0):g(f)||e.__definePrimitive(b,c,d)}}}})},a.prototype.__definePrimitive=function(b,c,d){var e=this,f=c[d],h=!t(f);v(c)&&"length"===d||Object.defineProperty(c,d,{configurable:!0,enumerable:!0,get:function(){return e.__observedIdentifier=b,f},set:function(i){if(f!==i){var j=f;if(f=i,!e.__isArrayFunction||!v(c)){var k,l=e.__identifierHash[b],m=!1;g(l)&&(k=Object.keys(l),m=k.length>0),e._execute(b,i,j),!m&&p(e.__identifiers[b])?a.defineProperty(c,d,f,!0,!0,!0):g(f)?(e.__defineObject(b,c,d),m&&e._notifyChildProperties(b,i,j,k)):h||(e.__definePrimitive(b,c,d),h=!0)}}}})},a.prototype.__add=function(a,b){var c=this.__identifiers[a],d=b.priority,e=!1;if(t(c)&&(c=this.__identifiers[a]=[]),r(d)){for(var f=c.length,g=0;f>g;++g)if(d>c[g].priority){c.splice(g,0,b),e=!0;break}}else b.priority=-1;e||c.push(b),this.__addHashValues(a)},a.prototype.__addHashValues=function(a){var b=this.__identifierHash;if(!g(b[a])){b[a]={};for(var c,d,e=".",f=a;-1!==(c=f.lastIndexOf(e));)f=f.slice(0,c),d=b[f],t(d)?(d=b[f]={},f!==a&&(d[a]=!0)):f===a||d[a]||(d[a]=!0)}},a.arrayChangeListeners={},a.__managers={},a.__controls={},a}();a.ContextManager=f,a.IContextManagerStatic=c,Hb.injectable(cc,c,null,Ff),Hb.injectable(dc,f,null,Hf)}(Vg=a.observable||(a.observable={}));var $g;!function(a){function b(){return f}function c(a,b,c,d,e){return g._Exception=a,g._compat=b,g._document=c,g._window=d,g._dom=e,g}function d(a){return h._EventManager=a,h}var e=function(){function a(){this.defaultPrevented=!1,this.stopped=!1}return a.prototype.initialize=function(a,b,c){this.name=a,this.direction=c||this._EventManager.UP,this.sender=b},a.prototype.preventDefault=function(){this.defaultPrevented||this._ContextManager.defineGetter(this,"defaultPrevented",!0)},a.prototype.stopPropagation=function(){this.direction===this._EventManager.UP&&(this.stopped=!0,this._EventManager.propagatingEvents[this.name]=!1)},a._inject={_EventManager:Wb,_ContextManager:cc},a}();a.DispatchEvent=e,Hb.injectable(Ub,e,null,Hf);var f=function(a){function b(){a.apply(this,arguments)}return __extends(b,a),b.dispatch=function(a,b){var c=lb(Yb);return c.initialize(a,b),g.sendEvent(c),c},b.prototype.initialize=function(b,c){a.prototype.initialize.call(this,b,c,this._EventManager.DIRECT)},b}(e);a.LifecycleEvent=f,a.ILifecycleEventStatic=b,Hb.injectable(Xb,b,null,Ff),Hb.injectable(Yb,f,null,Hf);var g=function(){function a(){}return a.initialize=function(){if(!a.__initialized){a.__initialized=!0;for(var b,c=a.__lifecycleEventListeners,d=c.length,e=a._compat,g=a._document,h=a._window,i=a._dom,j=f.dispatch;c.length>0;)b=c.pop(),g.removeEventListener(b.name,b.value,!1);if(e.cordova){var k,l=[se,te,ue],m=e.winJs;d=l.length;for(var n=0;n<l.length;++n)k=l[n],c.push({name:k,value:function(b){return function(){j(b,a)}}(k)}),i.addEventListener(g,k,c[n].value,!1);c.push({name:De,value:function(){j(re,a)}}),i.addEventListener(g,De,c[c.length-1].value,!1),c.push({name:Ee,value:function(){j(qe,a)}}),i.addEventListener(g,Ee,c[c.length-1].value,!1),c.push({name:Fe,value:function(){return m||j(Fe,a),!0}}),i.addEventListener(g,Fe,c[c.length-1].value,!1),m&&(c.push({name:Ge,value:function(){return j(Fe,a),!0}}),h.WinJS.Application.addEventListener(Ge,c[c.length-1].value,!1))}else{if(e.amd)return;i.addEventListener(h,"load",function(){j(qe,a)})}}},a.dispose=function(b){O(a.__eventsListeners,b)},a.on=function(b,c,d,e){var f=a.__eventsListeners[b];t(f)&&(f=a.__eventsListeners[b]={listeners:{},context:e});var g=f.listeners[c];return v(g)||(g=f.listeners[c]=[]),g.push(d),function(){var a=g.indexOf(d);-1!==a&&g.splice(a,1)}},a.dispatch=function(b,c,d,e){var f=lb(Ub);return f.initialize(b,c,d),a.sendEvent(f,e),f},a.hasDirection=function(b){return b===a.UP||b===a.DOWN||b===a.DIRECT},a.sendEvent=function(b,c){var d=b.name,e=b.direction;switch(c=c||[],a.propagatingEvents[d]=!0,c=c||[],e){case a.UP:a._dispatchUp(b,c);break;case a.DOWN:a._dispatchDown(b,c);break;case a.DIRECT:a._dispatchDirect(b,c)}O(a.propagatingEvents,d)},a._dispatchUp=function(b,c){for(var d=b.name,e=b.sender;!t(e)&&a.propagatingEvents[d];)t(e.uid)?e=e.parent:(a.__executeEvent(e.uid,b,c),e=e.parent)},a._dispatchDown=function(b,c){var d,e=[],f=b.name;for(e.push(b.sender);e.length&&a.propagatingEvents[f];)d=e.pop(),t(d.uid)||(a.__executeEvent(d.uid,b,c),t(d.controls)||(e=e.concat(d.controls)))},a._dispatchDirect=function(b,c){for(var d,e=Object.keys(a.__eventsListeners),f=e.length,g=b.name,h=0;f>h&&a.propagatingEvents[g];++h)d=a.__eventsListeners[e[h]],t(d)||t(d.listeners[g])||a.__callListeners(d.context,b,d.listeners[g],c)},a.__executeEvent=function(b,c,d){var e=a.__eventsListeners[b];if(!t(e)){var f=e.context,g=e.listeners[c.name];t(g)||a.__callListeners(f,c,g,d)}},a.__callListeners=function(b,c,d,e){var f=c.name,g=d.length,h=-1;for(e=[c].concat(e);++h<g&&a.propagatingEvents[f];)try{d[h].apply(b,e)}catch(i){var j=a._Exception;j.warn(i,j.EVENT)}},a.UP="up",a.DOWN="down",a.DIRECT="direct",a.propagatingEvents={},a.__eventsListeners={},a.__lifecycleEventListeners=[],a.__initialized=!1,a}();a.EventManager=g,a.IEventManagerStatic=c,Hb.injectable(Wb,c,[Zb,Qb,Tb,Hc,tc],Ff);var h=function(a){function b(){a.apply(this,arguments)}return __extends(b,a),b.dispatch=function(a,c,d){var e=lb(b);return e.initialize(a,c,null,d),b._EventManager.sendEvent(e),e},b.prototype.initialize=function(b,c,d,e){a.prototype.initialize.call(this,b,c,this._EventManager.DIRECT),this.error=e},b}(e);a.ErrorEvent=h,a.IErrorEventStatic=d,Hb.injectable(Vb,d,[Wb],Ff)}($g=a.events||(a.events={}));var _g=function(){function a(){this._Exception=a._Exception,this.uid=L(Wc),this.priority=0,this.dom=a._dom,this.utils=lb(Bc)}return a.getRootControl=function(b){if(t(b))return b;if(!t(b.root))return b.root;for(;!t(b.parent)&&!b.hasOwnContext;){if(!t(b.root))return b.root;b=b.parent}if(!b.hasOwnContext&&g(b.context)){var c=a._Exception;c.warn("Root control: "+b.type+" found that sets its context to an Object but does not set the hasOwnContext flag to true. Please set the flag if the control intends to use its own context.",c.CONTEXT)}return b},a.load=function(b){var c=a._Promise;if(t(b))return c.resolve();var d=b;if(m(d.absoluteContextPath)){if(s(d.contextChanged)){var e=a._ContextManager.getManager(d.root);e.observe(d.absoluteContextPath,{uid:b.uid,priority:Cf,listener:function(a,c){bh.TemplateControl.contextChanged(b,a,c)}}),s(d.zCC__plat)&&(d.zCC__plat(),O(d,"zCC__plat"))}var f=d.element;j(f)&&s(f.removeAttribute)&&f.removeAttribute(Ie)}return s(b.loaded)?c.resolve(b.loaded()):c.resolve()},a.dispose=function(b){var c=b;if(!t(c)){if(!u(c.templateControl))return void ah.dispose(c);if(c.hasOwnContext)return void bh.ViewControl.dispose(c);if(c.controls)return void bh.TemplateControl.dispose(c);if(s(b.dispose)&&b.dispose(),a.removeEventListeners(b),a._ContextManager.dispose(b),b.element=null,a.removeParent(b),b.__injectable__type===Ff){var d=Dg[b.type];Hb.control(b.type,b.constructor,d.dependencies,!0)}}},a.removeParent=function(a){if(!t(a)){var b=a.parent;if(!t(b)){var c=b.controls||[],d=c.indexOf(a);-1!==d&&c.splice(d,1),a.parent=null}}},a.removeEventListeners=function(b){if(!t(b)){var c=a.__eventListeners,d=b.uid,e=c[d];if(v(e)){for(var f=e.length;f-->0;)e[f]();O(c,d)}}},a.getInstance=function(){return new a},a.__addRemoveListener=function(b,c){var d=a.__eventListeners;return v(d[b])?void d[b].push(c):void(d[b]=[c])},a.__spliceRemoveListener=function(b,c){var d=a.__eventListeners,e=d[b];if(v(e)){var f=e.indexOf(c);if(-1===f)return;e.splice(f,1)}},a.__getControls=function(b,c,d){var e,f=[],g=a.getRootControl(b);t(g)||g[c]!==d||f.push(g);var h=g.controls;if(t(h))return f;for(var i=[].concat(h);i.length>0;)e=i.shift(),e[c]===d&&f.push(e),t(e.controls)||(i=i.concat(e.controls));return f},a.prototype.initialize=function(){},a.prototype.loaded=function(){},a.prototype.getControlsByName=function(b){return a.__getControls(this,"name",b)},a.prototype.getControlsByType=function(b){return m(b)?a.__getControls(this,"type",b):a.__getControls(this,"constructor",b)},a.prototype.addEventListener=function(c,d,e,f){if(!s(e)){var g=this._Exception;return g.warn('"Control.addEventListener" must take a function as the third argument.',g.EVENT),b}e=e.bind(this);var h=this.dom.addEventListener(c,d,e,f),i=this.uid;return a.__addRemoveListener(i,h),function(){h(),a.__spliceRemoveListener(i,h)}},a.prototype.observe=function(c,d){var e=this,f=g(this.context)?this:this.parent,h=a.getRootControl(f);if(t(f))return b;var i;if(p(d))i=f.absoluteContextPath;else if(m(d)){var j=(a._parser||lb($b)).parse(d),k=j.identifiers[0],l=k.split("."),n=l.shift().slice(1),o=l.length>0?"."+l.join("."):"";i=n===fg?Jb+o:n===hg?f.absoluteContextPath+o:f.absoluteContextPath+"."+k}else i=f.absoluteContextPath+"."+d;var q=a._ContextManager||lb(cc),r=q.getManager(h);return r.observe(i,{listener:function(a,b){c.call(e,a,b,d)},uid:this.uid})},a.prototype.observeArray=function(c,d){var e=g(this.context)?this:this.parent,f=e.context;if(t(e)||!g(f))return b;var h,i;if(p(d))h=f,i=e.absoluteContextPath;else if(m(d)){var j=(a._parser||lb($b)).parse(d);h=j.evaluate(f),i=e.absoluteContextPath+"."+j.identifiers[0]}else h=f[d],i=e.absoluteContextPath+"."+d;if(!v(h))return b;var k=s(c);if(!k)return b;c=c.bind(this);var l=a._ContextManager||lb(cc),n=l.getManager(a.getRootControl(e)),o=this.uid,q=function(a){c(a,d)},r=n.observeArrayMutation(o,q,i,h,null),u=n.observe(i,{listener:function(a,b){r(),r=n.observeArrayMutation(o,q,i,a,b)},uid:o});return function(){r(),u()}},a.prototype.observeExpression=function(c,d){var e=this;if(p(d))return b;if(m(d))d=(a._parser||lb($b)).parse(d);else if(!s(d.evaluate))return b;var f=t(this.resources)?this.parent:this;if(t(f)||!m(f.absoluteContextPath))return b;var g,h,i,j,k=d.aliases,l=k.length,n={},o=a._ContextManager||lb(cc),q=o.getManager,r=bh.TemplateControl,u=r.findResource,v=r.evaluateExpression;for(j=0;l>j;++j)g=k[j],h=u(f,g),t(h)||(i=h.resource.type,(i===_f||i===dg)&&(n[g]=q(h.control)));var w,x,y=d.identifiers,z=q(a.getRootControl(f)),A=[],B=f.absoluteContextPath,C=B+".",D={};for(l=y.length,j=0;l>j;++j)w=y[j],A=w.split("."),x=A[0],"@"!==w[0]?D[C+w]=z:(g=x.slice(1),g===hg?D[B+w.replace(x,"")]=z:g===fg?D[w.replace(x,"context")]=z:(w=w.replace(x,"resources."+g+".value"),t(n[g])||(D[w]=n[g])));y=Object.keys(D),l=y.length;var E=v(d,f),F=[],G=this.uid;for(j=0;l>j;++j)w=y[j],F.push(D[w].observe(w,{uid:G,listener:function(){var a=v(d,f);c.call(e,a,E,d.expression),E=a}}));return function(){for(var a=F.length,b=0;a>b;++b)F[b]()}},a.prototype.evaluateExpression=function(a,b){return bh.TemplateControl.evaluateExpression(a,this.parent,b)},a.prototype.findProperty=function(b){for(var c,d=this,e=(a._parser||lb($b)).parse(b);!t(d);){if(c=e.evaluate(d),!t(c))return{expresssion:e,control:d,value:c};d=d.parent}},a.prototype.dispatchEvent=function(b,c){for(var d=[],e=2;e<arguments.length;e++)d[e-2]=arguments[e];var f=a._EventManager||lb(Wb);f.hasDirection(c)||(u(c)||d.unshift(c),c=f.UP);var g=this;t(g.templateControl)||(g=g.templateControl),f.dispatch(b,g,c,d)},a.prototype.on=function(b,c){var d=a._EventManager||lb(Wb);return d.on(this.uid,b,c,this)},a.prototype.dispose=function(){},a.__eventListeners={},a}();a.Control=_g,a.IControlFactory=vb,Hb.injectable(Rb,vb,[$b,cc,Wb,Pb,tc,Zb],If);var ah=function(a){function b(){a.apply(this,arguments),this.templateControl=null}return __extends(b,a),b.dispose=function(a){O(a,"templateControl"),_g.dispose(a)},b.getInstance=function(){return new b},b}(_g);a.AttributeControl=ah,a.IAttributeControlFactory=wb,Hb.injectable(Sb,wb,null,If);var bh;!function(a){function d(a,b,c,d,e,f,g,h){return q._ResourcesFactory=a,q._BindableTemplatesFactory=b,q._managerCache=c,q._templateCache=d,q._parser=e,q._http=f,q._Promise=g,q._Exception=h,q}function f(){return B}function h(){return C}function l(a,b,c){D._ContextManager=a,D._regex=b,D._Exception=c;var d={},e={};return d[gg]=d[hg]=d[eg]=d[fg]=!0,e[ag]=e[bg]=e[_f]=e[cg]=e[dg]=!0,D.__controlResources=d,D.__resourceTypes=e,D}function n(){return E.config}var q=function(a){function b(){a.apply(this,arguments),this.priority=100,this.context=null,this.absoluteContextPath=null,this.hasOwnContext=!1,this.replaceWith="any"}return __extends(b,a),b.evaluateExpression=function(a,c,d){if(p(a))return a;if(m(a))a=b._parser.parse(a);else if(!s(a.evaluate))return a;if(t(c))return a.evaluate(null,d);if(!(a.aliases.length>0&&(d=b.getResources(c,a.aliases,d),p(d))))return a.evaluate(c.context,d)},b.getResources=function(a,c,d){if(t(a))return{};var e,f,g,h=c.length,i=b.__resourceCache[a.uid];t(i)&&(i=b.__resourceCache[a.uid]={}),d=d||{};for(var j=0;h>j;++j)if(e=c[j],"@"===e[0]&&(e=e.slice(1)),e!==hg)if(e!==fg){if(t(d[e])){if(t(i[e]))g=b.findResource(a,e);else{var k=i[e].control,l=k.resources;g=t(l)?b.findResource(a,e):{control:k,resource:l[e]}}if(t(g)){var m=b._Exception;m.warn("Resource alias: "+e+" is not defined.",m.CONTEXT)}else i[e]=g,f=g.resource,d[e]=t(f)?f:f.value}}else d[e]=_g.getRootControl(a).context;else d[e]=a.context;return d},b.findResource=function(a,b){var c;if(!t(a)&&!t(a.resources)&&m(b)&&!p(b)){"@"===b[0]&&(b=b.slice(1));var d=b===fg;if(d||b===hg||b===gg){if(d&&(a=_g.getRootControl(a)),c=(a.resources||{})[b],t(c))return;return{resource:c,control:a}}for(;!t(a);){if(c=(a.resources||{})[b],!t(c))return{resource:c,control:a};a=a.parent}}},b.dispose=function(a){if(!t(a)){var c=a.uid,d=a.controls,e=d&&d.slice(0),f=_g._ContextManager,g=f.defineProperty;if(!t(e))for(var h=e.length-1,i=h;i>=0;--i)_g.dispose(e[i]);if(s(a.dispose)&&a.dispose(),_g.removeEventListeners(a),b.removeElement(a),b._ResourcesFactory.dispose(a),b._BindableTemplatesFactory.dispose(a),O(b.__resourceCache,a.uid),f.dispose(a),$g.EventManager.dispose(a.uid),b._managerCache.remove(c),_g.removeParent(a),g(a,Yf,null,!0,!0,!0),a.attributes=null,a.bindableTemplates=null,a.controls=[],a.root=null,a.innerTemplate=null,a.__injectable__type===Ff){var j=Dg[a.type];Hb.control(a.type,a.constructor,j.dependencies,!0)}}},b.loadControl=function(a){for(var c,d=a.controls,e=d.length,f=0;e>f;++f)c=d[f],t(c.controls)?c.loaded():b.loadControl(c);a.loaded()},b.contextChanged=function(a,c,d){a.context=c,b.setContextResources(a),s(a.contextChanged)&&a.contextChanged(c,d)},b.setContextResources=function(a){var c=a.context;return t(a.resources)&&(a.resources=b._ResourcesFactory.getInstance(),a.resources.initialize(a)),a.hasOwnContext&&(t(a.resources.rootContext)?a.resources.add({root:{type:_f,value:c}}):a.resources.rootContext.value=c),t(a.resources.context)?void a.resources.add({context:{type:_f,value:c}}):void(a.resources.context.value=c)},b.removeElement=function(a){if(!t(a)){var b,c=a.element;return null===a.replaceWith||""===a.replaceWith||k(c)?(cb(a.startNode,a.endNode),void(a.elementNodes=a.startNode=a.endNode=null)):void(t(c)||(b=c.parentNode,t(b)||b.removeChild(c),a.element=null))}},b.setAbsoluteContextPath=function(a,b){_g._ContextManager.defineGetter(a,"absoluteContextPath",b,!1,!0)},b.determineTemplate=function(a,c){var d=b._templateCache,e=a.dom,f=b._Promise;if(t(c)){if(t(a.templateUrl)){if(t(a.templateString))return f.reject(null);var g=a.type;return d.read(g)["catch"](function(b){return t(b)&&(b=a.templateString),d.put(g,b)})}c=a.templateUrl}else;return e.getTemplate(c)},b.detach=function(a){if(!t(a)&&!t(a.controls)){for(var c=a.controls.slice(0),d=c.length,e=0;d>e;++e)_g.dispose(c[e]);_g.removeEventListeners(a),b.removeElement(a),b._ResourcesFactory.dispose(a,!0),O(b.__resourceCache,a.uid),_g._ContextManager.dispose(a,!0),$g.EventManager.dispose(a.uid),b._managerCache.remove(a.uid),_g.removeParent(a),a.controls=[],a.attributes=null}},b.getInstance=function(){return new b},b.prototype.contextChanged=function(){},b.prototype.setTemplate=function(){},b.prototype.getResources=function(a,c){return b.getResources(this,a,c)},b.prototype.findResource=function(a){return b.findResource(this,a)},b.prototype.evaluateExpression=function(a,c){return b.evaluateExpression(a,this,c)},b.__resourceCache={},b}(_g);a.TemplateControl=q,a.ITemplateControlFactory=d,Hb.injectable(zc,d,[xc,sc,nc,oc,$b,Mb,Pb,Zb],If),Hb.injectable(Ac,q,null,Hf);var x=function(a){function b(){a.apply(this,arguments),this._listeners=[]}return __extends(b,a),b.prototype.onInput=function(a){var b=this._listeners;return b.push(a),function(){var c=b.indexOf(a);-1!==c&&b.splice(c,1)}},b.prototype.observeProperties=function(){},b.prototype.inputChanged=function(a,b){if(a!==b)for(var c=this._listeners,d=c.length,e=0;d>e;++e)c[e](a,b)},b.prototype.dispose=function(){this._listeners=[]},b}(q);a.BindControl=x;var y=function(a){function b(){a.apply(this,arguments),this.hasOwnContext=!0}return __extends(b,a),b.dispose=function(a){q.dispose(a)},b.getInstance=function(){return new b},b.prototype.canNavigateFrom=function(){},b.prototype.canNavigateTo=function(){},b.prototype.navigatingFrom=function(){},b.prototype.navigatedTo=function(){},b}(q);a.ViewControl=y;var z=function(){function a(){this._domEvents=lb(uc)}return a.prototype.addEventListener=function(a,b,c,d){return this._domEvents.addEventListener(a,b,c,d)},a.prototype.appendChildren=function(a,b){return T(a,b)},a.prototype.cloneChildren=function(a,b){return T(a,b,!0)},a.prototype.clearNode=function(a){return U(a)},a.prototype.clearNodeBlock=function(a,b){return V(a,b)},a.prototype.setInnerHtml=function(a,b){return Y(a,b)},a.prototype.insertBefore=function(a,b,c){return Z(a,b,c)},a.prototype.replace=function(a){return $(a)},a.prototype.replaceWith=function(a,b){return _(a,b)},a.prototype.serializeHtml=function(a){return ab(a)},a.prototype.removeBetween=function(a,b){return bb(a,b)},a.prototype.removeAll=function(a,b){return cb(a,b)},a.prototype.addClass=function(a,b){return fb(a,b)},a.prototype.removeClass=function(a,b){return gb(a,b)},a.prototype.toggleClass=function(a,b){return hb(a,b)},a.prototype.replaceClass=function(a,b,c){return ib(a,b,c)},a.prototype.hasClass=function(a,b){return jb(a,b)},a.prototype.getTemplate=function(a){return kb(a)},a._inject={_domEvents:uc},a}();a.Dom=z,Hb.injectable(tc,z);var B=function(){function a(){this._ResourcesFactory=lb(xc),this._ControlFactory=lb(Rb),this._TemplateControlFactory=lb(zc),this._ContextManager=lb(cc),this._Promise=lb(Pb),this._managerCache=lb(nc),this._document=lb(Tb),this._ElementManagerFactory=lb(hc),this._BindableTemplatesFactory=lb(sc),this._Exception=lb(Zb),this.templates={},this.cache={},this.__compiledControls=[]}return a.create=function(b,c){var d=new a;return d.control=b,t(c)||(d.templates=c.templates,d.cache=c.cache),d},a.dispose=function(a){if(!t(a)){var b=a.bindableTemplates;!t(b)&&s(b.dispose)&&b.dispose()}},a.isBoundControl=function(a){if(t(a))return!1;var b=a.parent;return t(b)?!1:0===a.type.indexOf(b.type+Mf)},a.prototype.bind=function(a,b,c){return this._bind(a,b,c)},a.prototype.add=function(a,b){if(!t(b)){if(k(b))return void this._compile(a,b);var c=this._document.createDocumentFragment();if(j(b))c.appendChild(b);else{if(!w(b))return;T(b,c)}this._compile(a,c)}},a.prototype.replace=function(b,c,d,e){var f=this.control.controls[b],g=this._Exception;if(!a.isBoundControl(f))return g.warn("The child control at the specified index: "+b+" is not a bound control and thus cannot be replaced by BindableTemplates.",g.BIND),this._Promise.resolve([]);var h=f.endNode;return j(h)&&j(h.parentNode)?this._bind(c,d,e,b):(g.warn("The child control at the specified index: "+b+" had either no placeholding comment nodes or its comment nodes had no parent and thus cannot be replaced by BindableTemplates.",g.BIND),this._Promise.resolve([]))},a.prototype.dispose=function(){for(var a=this._TemplateControlFactory.dispose,b=this.__compiledControls,c=b.length,d=0;c>d;++d)a(b[d]);this.__compiledControls=[],this.control=null,this.cache={},this.templates={}},a.prototype._bind=function(a,b,c,d){var e=this,f=this.templates[a],g=this._Exception,h=t(d);return t(f)?void g.fatal("Cannot bind template, no template stored with key: "+a,g.TEMPLATE):t(b)||r(b)||m(b)?(f=f.then(function(d){var f=d.cloneNode(!0),g=e._createBoundControl(a,f,b,c),i=e._createNodeMap(g,f,b);return h&&e.control.controls.push(g),e._bindTemplate(a,i)}),h?f.then(null,function(a){return H(function(){g.fatal(a,g.BIND)}),e._document.createDocumentFragment()}):f.then(function(a){var b=Array.prototype.slice.call(a.childNodes),c=e.control.controls[d],f=c.endNode,g=f.parentNode,h=f.nextSibling;return e._TemplateControlFactory.dispose(c),g.insertBefore(a,h),b}).then(null,function(a){return H(function(){g.fatal(a,g.BIND)}),e._document.createDocumentFragment()})):void g.warn("Cannot bind template with relativeIdentifier: "+b+". Identifier must be either a string or number",g.BIND)},a.prototype._bindTemplate=function(a,c){var d=this,e=c.uiControlNode.control,f=!1,g=s(e.dispose)?e.dispose.bind(e):b;return e.dispose=function(){f=!0,g(),e.dispose=g},this._bindNodeMap(a,c).then(function(){var a=d._document,b=c.element;return f?a.createDocumentFragment():(e.startNode=b.insertBefore(a.createComment(e.type+Of),b.firstChild),e.endNode=b.insertBefore(a.createComment(e.type+Pf),null),b)},function(a){return H(function(){var b=d._Exception;b.fatal(a,b.COMPILE)}),null
})},a.prototype._bindNodeMap=function(a,b){var c=this.cache[a],d=b.uiControlNode.control,e=b.element,f=this._managerCache;return c.clone(e,f.read(this.control.uid),b),f.read(d.uid).bindAndLoad()},a.prototype._compile=function(a,b){var c=this._createBoundControl(a+Lf,b),d=this._createNodeMap(c,b);this.__compiledControls.push(c),this._compileNodeMap(c,d,a)},a.prototype._compileNodeMap=function(a,b,c){var d=this,e=this._ElementManagerFactory.getInstance(),f=[];e.isClone=!0,e.initialize(b,null),e.setUiControlTemplate(),this.cache[c]=e,f.push(e.fulfillTemplate()),this.templates[c]=this._Promise.all(f).then(function(){var c,e,f=b.element,g=f.cloneNode(!0),h=d._document;return c=a.startNode=h.createComment(a.type+Of),e=a.endNode=h.createComment(a.type+Pf),f.insertBefore(c,f.firstChild),f.insertBefore(e,null),g})},a.prototype._createNodeMap=function(a,b,c){return{element:b,attributes:{},nodes:[],childContext:c,uiControlNode:{control:a,nodeName:a.type,expressions:[],injector:null}}},a.prototype._createBoundControl=function(a,b,c,d){var e=this._TemplateControlFactory,f=e.getInstance(),h=this._ResourcesFactory,i=this.control,j=this.cache[a],k=g(j),l=h.getInstance();if(k){var m=j.getUiControl();l.initialize(f,m.resources),l.add(d)}else l.initialize(f,d);if(f.resources=l,h.addControlResources(f),f.bindableTemplates=this._BindableTemplatesFactory.create(f,i.bindableTemplates),f.parent=i,f.controls=[],f.element=b,f.type=i.type+Mf+a,f.root=this._ControlFactory.getRootControl(f),k){var n=this._ContextManager.getManager(f.root);f.absoluteContextPath=i.absoluteContextPath||Vd,t(c)||(f.absoluteContextPath+="."+c),f.context=n.getContext(f.absoluteContextPath.split("."),!1)}return f},a}();a.BindableTemplates=B,a.IBindableTemplatesFactory=f,Hb.injectable(sc,f,null,If);var C=function(){function a(){this.__listeners={}}return a.getInstance=function(){return new a},a.prototype.initialize=function(a,b){this.__control=a;for(var c,d=Object.keys(b),e=this.__listeners,f=d.length,g=0;f>g;++g)c=d[g],this[c]=b[c],e[c]=[]},a.prototype.observe=function(a,c){var d=this.__listeners[M(c)];return t(d)?b:(a=a.bind(this.__control),d.push(a),function(){var b=d.indexOf(a);-1!==b&&d.splice(b,1)})},a.prototype._attributeChanged=function(a,b,c){for(var d=this.__listeners[M(a)],e=d.length,f=0;e>f;++f)d[f](b,c)},a}();a.Attributes=C,a.IAttributesFactory=h,Hb.injectable(rc,C,null,Hf),Hb.injectable(qc,h,null,If);var D=function(){function a(){this.__resources={},this.__bound=!1}return a.create=function(c,d){if(t(d))return d;var e;switch(d.type.toLowerCase()){case ag:var f=Gg[d.value];t(f)||(d.value=f.inject());break;case _f:a._observeResource(c,d);break;case bg:e=d.value,m(e)&&(d.value=c.evaluateExpression(e));break;case dg:break;case cg:if(e=d.value,m(e))if(e=c[e],s(e))d.value=e.bind(c);else{var g=a._Exception;g.warn('Attempted to create a "function" type Resource with a function not found on your control.',g.BIND),d.value=b}}return d},a.addControlResources=function(b){b.resources.add({context:{value:b.context,type:_f},control:{value:b,type:bg}}),b.hasOwnContext&&a.__addRoot(b)},a.bindResources=function(b){var c=b.__resources;if(!t(c)){for(var d,e=b.__controlInstance,f=Object.keys(c),g=a.__controlResources,h=f.length,i=0;h>i;++i)d=f[i],g[d]!==!0&&(b[d]=c[d]=a.create(e,b[d]));b.__bound=!0}},a.dispose=function(b,c){var d=b.resources;if(!t(d)){for(var f,g,h=Object.keys(d.__resources),i=h.length,j=a._ContextManager.defineProperty,k=0;i>k;++k)f=h[k],g=d[f],t(g)||g.type!==_f&&g.type!==dg||j(d,f,c?e(g,!0):null,!0,!0,!0);a._removeListeners(d.__controlInstance)}},a.parseElement=function(b){for(var c,d,e,f,g,h,i=Array.prototype.slice.call(b.children),j=a._regex,k=j.whiteSpaceRegex,l=j.quotationRegex,m={},n=a.__resourceTypes;i.length>0;)c=i.pop(),g=c.nodeName.toLowerCase(),n[g]&&(e=c.attributes,d={},f=e.getNamedItem(Zf),t(f)||(d.alias=f.value,h=c.textContent.replace(k,"$1"),p(h)||(d.value=g===ag||g===dg?h.replace(l,""):h,d.type=g,m[d.alias]=d)));return m},a.getInstance=function(){return new a},a._observeResource=function(b,c){var d=c.value,e=b.uid,f=a.__observableResourceRemoveListeners[e];if(t(f)&&(f=a.__observableResourceRemoveListeners[e]=[]),m(d)){t(c.initialValue)?c.initialValue=d:d=c.initialValue;var g=b.observeExpression(function(a){c.value=a},d);c.value=b.evaluateExpression(d),f.push(g)}},a._removeListeners=function(b){if(!t(b)){var c=b.uid,d=a.__observableResourceRemoveListeners[c];if(v(d))for(var e=d.length,f=0;e>f;++f)d[f]();O(a.__observableResourceRemoveListeners,c)}},a.__addRoot=function(a){a.resources.add({root:{value:a,type:bg,alias:eg},rootContext:{value:a.context,type:_f,alias:fg}})},a.prototype.initialize=function(b,c){if(this.__controlInstance=b,!t(c)){j(c)?c=a.parseElement(c):g(c.resources)&&(c=c.resources),this.__resources=c;for(var d,e=Object.keys(c),f=e.length,h=0;f>h;++h)d=e[h],this[d]=c[d]}},a.prototype.add=function(b){if(!t(b)){j(b)&&(b=a.parseElement(b));for(var c,d,e=Object.keys(b),f=e.length,g=this.__controlInstance,h=this.__bound,i=a.create,k=0;f>k;++k)d=e[k],c=b[d],c.alias=d,this[d]=this.__resources[d]=h?i(g,c):c}},a.INJECTABLE=ag,a.OBJECT=bg,a.OBSERVABLE=_f,a.LITERAL=dg,a.FUNCTION=cg,a.__observableResourceRemoveListeners={},a}();a.Resources=D,a.IResourcesFactory=l,Hb.injectable(xc,l,[cc,_b,Zb],If),Hb.injectable(yc,D,null,Hf);var E=function(){function a(){this.gestures={$tap:Se,$dbltap:Te,$hold:Ye,$release:Ze,$swipe:$e,$swipeleft:_e,$swiperight:af,$swipeup:bf,$swipedown:cf,$track:df,$trackleft:ef,$trackright:ff,$trackup:gf,$trackdown:hf,$trackend:jf},this._androidVersion=u(this._compat.ANDROID)?-1:this._compat.ANDROID,this._android44orBelow=Math.floor(this._androidVersion/10)<=44,this._inMouse=!1,this._subscribers={},this._gestureCount={$tap:0,$dbltap:0,$hold:0,$release:0,$swipe:0,$track:0,$trackend:0},this.__hasMoved=!1,this.__hasRelease=!1,this.__detectingMove=!1,this.__tapCount=0,this.__touchCount=0,this.__cancelDeferredTap=b,this.__cancelDeferredHold=b,this.__cancelRegex=/cancel/i,this.__pointerEndRegex=/up|cancel/i,this.__reverseMap={},this.__mappedEventListener=this.__handleMappedEvent.bind(this),this.__mappedCount={$touchstart:0,$touchmove:0,$touchend:0,$touchcancel:0},this.__pointerHash={},this.__pointerEvents=[],this.__listeners={},this.__getTypes()}return a.prototype.addEventListener=function(a,c,d,e){var f=this,g=this._compat,h=g.mappedEvents,i=h[c],j=!t(i),k=this.__mappedCount,l=b,m=b,n=this.gestures,o=!1;if(j){var p=k[c];this.__reverseMap[i]=c,this.__registerElement(a,c),k[c]++,l=this.__addMappedEvent(p,i,e),g.hasTouchEvents&&!this.__cancelRegex.test(i)&&(i=i.replace("touch","mouse").replace("start","down").replace("end","up"),this.__reverseMap[i]=c,m=this.__addMappedEvent(p,i,e))}if(a.addEventListener(c,d,e),!u(a["on"+c])||u(n[c])||j)return function(){if(!o){if(j){var b=k[c];r(b)&&(b>0&&(b=--k[c]),0===b&&(l(),m())),f.__unregisterElement(a,c)}o=!0,a.removeEventListener(c,d,e)}};var q=n.$swipe,s=n.$track,v=c;if(-1!==c.indexOf(s)){var w=n.$trackend;v=c===w?w:s}else-1!==c.indexOf(q)&&(v=q);return this._gestureCount[v]++,this.__registerElement(a,c),function(){o||(o=!0,f.__removeEventListener(a,c,d,e))}},a.prototype.dispose=function(){this.__unregisterTypes(),this._gestureCount={$tap:0,$dbltap:0,$hold:0,$release:0,$swipe:0,$track:0,$trackend:0},this.__mappedCount={$touchstart:0,$touchmove:0,$touchend:0,$touchcancel:0},this._isActive=!1,this._subscribers={},this.__pointerEvents=[],this.__pointerHash={},this.__reverseMap={},this.__tapCount=this.__touchCount=0,this.__detectingMove=this.__hasMoved=this.__hasRelease=this.__haveSwipeSubscribers=!1,this.__lastMoveEvent=this.__lastTouchDown=this.__lastTouchUp=null,this.__swipeOrigin=this.__capturedTarget=this.__focusedElement=null,this.__cancelDeferredHold=this.__cancelDeferredTap=b},a.prototype._onTouchStart=function(c){var d=this;if(this.__touchCount++>0)return!0;var e=c.type;if("mousedown"!==e)this._inTouch=!0;else{if(this._inTouch===!0)return c.preventDefault(),!1;this._compat.hasTouchEvents&&(this._inMouse=!0)}if(c=this.__standardizeEventObject(c),t(c))return!0;this.__capturedTarget=this.__lastMoveEvent=null,this.__hasMoved=!1;var f=c.clientX,g=c.clientY,h=c.timeStamp,i=c.target,j=this.gestures;this.__lastTouchDown={_buttons:c._buttons,clientX:f,clientY:g,timeStamp:h,target:i,identifier:c.identifier},this.__swipeOrigin={clientX:f,clientY:g,xTimestamp:h,yTimestamp:h,xTarget:i,yTarget:i},this.__haveSwipeSubscribers=this.__findFirstSubscribers(i,[j.$swipe,j.$swipedown,j.$swipeleft,j.$swiperight,j.$swipeup]).length>0;var k=this._gestureCount,l=k.$hold<=0,m=k.$release<=0;if(("touchstart"===e||k.$track>0||k.$trackend>0||k.$swipe>0)&&(this.__registerType(this._moveEvents),this.__detectingMove=!0),l&&m)return!0;var n,o,p=a.config.intervals.holdInterval,q=!1;return l?(this.__hasRelease=!1,this.__cancelDeferredHold=I(function(){d.__hasRelease=!0},p),!0):(m?(n=this.__findFirstSubscriber(c.target,this.gestures.$hold),(q=!t(n))&&(o=function(){n.trigger(c),d.__cancelDeferredHold=b})):(this.__hasRelease=!1,n=this.__findFirstSubscriber(c.target,this.gestures.$hold),(q=!t(n))&&(o=function(){n.trigger(c),d.__hasRelease=!0,d.__cancelDeferredHold=b})),void(q&&(this.__cancelDeferredHold=I(o,p))))},a.prototype._onTouchMove=function(c){if(this.__cancelDeferredHold(),this.__cancelDeferredHold=b,this._inTouch===!0&&"mousemove"===c.type)return!0;var d=this.__standardizeEventObject(c);if(t(d))return!0;var e=this._gestureCount,f=e.$track<=0,g=e.$swipe<=0,h=a.config,i=this.__swipeOrigin,j=d.clientX,k=d.clientY,l=this.__hasMoved||this.__getDistance(i.clientX,j,i.clientY,k)>=h.distances.minScrollDistance;if(!l)return!0;if(this.__hasMoved=!0,f&&g)return!0;{var m=this.__lastMoveEvent||i,n=d.direction=this.__getDirection(j-m.clientX,k-m.clientY),o=(this.__handleOriginChange(n),Math.abs(j-i.clientX)),p=Math.abs(k-i.clientY);d.velocity=this.__getVelocity(o,p,d.timeStamp-i.xTimestamp,d.timeStamp-i.yTimestamp)}!g&&this._android44orBelow&&this.__haveSwipeSubscribers&&c.preventDefault(),f||this.__handleTrack(d,c),this.__lastMoveEvent=d},a.prototype._onTouchEnd=function(b){var c=b.type,d=this.__hasMoved;if("mouseup"!==c){if("touchend"===c){if(d)b.cancelable===!0&&b.preventDefault();else{if(this._inTouch!==!0)return this.__preventClickFromTouch(),b.cancelable===!0&&b.preventDefault(),!0;this.__handleInput(b.target),b.cancelable===!0&&b.preventDefault()}this.__preventClickFromTouch()}this._inTouch=!1}else if(!u(this._inTouch)){if(!this._inMouse)return b.cancelable===!0&&b.preventDefault(),!1;this._inMouse=!1}if(this.__cancelRegex.test(c))return this.__handleCanceled(b),!0;if(b=this.__standardizeEventObject(b),t(b))return!0;this.__clearTempStates(),this.__touchCount=b.touches.length,this.__hasRelease&&this.__handleRelease(b),this.__handleSwipe();var e=a.config,f=e.intervals,g=b.timeStamp,h=this.__lastTouchDown;if(d)return this.__handleTrackEnd(b),this.__tapCount=0,!0;if(t(h)||g-h.timeStamp>f.tapInterval)return this.__tapCount=0,!0;var i=this.__lastTouchUp,j=b.clientX,k=b.clientY;this.__tapCount>0&&this.__getDistance(j,i.clientX,k,i.clientY)<=e.distances.maxDblTapDistance&&g-i.timeStamp<=f.dblTapInterval?this.__handleDbltap(b):this.__tapCount=0,this.__handleTap(b),this.__lastTouchUp=b},a.prototype.__clearTempStates=function(){this.__cancelDeferredHold(),this.__cancelDeferredHold=b,this.__detectingMove&&(this.__unregisterType(this._moveEvents),this.__detectingMove=!1)},a.prototype.__resetTouchEnd=function(){this.__tapCount=this.__touchCount=0,this._inTouch=this.__hasRelease=!1,this.__pointerHash={},this.__pointerEvents=[],this.__capturedTarget=null},a.prototype.__handleCanceled=function(a){var b=a.touches||this.__pointerEvents,c=this.__getTouchIndex(b);a=c>=0?b[c]:this.__standardizeEventObject(a),this.__clearTempStates(),this.__hasMoved&&(this._android44orBelow&&this.__handleSwipe(),this.__handleTrackEnd(a)),this.__resetTouchEnd()},a.prototype.__handleTap=function(c){var d=this;if(this.__tapCount++,!(this._gestureCount.$tap<=0)){var e=this.gestures,f=this.__findFirstSubscriber(c.target,e.$tap);if(!t(f))return a.config.intervals.dblTapZoomDelay<=0||"mouse"===c.pointerType||"mouseup"===c.type?(c._buttons=this.__lastTouchDown._buttons,void f.trigger(c)):void(this.__cancelDeferredTap=I(function(){c._buttons=d.__lastTouchDown._buttons,f.trigger(c),d.__tapCount=0,d.__cancelDeferredTap=b},a.config.intervals.dblTapZoomDelay))}},a.prototype.__handleDbltap=function(a){if(this.__tapCount=0,this.__cancelDeferredTap(),this.__cancelDeferredTap=b,!(this._gestureCount.$dbltap<=0)){var c=this.__findFirstSubscriber(a.target,this.gestures.$dbltap);t(c)||(a._buttons=this.__lastTouchDown._buttons,c.trigger(a),this.__tapCount=-1)}},a.prototype.__handleRelease=function(a){var b=this.__findFirstSubscriber(a.target,this.gestures.$release);t(b)||b.trigger(a),this.__hasRelease=!1},a.prototype.__handleSwipe=function(){if(!(this._gestureCount.$swipe<=0)){var a=this.__lastMoveEvent;if(!t(a)){for(var b=this.__swipeOrigin,c=Math.abs(a.clientX-b.clientX),d=Math.abs(a.clientY-b.clientY),e=this.__getRegisteredSwipes(a.direction,a.velocity,c,d);e.length>0;)e.pop().trigger(a);this.__lastMoveEvent=null}}},a.prototype.__handleTrack=function(a,b){var c=this.gestures,d=c.$track,e=a.direction,f=this.__capturedTarget||a.target,g=this.__findFirstSubscribers(f,[d,d+e.x,d+e.y]);if(this._android44orBelow){var h=this.__findFirstSubscribers(f,[d,c.$trackdown,c.$trackup,c.$trackleft,c.$trackright,c.$trackend]);h.length>0&&b.preventDefault()}if(g.length>0)for(this._androidVersion>-1&&b.preventDefault();g.length>0;)g.pop().trigger(a)},a.prototype.__handleTrackEnd=function(a){if(!(this._gestureCount.$trackend<=0)){var b=this.__capturedTarget||a.target,c=this.__findFirstSubscriber(b,this.gestures.$trackend);t(c)||c.trigger(a)}},a.prototype.__handleMappedEvent=function(a){var b=a.type,c=this.__reverseMap[b],d=this.__findFirstSubscriber(a.target,c);t(d)||(a=this.__standardizeEventObject(a),t(a)||d.trigger(a))},a.prototype.__getTypes=function(){var a,b,c,d=this._compat,e=d.mappedEvents,f=this.__listeners;if(d.hasPointerEvents)a=this._startEvents=e.$touchstart,b=this._moveEvents=e.$touchmove,c=this._endEvents=e.$touchend+" "+e.$touchcancel;else if(d.hasTouchEvents)a=this._startEvents=e.$touchstart+" mousedown",b=this._moveEvents=e.$touchmove+" mousemove",c=this._endEvents=e.$touchend+" mouseup "+e.$touchcancel;else{var g=e.$touchcancel;a=this._startEvents=e.$touchstart,b=this._moveEvents=e.$touchmove,c=this._endEvents=e.$touchend+(g?" "+g:"")}f[a]=this._onTouchStart.bind(this),f[b]=this._onTouchMove.bind(this),f[c]=this._onTouchEnd.bind(this)},a.prototype.__registerTypes=function(){this.__registerType(this._startEvents),this.__registerType(this._endEvents)},a.prototype.__unregisterTypes=function(){this.__unregisterType(this._startEvents),this.__unregisterType(this._endEvents),this.__detectingMove&&(this.__unregisterType(this._moveEvents),this.__detectingMove=!1)},a.prototype.__registerType=function(a){for(var b=this.__listeners[a],c=this._document,d=a.split(" "),e=d.length;e-->0;)c.addEventListener(d[e],b,!1)},a.prototype.__unregisterType=function(a){for(var b=this.__listeners[a],c=this._document,d=a.split(" "),e=d.length;e-->0;)c.removeEventListener(d[e],b,!1)},a.prototype.__registerElement=function(b,c){var d,e=b.__plat;t(e)?(d=L("domEvent_"),b.__plat=e={domEvent:d}):t(e.domEvent)&&(d=L("domEvent_"),e.domEvent=d),this._isActive||(this.__registerTypes(),t(this._isActive)&&this.__appendGestureStyle(),this._isActive=!0);var f;if(t(d)){var g=this._subscribers[e.domEvent];return u(g[c])?(f=new J(b,c),g[c]=f):g[c].count++,void g.gestureCount++}var h={gestureCount:1};f=new J(b,c),h[c]=f,this._subscribers[d]=h,u(b.className)||fb(b,a.config.styleConfig[0].className),this.__removeSelections(b)},a.prototype.__unregisterElement=function(a,b){var c=a.__plat;if(!t(c)&&!t(c.domEvent)){var d=c.domEvent,e=this._subscribers[d],f=e[b];t(f)||(f.count--,0===f.count&&O(e,b),e.gestureCount--,0===e.gestureCount&&(O(this._subscribers,d),this.__removeElement(a)))}},a.prototype.__setTouchPoint=function(a){var b=a.type,c=this._compat;return c.hasPointerEvents||c.hasMsPointerEvents?void this.__updatePointers(a,this.__pointerEndRegex.test(b)):void(a.pointerType=-1===b.indexOf("mouse")?"touch":"mouse")},a.prototype.__setCapture=function(a){t(this.__capturedTarget)&&!i(a)&&(this.__capturedTarget=a)},a.prototype.__updatePointers=function(a,b){var c,d=a.pointerId,e=this.__pointerHash,f=e[d];if(b)u(f)||(c=this.__pointerEvents.indexOf(f),c>-1&&this.__pointerEvents.splice(c,1),O(this.__pointerHash,d));else{if(1===d&&!p(e))return;a.identifier=a.pointerId,u(f)||(c=this.__pointerEvents.indexOf(f))<0?this.__pointerEvents.push(a):this.__pointerEvents.splice(c,1,a),e[d]=a}},a.prototype.__findFirstSubscriber=function(a,b){if(!t(a)){var c,d,e;do if(c=a.__plat,!u(c)&&!u(c.domEvent)&&(d=this._subscribers[c.domEvent],e=d[b],!u(e)))return e;while(!t(a=a.parentNode))}},a.prototype.__findFirstSubscribers=function(a,b){if(t(a))return[];var c,d,e,f,g,h=[];do if(c=a.__plat,!u(c)&&!u(c.domEvent))for(d=this._subscribers[c.domEvent],e=Object.keys(d);e.length>0;)f=e.pop(),g=b.indexOf(f),-1!==g&&(h.push(d[f]),b.splice(g,1));while(b.length>0&&!t(a=a.parentNode));return h},a.prototype.__addMappedEvent=function(a,b,c){var d=this,e=this._document;return 0===a&&e.addEventListener(b,this.__mappedEventListener,c),function(){e.removeEventListener(b,d.__mappedEventListener,c)}},a.prototype.__removeEventListener=function(a,b,c,d){var e=this.gestures;a.removeEventListener(b,c,d);var f=e.$swipe,g=e.$track,h=b;if(-1!==b.indexOf(g)){var i=e.$trackend;h=b===i?i:g}else-1!==b.indexOf(f)&&(h=f);this._gestureCount[h]--,this.__unregisterElement(a,b)},a.prototype.__removeElement=function(b){this.__returnSelections(b),u(b.className)||gb(b,a.config.styleConfig[0].className);var c=b.__plat;O(c,"domEvent"),p(c)&&O(b,"__plat"),p(this._subscribers)&&this.dispose()},a.prototype.__standardizeEventObject=function(a){this.__setTouchPoint(a);var b,c=-1!==this._startEvents.indexOf(a.type),d=a.touches||this.__pointerEvents,e=a.changedTouches,f=!u(e),g=a.timeStamp;if(f)if(c)b=a.preventDefault.bind(a),a=e[0],a.preventDefault=b;else{var h=this.__getTouchIndex(e);if(h>=0)b=a.preventDefault.bind(a),a=e[h],a.preventDefault=b;else if(this.__getTouchIndex(d)>=0)return null}return c&&this.__setCapture(a.target),this.__normalizeButtons(a),a.touches=d,a.offset=this.__getOffset(a),(u(a.timeStamp)||g>a.timeStamp)&&(a.timeStamp=g),a},a.prototype.__normalizeButtons=function(a){var b;if(r(a.buttons))b=0===a.buttons?1:a.buttons;else if(r(a.which)&&a.which>0)b=a.which;else switch(a.button){case-1:b=0;break;case 0:b=1;break;case 1:b=4;break;case 2:b=2;break;case 3:b=8;break;case 4:b=16;break;default:b=1}a._buttons=b},a.prototype.__getTouchIndex=function(a){for(var b=(this.__lastTouchDown||{}).identifier,c=a.length,d=0;c>d;++d)if(a[d].identifier===b)return d;return-1},a.prototype.__getOffset=function(a){var b=this.__capturedTarget||a.target;if(i(b))return{x:a.clientX,y:a.clientY};if(!u(a.offsetX)&&b===a.target)return{x:a.offsetX,y:a.offsetY};for(var c=b.offsetLeft,d=b.offsetTop;!t(b=b.offsetParent);)c+=b.offsetLeft,d+=b.offsetTop;return{x:a.clientX-c,y:a.clientY-d}},a.prototype.__getDistance=function(a,b,c,d){var e=b-a,f=d-c;return Math.sqrt(e*e+f*f)},a.prototype.__getVelocity=function(a,b,c,d){var e=0,f=0;return c>0&&(e=a/c||0),d>0&&(f=b/d||0),{x:e,y:f}},a.prototype.__getDirection=function(a,b){var c=Math.abs(a),d=Math.abs(b),e=(this.__lastMoveEvent||{}).direction||{},f=0===a?e.x||"none":0>a?"left":"right",g=0===b?e.y||"none":0>b?"up":"down";return{x:f,y:g,primary:c===d?e.primary||"none":c>d?f:g}},a.prototype.__handleOriginChange=function(a){var b=this.__lastMoveEvent;if(!t(b)){var c=b.direction,d=c.x===a.x,e=c.y===a.y;if(!d||!e){var f=this.__swipeOrigin,g=this.gestures,h=[g.$swipe,g.$swipedown,g.$swipeleft,g.$swiperight,g.$swipeup];d||(f.clientX=b.clientX,f.xTimestamp=b.timeStamp,f.xTarget=b.target,this._android44orBelow&&(this.__haveSwipeSubscribers=this.__findFirstSubscribers(f.xTarget,h).length>0)),e||(f.clientY=b.clientY,f.yTimestamp=b.timeStamp,f.yTarget=b.target,this._android44orBelow&&(this.__haveSwipeSubscribers=this.__findFirstSubscribers(f.yTarget,h).length>0))}}},a.prototype.__getRegisteredSwipes=function(b,c,d,e){var f,g=this.gestures.$swipe,h=a.config.velocities.minSwipeVelocity,i=[g],j=this.__swipeOrigin||{};return d>e?(f=j.xTarget,c.x>=h&&i.push(g+b.x)):e>d&&(f=j.yTarget,c.y>=h&&i.push(g+b.y)),this.__findFirstSubscribers(f,i)},a.prototype.__isHorizontal=function(a){return"left"===a||"right"===a},a.prototype.__appendGestureStyle=function(){var b,c,d=this._document;if(!this._compat.platCss)if(!t(d.styleSheets)&&d.styleSheets.length>0){var e=d.styleSheets[0];for(b=a.config.styleConfig,c=b.length;c-->0;)e.insertRule(this.__createStyle(b[c]),0)}else{var f=d.head,g=d.createElement("style"),h="";for(g.type="text/css",b=a.config.styleConfig,c=b.length;c-->0;)h=this.__createStyle(b[c])+h;g.textContent=h,f.appendChild(g)}},a.prototype.__createStyle=function(a){var b=a.styles||[],c=b.length,d="."+a.className+" { ",e="";c=b.length;for(var f=0;c>f;++f)e+=b[f]+";";return d+=e+" } "},a.prototype.__isFocused=function(a){return a===this.__focusedElement},a.prototype.__handleInput=function(a){var b=this,c=a.nodeName,d=this.__focusedElement||{};if(!m(c))return this.__focusedElement=null,void(s(d.blur)&&d.blur());var e;switch(c.toLowerCase()){case"input":switch(a.type){case"range":s(d.blur)&&d.blur();break;case"button":case"submit":case"checkbox":case"radio":case"file":s(d.blur)&&d.blur(),H(function(){b._document.body.contains(a)&&s(a.click)&&a.click()});break;default:return this.__focusedElement=a,a.focus(),void(e=this.addEventListener(a,"blur",function(){b.__isFocused(a)&&(b.__focusedElement=null),e()},!1))}break;case"a":case"button":case"label":s(d.blur)&&d.blur(),H(function(){b._document.body.contains(a)&&s(a.click)&&a.click()});break;case"textarea":return this.__focusedElement=a,a.focus(),void(e=this.addEventListener(a,"blur",function(){b.__isFocused(a)&&(b.__focusedElement=null),e()},!1));case"select":s(d.blur)&&d.blur(),H(function(){var c=b._document;if(c.body.contains(a)){var d=c.createEvent("MouseEvents");d.initMouseEvent("mousedown",!1,!1,null,null,null,null,null,null,null,null,null,null,null,null),a.dispatchEvent(d)}});break;default:s(d.blur)&&d.blur(),H(function(){b._document.body.contains(a)&&s(a.click)&&a.click()})}this.__focusedElement=null},a.prototype.__preventClickFromTouch=function(){var a,c=this,d=this._document,e=I(function(){d.removeEventListener("click",a,!0),d.removeEventListener("mousedown",a,!0),d.removeEventListener("mouseup",a,!0)},400);a=function(f){if(f.preventDefault(),f.stopPropagation(),d.removeEventListener(f.type,a,!0),e===b)return!1;e(),e=b;var g=c.__lastTouchDown;return t(g)||c.__isFocused(g.target)?!1:(c.__handleInput(g.target),!1)},H(function(){d.addEventListener("click",a,!0),d.addEventListener("mousedown",a,!0),d.addEventListener("mouseup",a,!0)})},a.prototype.__removeSelections=function(a){j(a)&&(u(a.onselectstart)||a.addEventListener("selectstart",this.__preventDefault,!1),u(a.ondragstart)||a.addEventListener("dragstart",this.__preventDefault,!1))},a.prototype.__returnSelections=function(a){j(a)&&(u(a.onselectstart)||a.removeEventListener("selectstart",this.__preventDefault,!1),u(a.ondragstart)||a.removeEventListener("dragstart",this.__preventDefault,!1))},a.prototype.__preventDefault=function(a){var b=a.target.nodeName;return m(b)&&(b=b.toLowerCase()),"input"===b||"textarea"===b?!0:(a.preventDefault(),!1)},a._inject={_document:Tb,_compat:Qb},a.config={intervals:{tapInterval:250,dblTapInterval:300,holdInterval:400,dblTapZoomDelay:0},distances:{minScrollDistance:3,maxDblTapDistance:10},velocities:{minSwipeVelocity:.645},styleConfig:[{className:"plat-gesture",styles:["-moz-user-select: none","-khtml-user-select: none","-webkit-touch-callout: none","-webkit-user-select: none","-webkit-user-drag: none","-webkit-tap-highlight-color: transparent","-webkit-overflow-scrolling: touch","-ms-user-select: none","-ms-touch-action: manipulation","touch-action: manipulation"]},{className:"plat-no-touch-action",styles:["-ms-touch-action: none","touch-action: none"]}]},a}();a.DomEvents=E,Hb.injectable(uc,E),a.IDomEventsConfig=n,Hb.injectable(vc,n);var F=function(){function a(){this._document=lb(Tb)}return a.prototype.initialize=function(a,b,c){this.element=a,this.event=b,this.eventType=m(c)?c:"CustomEvent"},a.prototype.trigger=function(a,b,d){var e=this._document.createEvent(this.eventType);return g(a)&&c(e,a),e.initCustomEvent(this.event,!0,!0,t(b)?0:b),(d||this.element).dispatchEvent(e)},a}();a.DomEvent=F,Hb.injectable(wc,F,null,Hf);var G,J=function(a){function b(b,c){a.call(this),this.count=0,this.element=b,this.event=c,this.count++}return __extends(b,a),b.prototype.trigger=function(a){var b=this._document.createEvent("CustomEvent"),c=this.element,d=a.target;this.__extendEventObject(b,a),b.initCustomEvent(this.event,!0,!0,0);var e=c.contains(d)?d.dispatchEvent(b):c.dispatchEvent(b);return e||a.preventDefault(),e},b.prototype.__extendEventObject=function(a,b){var c=b.pointerType;a.clientX=b.clientX,a.clientY=b.clientY,a.offsetX=b.offset.x,a.offsetY=b.offset.y,a.direction=b.direction||{x:"none",y:"none",primary:"none"},a.touches=b.touches,a.velocity=b.velocity||{x:0,y:0},a.identifier=b.identifier||0,a.pointerType=r(c)?this.__convertPointerType(c,b.type):c,a.screenX=b.screenX,a.screenY=b.screenY,a.pageX=b.pageX,a.pageY=b.pageY,a.buttons=b._buttons},b.prototype.__convertPointerType=function(a,b){switch(a){case MSPointerEvent.MSPOINTER_TYPE_MOUSE:return"mouse";case MSPointerEvent.MSPOINTER_TYPE_PEN:return"pen";case MSPointerEvent.MSPOINTER_TYPE_TOUCH:return"touch"}return-1===b.indexOf("mouse")?"touch":"mouse"},b}(F);!function(a){var c=function(){function a(){this._animatedElements={}}return a.prototype.create=function(a,b,c){return this._create(a,b,c,{key:null})},a.prototype.animate=function(a,b,c){return this._animate(a,b,c,{key:null})},a.prototype.enter=function(a,b,c,d,e){return this._animate(a,b,e,{key:"enter",parent:c,refChild:d})},a.prototype.leave=function(a,b,c){return this._animate(a,b,c,{key:"leave"})},a.prototype.move=function(a,b,c,d,e){return this._animate(a,b,e,{key:"move",parent:c,refChild:d})},a.prototype.show=function(a,b,c){return this._animate(a,b,c,{key:"show"})},a.prototype.hide=function(a,b,c){return this._animate(a,b,c,{key:"hide"})},a.prototype.all=function(a){for(var c=this,e=a.length,f=[],g=new d(function(b){c._Promise.all(a).then(function(){b()})}),h=0;e>h;++h)f=f.concat(a[h].getInstances());return g.initialize(f),g.then(b)},a.prototype.resolve=function(){var a=new d(function(b){b(function(){return a})});return a},a.prototype._animate=function(a,b,c,d){var e=this._create(a,b,c,d),f=e.current;return e.previous.then(function(){K(function(){f.start()})}),f},a.prototype._create=function(a,c,e,f){var g,h=this,i=Jg[c],j=[],k=[];if((!this._compat.animationSupported||u(i))&&(i=Kg[c],u(i)))return a=this.__constructAnimatableElements(a,{inject:b},k,j),this._handlePreInitFunctionality(a,k,f),this._handlePostInitFunctionality(a,k,f),this._handleEndFunctionality(a,k,f),g=this.resolve(),{previous:g,current:g};a=this.__constructAnimatableElements(a,i,k,j);var l=k.length;if(0===l)return this._handlePreInitFunctionality(a,k,f),this._handlePostInitFunctionality(a,k,f),this._handleEndFunctionality(a,k,f),g=this.resolve(),{previous:g,current:g};this._handlePreInitFunctionality(a,k,f);var m,n=L("animation_"),p=this.__setAnimationId(n,k),q=new d(function(b){var c=h._Promise;m=c.all(p).then(function(){for(var d=[],g=0;l>g;++g)d.push(j[g].instantiate(k[g],e));h._handlePostInitFunctionality(a,k,f);var i=c.all(d),m=h.__isParentAnimating(k),p=h.__generateAnimatedElement(n,k,q);if(!t(m)){h._handleEndFunctionality(a,k,f),p.animationEnd(!0);var r=h._animatedElements[m],s=o(r.promise)?function(){return r.promise}:function(){return q};i.then(function(){b(s)})}h.__stopChildAnimations(k),p.promise=q,i.then(function(){h._handleEndFunctionality(a,k,f),p.animationEnd(),b(function(){return q})})})});return q.initialize(j),{previous:m,current:q}},a.prototype._handlePreInitFunctionality=function(a,b,c){switch(c.key){case"move":for(var d=0;d<length;++d)eb(a[d])}},a.prototype._handlePostInitFunctionality=function(a,b,c){var d,e;switch(c.key){case"enter":case"move":var f,g=c.refChild;if(j(g)?f=g.parentNode:(f=c.parent,g=null),!j(f))break;for(d=a.length,e=0;d>e;++e)f.insertBefore(a[e],g);break;case"show":for(d=b.length,e=0;d>e;++e)b[e].removeAttribute(Ie)}},a.prototype._handleEndFunctionality=function(a,b,c){var d,e;switch(c.key){case"leave":for(d=a.length,e=0;d>e;++e)eb(a[e]);break;case"hide":for(d=b.length,e=0;d>e;++e)b[e].setAttribute(Ie,"")}},a.prototype.__setAnimationId=function(a,b){for(var c,d,e,f=this._animatedElements,g=[],h=b.length,i=0;h>i;++i)e=b[i],d=e.__plat,u(d)?(e.__plat={animation:a},fb(e,Je)):u(d.animation)?(d.animation=a,fb(e,Je)):(c=f[d.animation],u(c)||(g.push(c.promise),c.animationEnd(!0)),d.animation=a);return g},a.prototype.__generateAnimatedElement=function(a,b,c){var d=this._animatedElements,e=function(e){var f,g,h,i=b.length;if(e===!0)return c.cancel(),void O(d,a);for(var j=0;i>j;++j)g=b[j],f=g.__plat||{},h=f.animation,u(h)||h!==a||(gb(g,Je),O(f,"animation"),p(f)&&O(g,"__plat"));O(d,a)};return d[a]={animationEnd:e}},a.prototype.__isParentAnimating=function(a){for(var b,c=a[0];!i(c=c.parentNode)&&!t(c)&&c.nodeType===Node.ELEMENT_NODE;)if(jb(c,Je)&&(b=(c.__plat||{}).animation,m(b))){if(!t(this._animatedElements[b]))return b;O(c.__plat,"animation"),p(plat)&&O(c,"__plat"),gb(c,Je)}},a.prototype.__stopChildAnimations=function(a){for(var b,c,d,e,f=this._animatedElements,g=Array.prototype.slice,h=0;h<a.length;++h)for(b=g.call(a[h].querySelectorAll("."+Je));b.length>0;)d=b.pop().__plat||{},e=d.animation,t(e)||(c=f[e]||{},s(c.animationEnd)&&c.animationEnd(!0))},a.prototype.__constructAnimatableElements=function(a,b,c,d){if(!v(a))if(k(a))a=Array.prototype.slice.call(a.childNodes);else if(w(a))a=Array.prototype.slice.call(a);else{if(!j(a)||a.nodeType!==Node.ELEMENT_NODE)return[];a=[a]}for(var e,f=a.length,g=0;f>g;++g)e=a[g],j(e)&&e.nodeType===Node.ELEMENT_NODE&&(c.push(e),d.push(b.inject()));return a},a._inject={_compat:Qb,_Promise:Pb,_document:Tb},a}();a.Animator=c,Hb.injectable(pc,c);var d=function(a){function c(b,c){a.call(this,b),this._Promise=lb(Pb),this.__animationState=0,this.__animationInstances=[],t(c)||(this.__animationInstances=c.__animationInstances,this.__animationState=c.__animationState)}return __extends(c,a),c.prototype.initialize=function(a){p(this.__animationInstances)&&(v(a)?this.__animationInstances=a:g(a)&&(this.__animationInstances=[a]))},c.prototype.getInstances=function(){return this.__animationInstances},c.prototype.start=function(){if(!(this.__animationState>0)){for(var a,b=this.__animationInstances,c=b.length,d=0;c>d;++d)a=b[d],s(a.start)&&a.start();this.__animationState=1}},c.prototype.pause=function(){if(1!==this.__animationState)return this._Promise.resolve();for(var a,c=this.__animationInstances,d=[],e=c.length,f=0;e>f;++f)a=c[f],s(a.pause)&&d.push(a.pause());return this._Promise.all(d).then(b)},c.prototype.resume=function(){if(1!==this.__animationState)return this._Promise.resolve();for(var a,c=this.__animationInstances,d=[],e=c.length,f=0;e>f;++f)a=c[f],s(a.resume)&&d.push(a.resume());return this._Promise.all(d).then(b)},c.prototype.cancel=function(){if(2===this.__animationState)return this;for(var a,b=this.__animationInstances,c=b.length,d=0;c>d;++d)a=b[d],s(a.cancel)&&a.cancel(),s(a.end)&&a.end();return this.__animationState=2,this},c.prototype.isCanceled=function(){return 2===this.__animationState},c.prototype.then=function(b){return a.prototype.then.call(this,b)},c.prototype["catch"]=function(b){return a.prototype["catch"].call(this,b)},c}(Tg.Promise);a.AnimationPromise=d;var e=function(){function a(){this.__eventListeners=[]}return a.prototype.initialize=function(){},a.prototype.start=function(){},a.prototype.end=function(){for(var a=this.__eventListeners;a.length>0;)a.pop()();
s(this._resolve)&&(this._resolve(),this._resolve=null)},a.prototype.pause=function(){return this._Promise.resolve()},a.prototype.resume=function(){return this._Promise.resolve()},a.prototype.cancel=function(){this.end()},a.prototype.addEventListener=function(a,c,d){if(!s(c)){var e=this._Exception;return e.warn('An animation\'s "addEventListener" must take a function as the second argument.',e.EVENT),b}c=c.bind(this);var f=this.dom.addEventListener(this.element,a,function(a){a.stopPropagation(),c(a)},d),g=this.__eventListeners;return g.push(f),function(){f();var a=g.indexOf(f);-1!==a&&g.splice(a,1)}},a.prototype.instantiate=function(a,b){var c=this;this.element=a,this.options=b;var e=new d(function(a){c._resolve=a,c.initialize()});return e.initialize(this),e},a._inject={_window:Hc,_compat:Qb,_Exception:Zb,_Promise:Pb,dom:tc,utils:Bc},a}();a.BaseAnimation=e;var f=function(a){function b(){a.apply(this,arguments),this._animationEvents=this._compat.animationEvents}return __extends(b,a),b.prototype.animationStart=function(a){return this.addEventListener(this._animationEvents.$animationStart,a,!1)},b.prototype.animationEnd=function(a){return this.addEventListener(this._animationEvents.$animationEnd,a,!1)},b.prototype.animationIteration=function(a){return this.addEventListener(this._animationEvents.$animationIteration,a,!1)},b.prototype.transitionStart=function(a){return this.addEventListener(this._animationEvents.$transitionStart,a,!1)},b.prototype.transitionEnd=function(a){return this.addEventListener(this._animationEvents.$transitionEnd,a,!1)},b}(e);a.CssAnimation=f;var h=function(a){function c(){a.apply(this,arguments),this.className=Ke,this._animationCanceled=b}return __extends(c,a),c.prototype.initialize=function(){fb(this.element,this.className+Nf)},c.prototype.start=function(){var a=this;this._animationCanceled=K(function(){var b=a.element,c=a.className;if(null===b.offsetParent)return a._dispose(),void a.end();fb(b,c);var d=a._animationEvents.$animation,e=a.options||{},f=a._window.getComputedStyle(b,e.pseudo),g=f[d+"Name"];return""===g||"none"===g||"paused"===f[d+"PlayState"]?(a._dispose(),void a.end()):(e.preserveInit||gb(b,c+Nf),void(a._animationCanceled=a.animationEnd(function(){a._animationCanceled=K(function(){a._dispose()})})))})},c.prototype.pause=function(){var a=this;if(this._animationCanceled===b)return this._Promise.resolve();var c=this._compat.animationEvents;return new this._Promise(function(d){K(function(){a._animationCanceled!==b&&(a.element.style[c.$animation+"PlayState"]="paused"),d()})})},c.prototype.resume=function(){var a=this;if(this._animationCanceled===b)return this._Promise.resolve();var c=this._compat.animationEvents;return new this._Promise(function(d){K(function(){a._animationCanceled!==b&&(a.element.style[c.$animation+"PlayState"]="running"),d()})})},c.prototype.cancel=function(){this._animationCanceled(),this._dispose(),this.end()},c.prototype._dispose=function(){var a=this.className;gb(this.element,a+" "+a+Nf),this._animationCanceled=b},c}(f);a.SimpleCssAnimation=h,Hb.animation(Ke,h);var l=function(a){function b(){a.apply(this,arguments),this.className=Pe}return __extends(b,a),b}(h);a.FadeIn=l,Hb.animation(Pe,l);var n=function(a){function b(){a.apply(this,arguments),this.className=Qe}return __extends(b,a),b}(h);a.FadeOut=n,Hb.animation(Qe,n);var q=function(a){function b(){a.apply(this,arguments),this.className=Me}return __extends(b,a),b}(h);a.Enter=q,Hb.animation(Me,q);var r=function(a){function b(){a.apply(this,arguments),this.className=Ne}return __extends(b,a),b}(h);a.Leave=r,Hb.animation(Ne,r);var x=function(a){function b(){a.apply(this,arguments),this.className=Oe}return __extends(b,a),b}(h);a.Move=x,Hb.animation(Oe,x);var y=function(a){function c(){a.apply(this,arguments),this.className=Le,this._animationCanceled=b,this._modifiedProperties={},this._normalizeRegex=/-/g,this._nonNumRegex=/[^\-0-9\.]/g,this._normalizedKeys={},this._transitionCount=0,this._count=0,this._started=!1,this._usingCss=!1}return __extends(c,a),c.prototype.initialize=function(){fb(this.element,this.className+Nf)},c.prototype.start=function(){var a=this;this._animationCanceled=K(function(){var b=a.element,c=a.className;null===b.offsetParent&&(a._animate(),a._dispose(),a.end()),fb(b,c),a._started=!0;var d=a.utils,e=a._animationEvents.$transition,f=a.options||{},g=f.count,h=a._window.getComputedStyle(b,f.pseudo),i=h[e+"Property"],j=h[e+"Duration"];if(d.isNumber(g)&&g>0&&(a._count=g),""===i||"none"===i||""===j||"0s"===j)return a._animate(),a._dispose(),void a.end();if(f.preserveInit===!1&&gb(b,c+Nf),a._animationCanceled=a.transitionEnd(a._done),!a._animate()){if(d.isEmpty(f.properties))return void a._cssTransition(h);a._dispose(),a.end()}})},c.prototype.cancel=function(){this._animationCanceled(),this._started||this._animate(),this._dispose(),this.end()},c.prototype._dispose=function(){var a=this.className;gb(this.element,a+" "+a+Nf),this._animationCanceled=b},c.prototype._done=function(a){var b=a.propertyName;if(m(b)){var c=++this._transitionCount;if(b=b.replace(this._normalizeRegex,"").toLowerCase(),c<this._count||!this._usingCss&&this._normalizedKeys[b]===!0&&c<Object.keys(this._modifiedProperties).length)return}this._dispose(),this.end()},c.prototype._animate=function(){for(var a,b,c,d=this.element.style||{},e=(this.options||{}).properties||{},f=Object.keys(e),g=f.length,h=this._modifiedProperties,i=this._normalizedKeys,j=this._normalizeRegex,k=0;f.length>0;)a=f.shift(),b=d[a],c=e[a],m(c)?(d[a]=c,b===d[a]?k++:(h[a]=b,i[a.replace(j,"").toLowerCase()]=!0)):k++;return g>k},c.prototype._cssTransition=function(a){var c,d,e,f,g=this,h=this._animationEvents.$transition,i=a[h+"Duration"].split(","),j=a[h+"Delay"].split(","),k=a[h+"Property"].split(","),l=k.length,m=[],n=this._normalizedKeys,o=this._normalizeRegex,p=this._modifiedProperties,q=0,r=0,s=!1,t=this.utils.defer.bind(this,function(c,d){g._animationCanceled!==b&&("all"===c?s=!0:a[c]!==d&&(s=!0,p[c]=d),++r<l||s||(g._dispose(),g.end()))});for(this._usingCss=!0,this._count=this._count||l;l>q;++q)c=k[q]=k[q].trim(),d=i.length>q?i[q].trim():i[i.length-1].trim(),e=j.length>q?j[q].trim():j[j.length-1].trim(),n[c.replace(o,"").toLowerCase()]=!0,f=a[c],m.push(f),t(this._toMs(d)+this._toMs(e),[c,f])},c.prototype._toMs=function(a){var b=this._nonNumRegex,c=a.match(b)[0],d=Number(a.replace(b,""));return this.utils.isNumber(d)?"s"===c?1e3*d:"ms"===c?d:0:0},c}(f);a.SimpleCssTransition=y,Hb.animation(Le,y)}(G=a.animations||(a.animations={}));var N;!function(a){var c=function(a){function c(){a.apply(this,arguments)}return __extends(c,a),c.prototype.initialize=function(){var a,b=this._router=this._Router.currentRouter(),c=this._getParentViewport();t(c)||t(c._router)||(a=this._parentRouter=c._router,a.addChild(b)),this._navigator.initialize(b)},c.prototype.loaded=function(){var a=this;this._Promise.resolve(this._router.finishNavigating).then(function(){a._router.register(a)})},c.prototype.canNavigateTo=function(a){var b=this,c=this._Router.currentRouter,d=c(),e=!0,f=this._Injector.getDependency(a.delegate.view),h=f.inject(),i=a.parameters,j=c();if(!g(h))return this._Promise.resolve(null);if(d!==j){j.initialize(this._router);var k=lb(bc);h.navigator=k,k.initialize(j)}else h.navigator=this._navigator;return s(h.canNavigateTo)&&(e=h.canNavigateTo(i,a.query)),this._Promise.resolve(e).then(function(a){return b._nextInjector=f,b._nextView=h,a})},c.prototype.canNavigateFrom=function(){var a=this.controls[0],b=!0;return g(a)&&s(a.canNavigateFrom)&&(b=a.canNavigateFrom()),this._Promise.resolve(b)},c.prototype.navigateTo=function(a){var b=(this._Promise.resolve.bind(this._Promise),this._nextInjector||this._Injector.getDependency(a.delegate.view)),c=this._createNodeMap(b),d=(this.element,c.element),e=(a.parameters,a.query),f=c.uiControlNode.control;this._animator.enter(d,Me,this.element);var g=this._managerCache.read(this.uid),h=this._ElementManagerFactory.getInstance();return g.children=[],h.initialize(c,g),s(f.navigatedTo)&&f.navigatedTo(a.parameters,e),h.setUiControlTemplate(),f.hasOwnContext?h.observeRootContext(f,h.fulfillAndLoad):h.fulfillAndLoad()},c.prototype.navigateFrom=function(){var a,c=this.controls[0];return a=g(c)&&s(c.navigatingFrom)?this._Promise.resolve(c.navigatingFrom()):this._Promise.resolve(),a["catch"](b).then(function(){_g.dispose(c)})},c.prototype.dispose=function(){this._router.unregister(this),this._navigator.dispose()},c.prototype._createNodeMap=function(a){var b=this._nextView||a.inject(),c=this._document,d=a.name,e=b.replaceWith,f=c.createElement(p(e)||"any"===e?"div":e);return f.setAttribute(Sd,d),f.className=Td,{element:f,attributes:{},nodes:[],uiControlNode:{control:b,nodeName:d,expressions:[],injector:a,childManagerLength:0}}},c.prototype._getParentViewport=function(){for(var a=this.parent,b=this.type;!t(a)&&a.type!==b;)a=a.parent;return a},c._inject={_Router:Fc,_Promise:Pb,_Injector:Tc,_ElementManagerFactory:hc,_document:Tb,_managerCache:nc,_animator:pc,_navigator:bc},c}(q);a.Viewport=c,Hb.control(Rd,c);var d=function(a){function b(){a.call(this),this.replaceWith=null,this.__isFirst=!1;var b=lb(mc);this.__templateControlCache=b.create(Yd)}return __extends(b,a),b.prototype.initialize=function(){var a=this.options||{},b=a.value||{},c=this._id=b.id;if(t(c)){var d=this._Exception;return void d.warn(this.type+" instantiated without an id option",d.COMPILE)}this._url=b.templateUrl;var e=this.__templateControlCache.read(c);return t(e)?(this.__isFirst=!0,void this._initializeTemplate()):void(this.__templatePromise=e)},b.prototype.loaded=function(){this.__isFirst||this._waitForTemplateControl(this.__templatePromise)},b.prototype.dispose=function(){if(this.__isFirst){var a=this.__templateControlCache;a.remove(this._id),0===a.info().size&&a.dispose()}},b.prototype._initializeTemplate=function(){var a=this,b=this._id;if(!t(b)){var c,d=this.endNode.parentNode,e=this._url;t(e)?(c=this._document.createDocumentFragment(),T(this.elementNodes,c)):(c=this._templateCache.read(e),V(this.elementNodes,d));var f;o(c)?f=c["catch"](function(b){return t(b)?q.determineTemplate(a,e):void 0}).then(function(c){return a.bindableTemplates.add(b,c.cloneNode(!0)),a}):(this.bindableTemplates.add(b,c.cloneNode(!0)),f=this._Promise.resolve(this)),this.__templateControlCache.put(b,f)}},b.prototype._waitForTemplateControl=function(a){var b=this,c=this._Exception;o(a)&&a.then(function(a){return t(b._url)||b._url===a._url||c.warn("The specified url: "+b._url+" does not match the original "+b.type+' with id: "'+b._id+'". The original url will be loaded.',c.TEMPLATE),b.__mapBindableTemplates(a),b.bindableTemplates.bind(b._id)}).then(function(a){var c=b.endNode;Z(c.parentNode,a,c)})["catch"](function(a){H(function(){c.warn("Problem resolving "+b.type+" url: "+a.response,c.TEMPLATE)})})},b.prototype.__mapBindableTemplates=function(a){var b=this.bindableTemplates;b.cache=a.bindableTemplates.cache,b.templates=a.bindableTemplates.templates},b._inject={_Promise:Pb,_templateCache:oc,_document:Tb},b}(q);a.Template=d,Hb.control(Qd,d);var e=function(a){function b(){a.apply(this,arguments)}return __extends(b,a),b.prototype.setTemplate=function(){this.innerTemplate=T(this.element.childNodes)},b.prototype.loaded=function(){this.element.appendChild(this.innerTemplate.cloneNode(!0))},b}(q);a.Ignore=e,Hb.control(Od,e);var f=function(a){function b(){var b=this;a.call(this),this.priority=120,this._aliases={index:wf.index,even:wf.even,odd:wf.odd,first:wf.first,last:wf.last},this._blockLength=0,this._addQueue=[],this._addCount=0,this.__listenerSet=!1,this.itemsLoaded=new this._Promise(function(a){b.__resolveFn=a})}return __extends(b,a),b.prototype.setTemplate=function(){this.bindableTemplates.add("item",this.element.childNodes)},b.prototype.contextChanged=function(a,b){var c=this;if(p(a))return p(b)||this._Promise.all(this._addQueue).then(function(){c._removeItems(0,c.controls.length)}),void(v(a)&&this._setListener());if(!v(a)){var d=this._Exception;return void d.warn(this.type+" context set to something other than an Array.",d.CONTEXT)}this._setListener(),this._executeEvent([{object:a||[],type:"splice"}])},b.prototype.loaded=function(){var a=this,b=this.options||(this.options={}),c=b.value||(b.value={}),d=this._animate=c.animate===!0,e=this.context;if(this._container=this.element,d&&(this._animationQueue=[]),v(e)){this._setAliases();var f=this._addQueue,g=e.length;this._addCount+=g,f.push(this._addItems(0,g,0).then(function(){a._addCount-=g,f.shift()})),this._setListener()}else if(!t(e)){var h=this._Exception;h.warn(this.type+" context set to something other than an Array.",h.CONTEXT)}},b.prototype.dispose=function(){this.__resolveFn=this._animationQueue=this._addQueue=null},b.prototype._setAliases=function(){var a=this.options.value.aliases;if(g(a))for(var b,c=this._aliases,d=Object.keys(c),e=d.length,f=0;e>f;++f)b=a[d[f]],m(b)&&(c[d[f]]=b)},b.prototype._addItems=function(a,b,c){for(var d=this,e=+(a+b),f=[],g=a;e>a;)f.push(this._bindItem(a++));return f.length>0&&(this.itemsLoaded=this._Promise.all(f).then(function(a){if(d._setBlockLength(a),c>0)for(var b=a.length,e=d._container,f=0;b>f;++f)c>f?d._appendAnimatedItem(a[f]):e.insertBefore(a[f],null);else d._appendItems(a);d._updateResource(g-1),s(d.__resolveFn)&&(d.__resolveFn(),d.__resolveFn=null)})["catch"](function(a){H(function(){var b=d._Exception;b.warn(a,b.BIND)})})),this.itemsLoaded},b.prototype._appendItems=function(a){T(a,this._container)},b.prototype._appendAnimatedItem=function(a){if(j(a)){var b=this._animationQueue;b.push({animation:this._animator.enter(a,Me,this._container).then(function(){b.shift()}),op:null})}},b.prototype._removeItems=function(a,b){for(var c=q.dispose,d=this.controls,e=a+b;e-->a;)c(d[e]);this._updateResource(d.length-1)},b.prototype._bindItem=function(a){return this.bindableTemplates.bind("item",a,this._getAliases(a))},b.prototype._setBlockLength=function(a){this._blockLength>0||0===a.length||(this._blockLength=a[0].childNodes.length)},b.prototype._updateResource=function(a){var b=this.controls;0>a||a>=b.length||b[a].resources.add(this._getAliases(a))},b.prototype._setListener=function(){this.__listenerSet||(this.observeArray(this._executeEvent),this.__listenerSet=!0)},b.prototype._executeEvent=function(a){var b="_"+a[0].type;s(this[b])&&this[b](a)},b.prototype._getAliases=function(a){var b=0===(1&a),c={},d=this._aliases,e=dg;return c[d.index]={value:a,type:e},c[d.even]={value:b,type:e},c[d.odd]={value:!b,type:e},c[d.first]={value:0===a,type:e},c[d.last]={value:a===this.context.length-1,type:e},c},b.prototype._push=function(a){var b=this,c=a[0],d=this._addQueue,e=c.addedCount;this._addCount+=e,d.push(this._addItems(c.index,e,this._animate?e:0).then(function(){b._addCount-=e,d.shift()}))},b.prototype._pop=function(a){var b=this,c=this._addQueue,d=a[0],e=d.object.length;if(0!==d.removed.length){var f=d.object.length;this._addCount>0&&(this._addCount-=1),this._Promise.all(c).then(function(){return b._animate?void b._animateItems(e,1,Ne,"leave",!1).then(function(){b._removeItems(f,1)}):void b._removeItems(f,1)})}},b.prototype._unshift=function(a){var b=this,c=a[0],d=c.addedCount,e=this._addQueue;if(this._animate){var f=this._animationQueue,g=f.length;this._animateItems(0,d,Me,null,g>0&&"clone"===f[g-1].op)}this._addCount+=d,e.push(this._addItems(c.object.length-d,d,0).then(function(){b._addCount-=d,e.shift()}))},b.prototype._shift=function(a){var b=this,c=this._addQueue,d=a[0];if(0!==d.removed.length){if(this._animate&&0===c.length){{this._animationQueue}c=c.concat([this._animateItems(0,1,Ne,"clone",!0)])}var e=d.object.length;this._addCount>0&&(this._addCount-=1),this._Promise.all(c).then(function(){b._removeItems(e,1)})}},b.prototype._splice=function(a){var b=this,c=a[0],d=c.addedCount,e=this._addQueue,f=this._animate;if(t(d)){f&&this._cancelCurrentAnimations();var g=c.object.length,h=this.controls.length+this._addCount,i=h-g;return void(g>h?(this._addCount-=i,e.push(this._addItems(h,-i,0).then(function(){b._addCount+=i,e.shift()}))):h>g&&(this._addCount>0&&(this._addCount-=i),this._Promise.all(e).then(function(){b._removeItems(h-i,i)})))}var j=c.removed.length,k=this._animationQueue;if(d>j){var l,m=(this._Promise,d-j);if(f){l=d;var n=k.length,o=c.index,p=this.controls.length+this._addCount;d-o>p&&(l=p-o),this._animateItems(o,l,Me,null,n>0&&"clone"===k[n-1].op),l=d-l}else l=0;this._addCount+=m,e.push(this._addItems(c.object.length-m,m,l).then(function(){b._addCount-=m,e.shift()}))}else if(j>d){var q=d>0;f&&!q&&0===e.length&&(e=e.concat([this._animateItems(c.index,j,Ne,"clone",!0)]));var r=this.controls.length+this._addCount,s=j-d;this._addCount>0&&(this._addCount-=s),this._Promise.all(e).then(function(){if(f&&q){var a=k.length;b._animateItems(c.index,d,Me,null,a>0&&"clone"===k[a-1].op)}b._removeItems(r-s,s)})}},b.prototype._calculateBlockLength=function(){return this._blockLength},b.prototype._animateItems=function(a,b,c,d,e){var f=this._calculateBlockLength();if(0===f)return this._Promise.resolve();var g=a*f;switch(d){case"clone":return this._handleClonedContainerAnimation(g,b*f+g,c,e===!0);case"leave":return this._handleLeave(g,b*f+g,c);default:return this._handleSimpleAnimation(g,b*f+g,c,e===!0)}},b.prototype._handleSimpleAnimation=function(a,b,c,d){var e=this._container,f=Array.prototype.slice,g=f.call(e.childNodes,a,b);if(0===g.length)return this._Promise.resolve();var h=this._animationQueue,i=this._animator.create(g,c),j=i.current.then(function(){h.shift()}),k=function(){return i.previous.then(function(){j.start()}),j};if(d&&h.length>0){var l=this._cancelCurrentAnimations().then(k);return h.push({animation:j,op:null}),l}return h.push({animation:j,op:null}),k()},b.prototype._handleLeave=function(a,b,c){var d=this._container,e=Array.prototype.slice,f=e.call(d.childNodes,a,b);if(0===f.length)return this._Promise.resolve();var g=this._animationQueue,h=this._animator.leave(f,c).then(function(){g.shift()});return g.push({animation:h,op:"leave"}),h},b.prototype._handleClonedContainerAnimation=function(a,b,c,d){var e=this._container,f=e.cloneNode(!0),g=Array.prototype.slice,h=g.call(f.childNodes,a,b);if(0===h.length)return this._Promise.resolve();var i,j=this._animationQueue,k=this._animator.create(h,c),l=k.current.then(function(){j.shift(),t(i)||i.replaceChild(e,f)}),m=function(){return i=e.parentNode,t(i)||l.isCanceled()?(j.shift(),l):(i.replaceChild(f,e),k.previous.then(function(){l.start()}),l)};if(d&&j.length>0){var n=this._cancelCurrentAnimations().then(m);return j.push({animation:l,op:"clone"}),n}return j.push({animation:l,op:"clone"}),m()},b.prototype._cancelCurrentAnimations=function(){for(var a=this._animationQueue,b=[],c=a.length,d=0;c>d;++d)b.push(a[d].animation.cancel());return this._Promise.all(b)},b._inject={_animator:pc,_Promise:Pb},b}(q);a.ForEach=f,Hb.control(Ld,f);var h=function(a){function b(){a.apply(this,arguments),this.replaceWith=Zd}return __extends(b,a),b.prototype.initialize=function(){var a=this;this.on(Be,function(){a._removeAllElements()})},b.prototype.setTemplate=function(){var a=$d,b=_d,c=de,d=be,e=je,f=ce,g=ae,h=le,i=ne,j=me,k=oe;this._titleElement=this._createElement(b),this._ogTitleElement=this._createElement(a,i+b),this._twitterTitleElement=this._createElement(a,k+b),this._descriptionElement=this._createElement(a,g),this._ogDescriptionElement=this._createElement(a,i+g),this._twitterDescriptionElement=this._createElement(a,k+g),this._ogUrlElement=this._createElement(a,i+h),this._twitterUrlElement=this._createElement(a,k+h),this._authorElement=this._createElement(a,d),this._googleAuthorElement=this._createElement(c,d),this._fbAuthorElement=this._createElement(a,j+d),this._twitterCreatorElement=this._createElement(a,k+f),this._ogTypeElement=this._createElement(a,i+e)},b.prototype.title=function(a){return m(a)?(this._titleElement.innerText=a,this._setContent([this._ogTitleElement,this._twitterTitleElement],a),a):this._getContent(this._titleElement)},b.prototype.description=function(a){return m(a)?(this._setContent([this._descriptionElement,this._ogDescriptionElement,this._twitterDescriptionElement],a),a):this._getContent(this._descriptionElement)},b.prototype.url=function(a){return m(a)?(this._setContent([this._ogUrlElement,this._twitterUrlElement],a),a):this._getContent(this._ogUrlElement)},b.prototype.author=function(a){return m(a)?(this._setContent([this._authorElement],a),a):this._getContent(this._authorElement)},b.prototype.googleAuthor=function(a){return m(a)?(this._setContent([this._googleAuthorElement],a),a):this._getContent(this._googleAuthorElement)},b.prototype.fbAuthor=function(a){return m(a)?(this._setContent([this._fbAuthorElement],a),a):this._getContent(this._fbAuthorElement)},b.prototype.twitterCreator=function(a){return m(a)?(this._setContent([this._twitterCreatorElement],a),a):this._getContent(this._twitterCreatorElement)},b.prototype.fbType=function(a){return m(a)?(this._setContent([this._ogTypeElement],a),a):this._getContent(this._ogTypeElement)},b.prototype.images=function(a){var b=this;if(v(a)){var c,d,e=$d,f=ne,g=oe;A(function(a){c=b._createElement(e,f+he),d=b._createElement(e,g+he),a=b._browser.urlUtils(a).href,b._setContent([c,d],a)},a)}},b.prototype.videos=function(a){var b=this;if(v(a)){var c,d=$d,e=ne;A(function(a){c=b._createElement(d,e+ie),a=b._browser.urlUtils(a).href,b._setContent([c],a)},a)}},b.prototype.loaded=function(){this.url(this._browser.url())},b.prototype.navigated=function(a){this.url(a)},b.prototype._getContent=function(a){var b=a.nodeName.toLowerCase();return b===_d?a.innerText:b===$d?a.getAttribute(pe):b===de?a.getAttribute(ee):void 0},b.prototype._setContent=function(a,b){for(var c,d,e=Array.prototype.slice.call(this.element.children),f=(a.length,pe),g=ee,h=this.element,i=this._titleElement.nextSibling,j=this.dom,k=0;k<a.length;++k)d=a[k],c=d.nodeName.toLowerCase(),c===$d?d.setAttribute(f,b):d.setAttribute(g,b),-1===e.indexOf(d)&&j.insertBefore(h,d,i)},b.prototype._createElement=function(a,b){var c,d=m(b),e=!d||0!==b.indexOf(ne)&&0!==b.indexOf(me)?fe:ge,f=this.element;return a===de&&(e=ke),c=f.querySelector(d?a+"["+e+'="'+b+'"]':a),j(c)||(c=this._document.createElement(a)),d&&c.setAttribute(e,b),c},b.prototype._removeAllElements=function(){var a=Array.prototype.slice,b=this._document.head.querySelectorAll("meta["+ge+'^="'+ne+'"]'),c=this._document.head.querySelectorAll("meta["+fe+'^="'+oe+'"]');this._removeElements.apply(this,[this._descriptionElement,this._authorElement,this._googleAuthorElement].concat(a.call(b),a.call(c)))},b.prototype._removeElements=function(){for(var a=[],b=0;b<arguments.length;b++)a[b-0]=arguments[b];for(var c,d=this.element,e=Array.prototype.slice.call(d.children),f=a.length,g=0;f>g;++g)c=a[g],-1!==e.indexOf(c)&&d.removeChild(c)},b._inject={_document:Tb,_browser:Cc},b}(plat.ui.TemplateControl);a.Head=h;var i=function(a){function b(){a.apply(this,arguments)}return __extends(b,a),b.prototype.contextChanged=function(){this.loaded()},b.prototype.loaded=function(){var a=this.context;m(a)&&Y(this.element,a)},b}(q);a.Html=i,Hb.control(Md,i);var k=function(a){function b(){var b=this;a.call(this),this.replaceWith="select",this.priority=120,this.groups={},this.itemsLoaded=new this._Promise(function(a){b.__resolveFn=a})}return __extends(b,a),b.prototype.setTemplate=function(){this.bindableTemplates.add("option",this.element.childNodes);var a=this.options||{},b=a.value||{},c=b["default"];if(g(c)){var d=this._document.createElement("option"),e=c.value,f=c.textContent;d.value=u(e)?f:e,d.textContent=u(f)?e:f,this.element.insertBefore(d,null)}if(t(b.group))this._isGrouped=!1;else{var h=this._group=b.group,i=this._document.createElement("optgroup");i.label=Df+h+Ef,this.bindableTemplates.add("group",i),this._isGrouped=!0}},b.prototype.contextChanged=function(a,b){var c=this;if(p(a))return void(p(b)||this.itemsLoaded.then(function(){c._removeItems(c.controls.length)}));if(!v(a)){var d=this._Exception;return void d.warn(this.type+" context set to something other than an Array.",d.CONTEXT)}var e=v(a)?a.length:0,f=v(b)?b.length:0;this._setListener(),e>f?this._addItems(e-f,f):f>e&&this._removeItems(f-e)},b.prototype.loaded=function(){if(u(this._isGrouped)){var a=this.options||{},b=a.value||{};this._isGrouped=!t(this._group=b.group)}this._defaultOption=this.element.firstElementChild;var c=this.context;if(!v(c)){var d=this._Exception;return void d.warn(this.type+" context set to something other than an Array.",d.CONTEXT)}this._addItems(c.length,0),this._setListener()},b.prototype.dispose=function(){a.prototype.dispose.call(this),this.__resolveFn=null,this._defaultOption=null},b.prototype.observeProperties=function(a){var b,c=this.element;this._binder=a,c.multiple?(b=this._setSelectedIndices.bind(this),t(a.evaluate())&&this.inputChanged([]),a.observeProperty(function(){b(a.evaluate(),null,null)},null,!0)):b=this._setSelectedIndex.bind(this),a.observeProperty(b),this.addEventListener(c,"change",this._observeChange,!1)},b.prototype._setSelectedIndex=function(a,b,c,d){var e=this,f=this.element,g=f.value;if(t(a))return d!==!0&&this._document.body.contains(f)?void(f.selectedIndex=-1):void this.itemsLoaded.then(function(){t(e._binder.evaluate())&&e.inputChanged(f.value)});if(m(a)){if(g===a)return;if(!this._document.body.contains(f))return f.value=a,void(f.value!==a&&(f.value=g,this.inputChanged(f.value)))}else{var h,i=this._Exception;r(a)?(a=a.toString(),h="Trying to bind a value of type number to a "+this.type+"'s element. The value will implicitly be converted to type string."):h="Trying to bind a value that is not a string to a "+this.type+"'s element. The element's selected index will be set to -1.",i.warn(h,i.BIND)}this.itemsLoaded.then(function(){f.value=a,(f.value!==a||-1===f.selectedIndex)&&(f.selectedIndex=-1)})},b.prototype._setSelectedIndices=function(a,b,c,d){var e,f=this,g=this.element,h=g.options,i=t(h)?0:h.length,j=t(a);this.itemsLoaded.then(function(){if(!j&&v(a))for(var b,c;i-->0;)e=h[i],b=e.value,c=Number(b),e.selected=-1!==a.indexOf(b)||r(c)&&-1!==a.indexOf(c)?!0:!1;else for(d===!0&&t(f._binder.evaluate())&&f.inputChanged(f._getSelectedValues());i-->0;){if(e=h[i],!j&&e.value===""+a)return void(e.selected=!0);e.selected=!1}})},b.prototype._observeChange=function(){var a=this.element;this.inputChanged(a.multiple?this._getSelectedValues():a.value)},b.prototype._getSelectedValues=function(){for(var a,b=this.element.options,c=b.length,d=[],e=0;c>e;++e)a=b[e],a.selected&&d.push(a.value);return d},b.prototype._setListener=function(){this.__listenerSet||(this.observeArray(this._executeEvent),this.__listenerSet=!0)},b.prototype._executeEvent=function(a){var b="_"+a[0].type;s(this[b])&&this[b](a)},b.prototype._addItems=function(a,b){for(var c=this,d=this.bindableTemplates,e=[],f=this._insertOption;a-->0;)e.push(d.bind("option",b).then(f.bind(this,b++)));return e.length>0?this.itemsLoaded=this._Promise.all(e).then(function(){s(c.__resolveFn)&&(c.__resolveFn(),c.__resolveFn=null)}):(s(this.__resolveFn)&&(this.__resolveFn(),this.__resolveFn=null),this.itemsLoaded=new this._Promise(function(a){c.__resolveFn=a})),this.itemsLoaded},b.prototype._insertOption=function(a,b){var c=this.element;if(this._isGrouped){var d=this.groups,e=(this.context[a]||{})[this._group],f=d[e];return t(f)?d[e]=this.bindableTemplates.bind("group",a).then(function(a){return f=d[e]=a.childNodes[1],f.insertBefore(b,null),c.insertBefore(a,null),f}):o(f)?f.then(function(a){a.insertBefore(b,null)}):(f.insertBefore(b,null),this._Promise.resolve())}return c.insertBefore(b,null),this._Promise.resolve()},b.prototype._removeItems=function(a){for(var b=q.dispose,c=this.controls;a-->0;)b(c.pop())},b.prototype._removeItem=function(){return this._isGrouped?void this._resetSelect():void this._removeItems(1)},b.prototype._resetSelect=function(){this._removeItems(this.controls.length),this.groups={},t(this._defaultOption)||this.element.insertBefore(this._defaultOption.cloneNode(!0),null),this._addItems(this.context.length,0)},b.prototype._push=function(a){var b=a[0];this._addItems(b.addedCount,b.index)},b.prototype._pop=function(a){var b=this;0!==a[0].removed.length&&this.itemsLoaded.then(function(){b._removeItem()})},b.prototype._unshift=function(a){if(this._isGrouped)return void this._resetSelect();var b=a[0],c=b.addedCount;this._addItems(c,b.object.length-c-1)},b.prototype._shift=function(a){var b=this;0!==a[0].removed.length&&this.itemsLoaded.then(function(){b._removeItem()})},b.prototype._splice=function(a){var b=this;if(this._isGrouped)return void this._resetSelect();var c=a[0],d=c.addedCount,e=c.removed.length;d>e?this._addItems(d-e,c.object.length-d-1):e>d&&this.itemsLoaded.then(function(){b._removeItems(e-d)})},b.prototype._sort=function(){this._isGrouped&&this._resetSelect()},b.prototype._reverse=function(){this._isGrouped&&this._resetSelect()},b._inject={_Promise:Pb,_document:Tb},b}(x);a.Select=k,Hb.control(Pd,k);var l=function(a){function c(){a.call(this),this.__condition=!0,this.__firstTime=!0;var b=this._document;this.commentNode=b.createComment(Nd+Mf+"placeholder"),this.fragmentStore=b.createDocumentFragment()}return __extends(c,a),c.prototype.contextChanged=function(){var a=this.options.value;if(!p(a))return this._setter(a)},c.prototype.setTemplate=function(){this.bindableTemplates.add("template",Array.prototype.slice.call(this.element.childNodes))},c.prototype.loaded=function(){if(t(this.options)){var a=this._Exception;a.warn("No condition specified in "+cd+" for "+this.type+".",a.BIND),this.options={value:{condition:!0},observe:b}}var c=this.contextChanged();return this.__removeListener=this.options.observe(this._setter),c},c.prototype.dispose=function(){s(this.__removeListener)&&(this.__removeListener(),this.__removeListener=null),this.commentNode=null,this.fragmentStore=null},c.prototype._setter=function(a){var b,c=this,d=!!a.condition;return d!==this.__condition||this.__firstTime?(d?b=t(this.__leaveAnimation)?this._addItem():this.__leaveAnimation.cancel().then(function(){return c.__leaveAnimation=null,c._addItem()}):t(this.__enterAnimation)?(this._removeItem(),b=this._Promise.resolve(null)):b=this.__enterAnimation.cancel().then(function(){return c.__enterAnimation=null,c._removeItem()}),this.__condition=d,b):this._Promise.resolve(null)},c.prototype._addItem=function(){var a=this;return j(this.commentNode.parentNode)||this.__firstTime?this.__firstTime?(this.__firstTime=!1,this.__initialBind=this.bindableTemplates.bind("template").then(function(b){var c=a.element;return a.__initialBind=null,c.parentNode===a.fragmentStore?(c.insertBefore(b,null),a._animateEntrance()):(a.__enterAnimation=a._animator.animate(c,Me),c.insertBefore(b,null),a.__enterAnimation)}).then(function(){a.__enterAnimation=null}),this.__initialBind):o(this.__initialBind)?this.__initialBind.then(function(){return a._animateEntrance()}):this._animateEntrance():this._Promise.resolve(null)},c.prototype._animateEntrance=function(){var a=this,c=this.commentNode,d=c.parentNode;return j(d)?this.__enterAnimation=this._animator.enter(this.element,Me,d,c).then(function(){a.__enterAnimation=null}):this._animator.resolve().then(b)},c.prototype._removeItem=function(){var a=this;return o(this.__initialBind)?this.__initialBind.then(function(){return a._animateLeave()}):this._animateLeave()},c.prototype._animateLeave=function(){var a=this,c=this.element,d=c.parentElement,e=c.nextSibling;return j(d)?this.__leaveAnimation=this._animator.leave(c,Ne).then(function(){a.__leaveAnimation=null,d.insertBefore(a.commentNode,e),a.fragmentStore.insertBefore(c,null)}):this._animator.resolve().then(b)},c._inject={_animator:pc,_Promise:Pb,_document:Tb},c}(q);a.If=l,Hb.control(Nd,l);var n=function(a){function b(){a.apply(this,arguments),this.replaceWith="a",this._router=this._Router.currentRouter()}return __extends(b,a),b.prototype.initialize=function(){this._removeClickListener=this.dom.addEventListener(this.element,"click",this._handleClick,!1)},b.prototype.loaded=function(){var a=this.options,b=this.setHref.bind(this);
if(!g(a)){var c=this._Exception;return c.warn("No options specified for "+this.type+". Please send in options of type plat.ui.controls.ILinkOptions.",c.CONTROL),a=this.options={},a.value={view:""},void this.setHref()}g(a.value)||(a.value={view:""}),this.addEventListener(this.element,Se,this._handleTap,!1),b(),a.observe(b)},b.prototype.setHref=function(){var a=this.getHref();if(!p(a)){var b=this.element;b.href=a}},b.prototype.getHref=function(){if(!t(this._router)){var a=this.options.value,b=a.view;if(a.isUrl!==!0){var c=a.parameters,d=a.query;if(p(b))return b;b=this._router.generate(b,c,d)}return this._browser.formatUrl(b)}},b.prototype._handleClick=function(a){var b;if(r(a.buttons))b=0===a.buttons?1:a.buttons;else if(r(a.which)&&a.which>0)b=a.which;else switch(a.button){case-1:b=0;break;case 0:b=1;break;case 1:b=4;break;case 2:b=2;break;case 3:b=8;break;case 4:b=16;break;default:b=1}1===b&&a.preventDefault()},b.prototype._handleTap=function(a){var b=this;if(1===a.buttons){var c=this.getHref();u(c)||(a.preventDefault(),K(function(){b._browser.url(c)}))}},b.prototype.dispose=function(){I(this._removeClickListener,3e3)},b._inject={_Router:Fc,_Injector:Tc,_browser:Cc},b}(q);a.Link=n,Hb.control(Kd,n)}(N=a.controls||(a.controls={}))}(bh=a.ui||(a.ui={}));var ch;!function(a){function c(a,b,c,d,e){return i._markupRegex=a.markupRegex,i._newLineRegex=a.newLineRegex,i._ContextManager=b,i._parser=c,i._TemplateControlFactory=d,i._Exception=e,i}function d(a,b,c,d,e,f){return k._document=a,k._managerCache=b,k._ResourcesFactory=c,k._AttributesFactory=d,k._BindableTemplatesFactory=e,k._Exception=f,k}function e(){return l}function f(){return n}var h=function(){function a(){}return a.prototype.compile=function(a,b){var c,d,e,f=a.childNodes,g=!t(b),h=g?this._managerCache.read(b.uid):null,i=this._ElementManagerFactory.create;if(f=u(f)?s(a.push)?a:Array.prototype.slice.call(a):Array.prototype.slice.call(f),t(h)){c=f.length;for(var j=0;c>j;++j)e=f[j],e.nodeType===Node.ELEMENT_NODE&&(t(i(e))||this.compile(e)),d=f.length,j+=d-c,c=d}else this._compileNodes(f,h)},a.prototype._compileNodes=function(a,b){for(var c,d,e,f=a.length,g=this._ElementManagerFactory.create,h=this._CommentManagerFactory.create,i=this._TextManagerFactory.create,j=0;f>j;++j){switch(c=a[j],c.nodeType){case Node.ELEMENT_NODE:d=g(c,b),t(d)||this._compileNodes(Array.prototype.slice.call(c.childNodes),d);break;case Node.TEXT_NODE:i(c,b);break;case Node.COMMENT_NODE:h(c,b)}e=a.length,j+=e-f,f=e}},a._inject={_ElementManagerFactory:hc,_TextManagerFactory:kc,_CommentManagerFactory:fc,_managerCache:nc},a}();a.Compiler=h,Hb.injectable(ec,h);var i=function(){function a(){this.isClone=!1}return a.hasMarkup=function(b){return a._markupRegex.test(b)},a.findMarkup=function(b){var c,d,e,f,g=[],h=a._wrapExpression,i=a._parser;for(b=b.replace(a._newLineRegex,"");-1!==(c=b.indexOf(Df))&&-1!==(d=b.indexOf(Ef));){for(0!==c&&g.push(h(b.slice(0,c)));"}"===b[++d];);e=b.slice(c+2,d-2),"="===e[0]?(f=i.parse(e.slice(1).trim()),f.oneTime=!0,g.push(f)):g.push(i.parse(e.trim())),b=b.slice(d)}return c>-1&&d>=0?g.push(h(b.slice(d))):""!==b&&g.push(h(b)),g},a.build=function(b,c){for(var d,e,f="",h=b.length,i={},j=a._TemplateControlFactory.evaluateExpression,k=0;h>k;++k)if(d=b[k],e=j(d,c,i),g(e))try{f+=JSON.stringify(e,null,4)}catch(l){t(l.description)||(l.description="Cannot stringify object: "+l.description),l.message="Cannot stringify object: "+l.message;var m=a._Exception;m.warn(l,m.PARSE)}else t(e)||(f+=e);return f},a.observeExpressions=function(b,c,d){for(var e,f,g,h,i,j,k=a.__findUniqueIdentifiers(b),l=k.identifiers,m=k.oneTimeIdentifiers,n={listener:d,uid:c.uid};l.length>0;)f=a.__getObservationDetails(l.pop(),c),g=f.manager,t(g)||g.observe(f.absoluteIdentifier,n);for(;m.length>0;)e=m.pop(),f=a.__getObservationDetails(e,c),g=f.manager,t(g)||f.isDefined||(h=f.absoluteIdentifier,i=g.observe(h,n),j=g.observe(h,{uid:c.uid,listener:function(){i(),j()}}))},a._wrapExpression=function(a){return{evaluate:function(){return a},identifiers:[],aliases:[],expression:a}},a.__findUniqueIdentifiers=function(a){var b,c=a.length;if(1===c)return b=a[0],b.oneTime?{identifiers:[],oneTimeIdentifiers:b.identifiers.slice(0)}:{identifiers:b.identifiers.slice(0),oneTimeIdentifiers:[]};for(var d,e,f,g,h,i={},j={},k=[],l=[],m=0;c>m;++m)for(b=a[m],h=b.oneTime,d=b.identifiers,g=d.length,f=0;g>f;++f)if(e=d[f],h){if(i[e]===!0)continue;j[e]||(j[e]=!0,l.push(e))}else i[e]||(i[e]=!0,k.push(e)),j[e]===!0&&(j[e]=!1,l.splice(l.indexOf(e),1));return{identifiers:k,oneTimeIdentifiers:l}},a.__getObservationDetails=function(b,c){var d,e=a._ContextManager,f=b.split("."),g="",h=!1;if("@"===b[0]){var i,j={},k=f.shift(),l=k.slice(1);if(f.length>0&&(g="."+f.join(".")),i=j[l],t(i)&&(i=j[l]=c.findResource(l)),!t(i)&&!t(i.resource)){var m=i.resource.type;l===hg?(d=e.getManager(_g.getRootControl(c)),g=c.absoluteContextPath+g):l===fg?(d=e.getManager(j[l].control),g="context"+g):(m===_f||m===dg)&&(d=e.getManager(j[l].control),g="resources."+l+".value"+g)}}else h=!u(e.getContext(c.context,f)),h||u(e.getContext(c,f))?(d=e.getManager(_g.getRootControl(c)),g=c.absoluteContextPath+"."+b):d=null;return{absoluteIdentifier:g,manager:d,isDefined:h}},a.prototype.initialize=function(a,b){this.nodeMap=a,this.parent=b,t(b)||(this.isClone=b.isClone,b.children.push(this))},a.prototype.getParentControl=function(){for(var a,b=this.parent;t(a)&&!t(b);)a=b.getUiControl(),b=b.parent;return a},a.prototype.clone=function(){return 1},a.prototype.bind=function(){},a}();a.NodeManager=i,a.INodeManagerStatic=c,Hb.injectable(jc,c,[_b,cc,$b,zc],Ff);var k=function(a){function b(){a.apply(this,arguments),this.children=[],this.type="element",this.replace=!1,this.hasOwnContext=!1}return __extends(b,a),b.create=function(a,c){var d,e=a.nodeName.toLowerCase(),f=e,g=Dg[e]||Eg[e],h=!0,i=!1;if(t(g)&&(a.hasAttribute(Sd)?(e=a.getAttribute(Sd).toLowerCase(),g=Dg[e]||Eg[e],h=!1):a.hasAttribute(Xd+Sd)&&(e=a.getAttribute(Xd+Sd).toLowerCase(),g=Dg[e]||Eg[e],h=!1)),!t(g)){var j=g.inject(),k=b.locateResources(a);d={control:j,resourceElement:k,nodeName:e,expressions:[],injector:g},i=!0,h&&a.setAttribute(Sd,e);var l=j.replaceWith,m="any"===l&&h;if(!p(l)&&("any"!==l||m)&&l.toLowerCase()!==f){m&&(l="div");var n=b._document.createElement(l);n.nodeType===Node.ELEMENT_NODE&&(a=_(a,n))}}var o=b._collectAttributes(a.attributes),q=b.getInstance();return o.element=a,o.uiControlNode=d,q.initialize(o,c),o.hasControl||i?(q.setUiControlTemplate(),i?null:q):(q.bind=function(){return[]},q)},b.locateResources=function(a){for(var b,c,d=Array.prototype.slice.call(a.childNodes);d.length>0;)if(b=d.shift(),c=b.nodeName.toLowerCase(),c===Ud||c==="x-"+Ud)return a.removeChild(b);return null},b.clone=function(a,c,d,e,f){t(f)&&(f=b._cloneNodeMap(a.nodeMap,d,c.getUiControl()||c.getParentControl(),e));var g=b.getInstance(),h=!t(e);return g.nodeMap=f,g.parent=c,t(c)||c.children.push(g),g.replace=a.replace,g.replaceNodeLength=a.replaceNodeLength,g.hasOwnContext=a.hasOwnContext,g.isClone=!0,f.hasControl||h||(g.bind=function(){return[]}),h&&b._managerCache.put(e.uid,g),g},b.cloneUiControl=function(a,c){var d=a.uiControlNode;if(!t(d)&&!t(d.injector)){var e=d.control,f=d.injector.inject(),g=b._ResourcesFactory.getInstance(),h=b._AttributesFactory.getInstance();return f.parent=c,c.controls.push(f),f.controls=[],h.initialize(f,a.attributes),f.attributes=h,g.initialize(f,e.resources),f.resources=g,b._ResourcesFactory.addControlResources(f),t(e.innerTemplate)||(f.innerTemplate=e.innerTemplate.cloneNode(!0)),f.type=e.type,f.bindableTemplates=b._BindableTemplatesFactory.create(f,e.bindableTemplates),f.replaceWith=e.replaceWith,f}},b.createAttributeControls=function(a,c,d,e,f){var g,h=a.nodes,i=f===!0?e:a.element;if(j(i)){if(i.nodeType===Node.DOCUMENT_FRAGMENT_NODE)return f===!0?b._copyAttributeNodes(h):[];g=i.attributes}var k,l,n,o,p,q,u=a.attributes,v=[],w=h.length;for(q=0;w>q;++q)l=h[q],p=l.nodeName,n=l.injector,o=null,t(n)||(o=n.inject(),l.control=o,o.parent=c,o.element=i,k=b._AttributesFactory.getInstance(),k.initialize(o,u),o.attributes=k,o.type=p,m(o.uid)||(o.uid=L(Wc)),o.templateControl=d),f===!0&&(v.push({control:o,expressions:l.expressions,node:g?g.getNamedItem(p)||g.getNamedItem(Xd+p):null,nodeName:p,injector:n}),t(o)||(t(c)||c.controls.push(o),s(o.initialize)&&o.initialize()));if(!f)for(h.sort(function(a,b){var c=a.control,d=b.control;if(t(c))return 1;if(t(d))return-1;var e=r(c.priority)?c.priority:0,f=r(d.priority)?d.priority:0;return f-e}),q=0;w>q;++q)l=h[q],o=l.control,t(o)||(t(c)||c.controls.push(o),s(o.initialize)&&o.initialize());return v},b.getInstance=function(){var a=new b;return a._Promise=lb(Pb),a._ContextManager=i._ContextManager,a._compiler=lb(ec),a._CommentManagerFactory=lb(fc),a._ControlFactory=lb(Rb),a._TemplateControlFactory=i._TemplateControlFactory,a._BindableTemplatesFactory=b._BindableTemplatesFactory,a._Exception=b._Exception,a},b._collectAttributes=function(a){for(var c,d,e,f,g,h,j,k,l=[],m=i.hasMarkup,n=i.findMarkup,o=i._parser,p=(i.build,!1),q=a.length,r={},s=0;q>s;++s){if(c=a[s],e=c.value,d=c.name.replace(/^data-/i,"").toLowerCase(),k=Dg[d]||Eg[d],d===Vd){if(""!==e){if(f=o.parse(e),1!==f.identifiers.length){var u=b._Exception;u.warn("Incorrect "+Vd+": "+e+", must contain a single identifier.",u.COMPILE)}g=f.identifiers[0]}}else d!==Sd&&(h=m(e),j=h?n(e):[],p||!h&&t(k)||(p=!0),l.push({control:null,node:c,nodeName:d,expressions:j,injector:k}));r[M(d)]=e}return{element:null,attributes:r,nodes:l,childContext:g,hasControl:p}},b._copyAttributeNodes=function(a){for(var b,c=[],d=a.length,e=0;d>e;++e)b=a[e],c.push({expressions:b.expressions,nodeName:b.nodeName});return c},b._cloneNode=function(a,b,c){return{control:c,injector:a.injector,expressions:a.expressions,node:b,nodeName:a.nodeName}},b._cloneNodeMap=function(a,c,d,e){var f=a.hasControl,g={attributes:a.attributes,childContext:a.childContext,nodes:[],element:c,uiControlNode:t(a.uiControlNode)?null:b._cloneNode(a.uiControlNode,c,e),hasControl:f};return f&&(g.nodes=b.createAttributeControls(a,d,e,c,!0)),g},b.prototype.clone=function(a,c,d){var e,f,g,h,i=this.replace,j=this.children,k=t(d)?null:d.uiControlNode.control,l=!t(k);if(l||(k=b.cloneUiControl(this.nodeMap,c.getUiControl()||c.getParentControl()),l=!t(k)),i){var m=a.parentNode.childNodes,n=Array.prototype,o=n.indexOf.call(m,a);e=n.slice.call(m,o+1,o+this.replaceNodeLength),f=b.clone(this,c,null,k,d),k.elementNodes=e,k.startNode=a,k.endNode=e.pop(),g=j.shift(),h=j.shift(),g.clone(k.startNode,f),h.clone(k.endNode,f),s(k.initialize)&&k.initialize()}else e=Array.prototype.slice.call(a.childNodes),f=b.clone(this,c,a,k,d),d=f.nodeMap,l&&(k.element=a,s(k.initialize)&&k.initialize());for(var p=j.length,q=0,r=0;p>r;++r)q+=j[r].clone(e[q],f);return i?(j.unshift(h),j.unshift(g),q+2):1},b.prototype.initialize=function(c,d,e){a.prototype.initialize.call(this,c,d);var f,g=c.uiControlNode,h=!t(g);h&&(this._populateUiControl(),f=g.control,this.hasOwnContext=f.hasOwnContext),c.hasControl&&b.createAttributeControls(c,this.getParentControl(),f),!e&&h&&s(f.initialize)&&f.initialize()},b.prototype.bind=function(){var a=this,b=this.nodeMap,c=this.getParentControl(),d=b.uiControlNode,e=[];if(!t(d)){var f,h=d.control,i=b.childContext,j=this._ContextManager.getManager,k=t(c)?Jb:c.absoluteContextPath,l=this._TemplateControlFactory,m=!h.hasOwnContext;if(e.push(h),m&&!t(i))if("@"===i[0]){var n=i.split("."),o=n.shift(),p=o.slice(1),q=l.findResource(h,p),r=this._Exception;if(g(q)){var s=q.resource;i=n.length>0?"."+n.join("."):"",p===hg?k+=i:p===fg?k=Jb+i:s.type===_f||s.type===dg?(k="resources."+p+".value"+i,h.root=q.control):r.warn('Only resources of type "observable" can be set as context.',r.CONTEXT)}else r.warn("Could not set the context of "+h.type+' with the resource specified as "'+i+'".',r.CONTEXT)}else k+="."+i;g(h.root)||(h.root=this._ControlFactory.getRootControl(h)||h),f=j(h.root);var v=!1;m?(h.context=f.getContext(k.split("."),!1),v=u(h.context)&&!this._BindableTemplatesFactory.isBoundControl(h)):k=Jb,v?this.contextPromise=new this._Promise(function(b){var c=f.observe(k,{uid:h.uid,listener:function(d){u(d)||(c(),h.context=d,a._beforeLoad(h,k),b())}})}):this._beforeLoad(h,k)}return this._observeControlIdentifiers(b.nodes,c,e,b.element),e},b.prototype.setUiControlTemplate=function(a){var b=this,c=this.nodeMap.uiControlNode;if(!t(c)){var d=c.control;return void(this.templatePromise=this._TemplateControlFactory.determineTemplate(d,a).then(function(a){b.templatePromise=null,b._initializeControl(d,a.cloneNode(!0))},function(a){if(b.templatePromise=null,t(a)){var c=a;b._BindableTemplatesFactory.isBoundControl(d)&&(c=T(d.element.childNodes)),b._initializeControl(d,c)}else H(function(){var c=b._Exception;c.fatal(a,c.COMPILE)})}))}t(this.parent)&&this.bindAndLoad()},b.prototype.getUiControl=function(){var a=this.nodeMap.uiControlNode;if(!t(a))return a.control},b.prototype.fulfillTemplate=function(){var a=this;return t(this.templatePromise)?this._fulfillChildTemplates():this.templatePromise.then(function(){return a._fulfillChildTemplates()})},b.prototype.fulfillAndLoad=function(){var a=this;return this.fulfillTemplate().then(function(){return a.bindAndLoad()})["catch"](function(b){H(function(){var c=a._Exception;c.fatal(b,c.BIND)})})},b.prototype.bindAndLoad=function(){var a,b=this,c=this.bind();return a=o(this.contextPromise)?this.contextPromise.then(function(){return b._bindChildren()}):this._bindChildren(),a.then(function(){return b._loadControls(c,b.getUiControl())})["catch"](function(a){H(function(){var c=b._Exception;c.fatal(a,c.BIND)})})},b.prototype.observeRootContext=function(a,b){var c=this;return b=b.bind(this),t(a.context)?new this._Promise(function(d){var e=c._ContextManager.getManager(a).observe(Jb,{listener:function(){e(),b().then(d)},uid:a.uid})})["catch"](function(a){H(function(){var b=c._Exception;b.fatal(a,b.BIND)})}):b()},b.prototype._beforeLoad=function(a,c){var d=this._ContextManager.getManager(a.root),e=this._TemplateControlFactory;a.zCC__plat=d.observe(c,{uid:a.uid,priority:Cf,listener:function(b){a.context=b}}),e.setAbsoluteContextPath(a,c),e.setContextResources(a),b._ResourcesFactory.bindResources(a.resources)},b.prototype._bindChildren=function(){for(var a,b=this.children,c=b.length,d=[],e=0;c>e;++e)a=b[e],a.hasOwnContext?d.push(this.isClone?a.observeRootContext(a.getUiControl(),a.bindAndLoad):a.observeRootContext(a.getUiControl(),a.fulfillAndLoad)):u(a.children)?a.bind():d.push(a.bindAndLoad());return this._Promise.all(d)},b.prototype._loadControls=function(a,b){var c,d,e,f,g=a.length,h=this._ControlFactory.load,i=t(b);if(i)f=0;else{var j=b.priority;e=r(j)?j:100,f=1}for(;g>f;++f)c=a[f],c.templateControl=b,!i&&e>c.priority&&(i=!0,d=h(b)),h(c);return i||(d=h(b)),d},b.prototype._populateUiControl=function(){var a=this.nodeMap,c=this.getParentControl(),d=a.uiControlNode,e=d.control,f=e.uid,h=e.resources,i=a.element,j=Array.prototype.slice.call(i.childNodes),k=b._AttributesFactory.getInstance(),l=this.replace=null===e.replaceWith||""===e.replaceWith;m(f)||(f=e.uid=L(Wc)),b._managerCache.put(f,this),t(c)||e.parent===c||(c.controls.push(e),e.parent=c),s(i.setAttribute)&&i.setAttribute(Ie,""),e.element=i,e.controls=[],k.initialize(e,a.attributes),e.attributes=k,g(h)&&s(h.add)?h.add(d.resourceElement):(h=b._ResourcesFactory.getInstance(),h.initialize(e,d.resourceElement),e.resources=h),b._ResourcesFactory.addControlResources(e),e.type=d.nodeName,e.bindableTemplates=e.bindableTemplates||this._BindableTemplatesFactory.create(e),!(j.length>0)||p(e.templateString)&&p(e.templateUrl)||(e.innerTemplate=T(j)),l&&this._replaceElement(e,a)},b.prototype._replaceElement=function(a,c){var d=c.element,e=d.parentNode,f=b._document,g=a.type,h=a.uid,i=a.startNode=f.createComment(g+" "+h+Of),j=a.endNode=f.createComment(g+" "+h+Pf),k=this._CommentManagerFactory.create;k(i,this),k(j,this),e.insertBefore(i,d),e.insertBefore(j,d.nextSibling),a.elementNodes=$(d),a.element=c.element=null},b.prototype._initializeControl=function(a,c){var d,e=this.nodeMap.element,f=this.replace;if(!t(c)){var g=b.locateResources(c);t(g)||a.resources.add(b._ResourcesFactory.parseElement(g)),f?(d=a.endNode,a.elementNodes=Array.prototype.slice.call(c.childNodes),Z(d.parentNode,c,d)):Z(e,c,e.lastChild)}if(s(a.setTemplate)&&a.setTemplate(),f){this._compiler.compile(a.elementNodes,a);var h=a.startNode,i=h.parentNode,j=Array.prototype.slice.call(i.childNodes);d=a.endNode,a.elementNodes=j.slice(j.indexOf(h)+1,j.indexOf(d)),this.replaceNodeLength=a.elementNodes.length+2}else this._compiler.compile(e,a);t(a.parent)&&this.fulfillAndLoad()},b.prototype._observeControlIdentifiers=function(a,b,c,d){for(var e,f,g,h=a.length,j=!t(b),k=0,l=this.replace,m=[];h>k;++k)e=a[k],f=e.control,j&&e.expressions.length>0&&(g=q.getInstance(),m.push(g),g.initialize(d,e,b,c,l),i.observeExpressions(e.expressions,b,g.attributeChanged.bind(g))),t(f)||c.push(f);for(h=m.length,k=0;h>k;++k)m[k].attributeChanged()},b.prototype._fulfillChildTemplates=function(){for(var a,b=this,c=this.children,d=c.length,e=[],f=0;d>f;++f)a=c[f],u(a.children)||e.push(a.fulfillTemplate());return this._Promise.all(e)["catch"](function(a){H(function(){var c=b._Exception;c.fatal(a,c.COMPILE)})})},b._inject={_Promise:Pb,_ContextManager:cc,_compiler:ec,_CommentManagerFactory:fc,_ControlFactory:Rb,_TemplateControlFactory:zc,_BindableTemplatesFactory:sc,_Exception:Zb},b}(i);a.ElementManager=k,a.IElementManagerFactory=d,Hb.injectable(hc,d,[Tb,nc,xc,qc,sc,Zb],If),Hb.injectable(ic,k,null,Hf);var l=function(a){function c(){a.apply(this,arguments),this.type="text"}return __extends(c,a),c.create=function(a,d){var e=a.nodeValue,f=new c;if(i.hasMarkup(e)){var g=i.findMarkup(e),h={nodes:[{node:a,expressions:g}]};return f.initialize(h,d),f}return f.initialize(null,d),f.bind=b,f},c._cloneNodeMap=function(a,b){var c=a.nodes[0],d={nodes:[{expressions:c.expressions,nodeName:c.nodeName,node:b}]};return d},c._clone=function(a,d,e){var f=a.nodeMap,g=new c;return t(f)?(g.initialize(null,e),g.bind=b):g.initialize(c._cloneNodeMap(f,d),e),g},c.prototype.clone=function(a,b){return c._clone(this,a,b),1},c.prototype.bind=function(){var a=this.getParentControl(),b=this.nodeMap.nodes[0],c=b.node,d=b.expressions;i.observeExpressions(b.expressions,a,this._setText.bind(this,c,a,d)),this._setText(c,a,d)},c.prototype._setText=function(a,b,c){a.nodeValue=i.build(c,b||{})},c}(i);a.TextManager=l,a.ITextManagerFactory=e,Hb.injectable(kc,e,null,If),Hb.injectable(lc,l,null,Hf);var n=function(a){function b(){a.apply(this,arguments),this.type="comment"}return __extends(b,a),b.create=function(a,c){var d=new b;return d.initialize({nodes:[{node:a}]},c),d},b.prototype.clone=function(a,c){return b.create(a,c),1},b}(i);a.CommentManager=n,a.ICommentManagerFactory=f,Hb.injectable(fc,f,null,If),Hb.injectable(gc,n,null,Hf);var q=function(){function a(){this._lastValues={}}return a.getInstance=function(){var b=new a;return b._NodeManager=lb(jc),b._markupRegex=lb(_b).markupRegex,b},a.prototype.initialize=function(a,b,c,d,e){this.element=a,this.node=b,this.parent=c,this._controls=d,this.replace=e,"class"!==b.nodeName?this.attributeChanged=this._staticAttributeChanged:(this.attributeChanged=this._dynamicAttributeChanged,this._bindingExpressions=this._getBindingExpressions(b.expressions))},a.prototype._getBindingExpressions=function(a){return y(function(a){return a.identifiers.length>0||a.aliases.length>0||""===a.expression.trim()},a)},a.prototype._dynamicAttributeChanged=function(){var a,b,c,d=this.node,e=d.node,f=this._NodeManager.build(this._bindingExpressions,this.parent),g=f.split(/\s/),h=this._lastValues,i=this.element;for(this._NodeManager.hasMarkup(e.value)&&(e.value=e.value.replace(this._markupRegex,"")),b=g.length,c=0;b>c;++c)h[g[c]]=!0;for(g=Object.keys(h),b=g.length,c=0;b>c;++c)a=g[c],h[a]?(fb(i,a),h[a]=!1):(O(h,a),gb(i,a));f=e.value,this._notifyAttributes(d.nodeName,f)},a.prototype._staticAttributeChanged=function(){var a=this._controls,b=this.node,c=(a.length,M(b.nodeName)),d=this._NodeManager.build(b.expressions,this.parent);this._notifyAttributes(c,d),this.replace||(b.node.value=d)},a.prototype._notifyAttributes=function(a,b){for(var c,d,e=this._controls,f=e.length,g=0;f>g;++g)c=e[g].attributes,d=c[a],c[a]=b,c._attributeChanged(a,b,d)},a}();a.AttributeManager=q}(ch=a.processing||(a.processing={}));var dh;!function(a){function c(a){return a.history}function d(a){return w._regex=a,w}function f(){return D}function h(){return I}var i=function(){function a(){this.uid=L(Wc),this.isRoot=!1,this._removeUrlListener=b,this._ignoreOnce=!1,this._backNavigate=!1}return a.prototype.initialize=function(b){this._router=b,g(b)&&b.isRoot&&!g(a._root)&&(this.isRoot=!0,a._root=this,this._observeUrl())},a.prototype.navigate=function(a,b){var c=this;b=g(b)?b:{};var d;return this.finishNavigating().then(function(){if(d=b.isUrl?a:c._generate(a,b.parameters,b.query),!m(d)){var e=new Error("Cannot serialize url from input parameters, check your view reference.");c._Exception.fatal(e,c._Exception.NAVIGATION)}return c._navigate(d,b.replace)})},a.prototype.finishNavigating=function(){var c=a._root._router;return c.navigating?c.finishNavigating["catch"](b):this._Promise.resolve()},a.prototype.goBack=function(b){var c=this;b=g(b)?b:{};var d=Number(b.length);if(r(d)||(d=1),!this.isRoot)return a._root.goBack(b);{var e=this._browser;e.url()}return this._backNavigate=!0,this.finishNavigating().then(function(){return c._goBack(d)})},a.prototype.dispose=function(){this._removeUrlListener(),O(this,"router")},a.prototype._navigate=function(b,c){var d=this;return this.isRoot?new this._Promise(function(a,e){d._resolveNavigate=a,d._rejectNavigate=e,d._browser.url(b,c)}):a._root._navigate(b,c)},a.prototype._goBack=function(a){var b=this;return new this._Promise(function(c,d){b._resolveNavigate=c,b._rejectNavigate=d,b._browser.back(a)})},a.prototype._observeUrl=function(){var a=this;if(g(this._router)){var b,c,d=(this._browserConfig,this._EventManager),e=this._Exception,f=lb(Zd),h=g(f)&&s(f.navigated),i=function(d){a._ignoreOnce=!0,a._previousUrl=b,a._browser.url(b,!c),a._history.go(-1),s(a._rejectNavigate)&&a._rejectNavigate(d),p(d)||e.warn(d,e.NAVIGATION)};this._previousUrl=this._browser.url(),d.dispose(this.uid),d.on(this.uid,Fe,function(){var b=d.dispatch(He,a,d.DIRECT);b.defaultPrevented||a.goBack()}),d.on(this.uid,Ce,function(e,g){return a._ignoreOnce?(a._ignoreOnce=!1,void a._resolveNavigate()):(c=a._backNavigate,a._backNavigate=!1,b=a._previousUrl,e=d.dispatch(ze,a,d.DIRECT,[g]),e.defaultPrevented?void i(new Error("Navigation prevented during "+ze+" event")):void a.finishNavigating().then(function(){return d.dispatch(Be,a,d.DIRECT,[g]),a._router.navigate(g.pathname,g.query)}).then(function(){a._previousUrl=g.pathname,s(a._resolveNavigate)&&a._resolveNavigate(),h&&f.navigated(g.href),d.dispatch(Ae,a,d.DIRECT,[g])},i))})}},a.prototype._generate=function(a,b,c){return t(this._router)?void 0:p(a)?a:this._router.generate(a,b,c)},a._inject={_Promise:Pb,_Injector:Tc,_browserConfig:Dc,_browser:Cc,_EventManager:Wb,_window:Hc,_Exception:Zb,_history:Uc},a}();a.Navigator=i,Hb.injectable(bc,i,null,Hf),a.History=c,Hb.injectable(Uc,c,[Hc]);var j,k=["/",".","*","+","?","|","(",")","[","]","{","}","\\"],l=new RegExp("(\\"+k.join("|\\")+")","g"),n={},o={},q={},w=function(){function a(){this.type=xf,this.name="",this.regex=""}return a.parse=function(b,c,d){if(!(m(b)&&v(c)&&g(d)))return[];"/"===b[0]&&(b=b.slice(1));for(var e,f,h,i=b.split("/"),k=i.length,l=a.__findSegment,p=[],r=a._regex,s=0;k>s;++s)e=i[s],""===e?(g(j)||(j=lb(Lc)),p.push(j)):(h=e.match(r.dynamicSegmentsRegex))?(f=h[1],p.push(l(f,Oc,n)),c.push(f),d.dynamics++):(h=e.match(r.splatSegmentRegex))?(f=h[1],p.push(l(f,Pc,o)),c.push(f),d.splats++):(p.push(l(e,Mc,q)),d.statics++);return p},a.__findSegment=function(a,b,c){var d=c[a];return g(d)||(d=c[a]=lb(b),d.initialize(a)),d},a.prototype.initialize=function(a){this.name=a},a.prototype.reduceCharacters=function(a,b){return g(this._specification)&&(b=a(b,this._specification)),b},a.prototype.generate=function(){return this.name},a}();a.BaseSegment=w,a.IBaseSegmentFactory=d,plat.register.injectable(Kc,d,[_b],If),plat.register.injectable(Lc,w,null,Hf);var x=function(a){function b(){a.apply(this,arguments),this.type=zf}return __extends(b,a),b.prototype.initialize=function(b){a.prototype.initialize.call(this,b),this.regex=this.name.replace(l,"\\$1")},b.prototype.reduceCharacters=function(a,b){for(var c=this.name,d=c.length,e=b,f=0;d>f;++f)e=a(e,{validCharacters:c[f]});return e},b}(w);a.StaticSegment=x,plat.register.injectable(Mc,x,null,Hf);var y=function(a){function b(){a.apply(this,arguments),this.type=yf}return __extends(b,a),b.prototype.generate=function(a){return g(a)?a[this.name]:void 0},b}(w);a.VariableSegment=y,plat.register.injectable(Nc,y,null,Hf);var z=function(a){function b(){a.apply(this,arguments),this.type=Af,this.regex="(.+)",this._specification={invalidCharacters:"",repeat:!0}}return __extends(b,a),b}(y);a.SplatSegment=z,plat.register.injectable(Pc,z,null,Hf);var B=function(a){function b(){a.apply(this,arguments),this.type=Bf,this.regex="([^/]+)",this._specification={invalidCharacters:"/",repeat:!0}}return __extends(b,a),b}(y);a.DynamicSegment=B,plat.register.injectable(Oc,B,null,Hf);var D=function(){function a(){this.initialize()}return a.compile=function(a,b){return a.reduceCharacters(function(a,b){return a.add(b)},b)},a.link=function(a,b){for(var c,d,e,f,g,h=a.delegates,i=a.regex,j=h.length,k=b.match(i),l=1,m=[],n=0;j>n;++n){for(g=h[n],c=g.names,d={},e=0,f=c.length;f>e;++e)d[c[e]]=k[l++];m.push({delegate:g.delegate,parameters:d,isDynamic:f>0})}return m},a.recognize=function(a,b){for(var c,d=[],e=b.length,f=0;e>f;++f)c=b[f],d=d.concat(c.match(a));return d},a.sort=function(a){if(!v(a))return a;var b,c,d,e,f,g,h,i;return a.sort(function(a,j){if(b=a.types,f=j.types,c=b.splats,g=f.splats,c!==g)return c-g;if(d=b.statics,e=b.dynamics,h=f.statics,i=f.dynamics,c>0){if(d!==h)return h-d;if(e!==i)return i-e}return e!==i?e-i:d!==h?h=d:0})},a.prototype.initialize=function(a){this.specification=a,this.nextStates=[]},a.prototype.add=function(b){var c=this._find(b);return g(c)?c:(c=lb(a),c.initialize(b),this.nextStates.push(c),b.repeat&&c.nextStates.push(c),c)},a.prototype.match=function(a){var b,c,d=[];return this._someChildren(function(e){return b=e.specification,c=b.validCharacters,m(c)&&c.indexOf(a)>-1?void d.push(e):(c=b.invalidCharacters,void(m(c)&&-1===c.indexOf(a)&&d.push(e)))}),d},a.prototype._find=function(a){var b,c,d=a.validCharacters,e=a.invalidCharacters;return this._someChildren(function(a){return b=a.specification,b.validCharacters===d&&b.invalidCharacters===e?(c=a,!0):void 0}),c},a.prototype._someChildren=function(a){for(var b=this.nextStates,c=b.length,d=0;c>d;++d)if(a(b[d])===!0)return!0;return!1},a}();a.State=D,a.IStateStatic=f,plat.register.injectable(Qc,f,null,Ff),plat.register.injectable(Rc,D,null,Hf);var F=function(){function a(){this._namedRoutes={}}return a.prototype.register=function(a,b){if(v(a)){for(var c,d=this._rootState,e=a.length,f=["^"],h={statics:0,dynamics:0,splats:0},i=[],j=[],k=0;e>k;++k)c=this._parse(a[k],i,h),j=j.concat(c),d=this._compile(c,d,f);d=this._finalize(d,f),d.delegates=i,d.regex=new RegExp(f.join("")+"$"),d.types=h,g(b)&&m(b.name)&&(this._namedRoutes[this._toLowerCase(b.name)]={segments:j,delegates:i})}},a.prototype.recognize=function(a){var b=!1,c=[];return a=this._addLeadingSlash(a),b=this._hasTrailingSlash(a),b&&(a=a.substr(0,a.length-1)),c=this._filter(this._findStates(a)),this._link(c[0],a,b)},a.prototype.generate=function(a,b){a=this._toLowerCase(a);var c,d,e=this._namedRoutes[a],f="";if(g(e)){c=e.segments,d=c.length;for(var h=0;d>h;h++){var i=c[h];i.type!==xf&&(f+="/",f+=i.generate(b))}return f=this._addLeadingSlash(f)}},a.prototype.delegatesFor=function(a){a=this._toLowerCase(a);var b,c=this._namedRoutes[a];return g(c)?(b=c.delegates,v(b)?b.slice(0):[]):[]},a.prototype.exists=function(a){return g(this._namedRoutes[this._toLowerCase(a)])},a.prototype._toLowerCase=function(a){return m(a)?a.toLowerCase():a},a.prototype._finalize=function(a,b){return a===this._rootState&&(a=a.add({validCharacters:"/"}),b.push("/")),a},a.prototype._parse=function(a,b,c){var d=[];return b.push({delegate:a.delegate,names:d}),this._BaseSegmentFactory.parse(a.pattern,d,c)},a.prototype._compile=function(a,b,c){for(var d,e=a.length,f=this._State.compile,g=0;e>g;++g)d=a[g],d.type!==xf&&(b=b.add({validCharacters:"/"}),b=f(d,b),c.push("/"+d.regex));return b},a.prototype._addLeadingSlash=function(a){return a=decodeURI(a),"/"!==a[0]&&(a="/"+a),a},a.prototype._hasTrailingSlash=function(a){var b=a.length;return b>1&&"/"===a[b-1]},a.prototype._findStates=function(a){for(var b=[this._rootState],c=this._State.recognize,d=a.length,e=0;d>e&&(b=c(a[e],b),0!==b.length);++e);return b},a.prototype._filter=function(a){for(var b,c=a.length,d=[],e=0;c>e;++e)b=a[e],v(b.delegates)&&d.push(b);return this._State.sort(d)},a.prototype._link=function(a,b,c){return g(a)&&v(a.delegates)?(c&&this._isDynamic(a)&&(b+="/"),this._State.link(a,b)):void 0},a.prototype._isDynamic=function(a){return"(.+)$"===a.regex.source.slice(-5)},a._inject={_BaseSegmentFactory:Kc,_State:Qc,_rootState:Rc},a}();a.RouteRecognizer=F,plat.register.injectable(Sc,F,null,Hf);var G="/*childRoute",H=G.length,I=function(){function a(){this.navigating=!1,this.children=[],this.isRoot=!1,this._paramTransforms={},this._queryTransforms={},this._interceptors={},this._ports=[],this._resolve=this._Promise.resolve.bind(this._Promise),this._reject=this._Promise.reject.bind(this._Promise),this.uid=L(Wc),this.isRoot=t(a.currentRouter()),a.currentRouter(this),this.initialize()}return a.currentRouter=function(b){return t(b)||(a.__currentRouter=b),a.__currentRouter},a.prototype.initialize=function(a){this.parent=a},a.prototype.addChild=function(a){return t(a)||this.children.indexOf(a)>-1?a:(a.initialize(this),this.children.push(a),a)},a.prototype.removeChild=function(a){var b=this.children,c=this.children.indexOf(a);0>c||b.splice(c,1)},a.prototype.register=function(a){var c=this,d=this._ports;return t(a)||d.indexOf(a)>-1?this._resolve():(d.push(a),g(this.currentRouteInfo)?(this.navigating=!0,this._resolve(this.finishNavigating)["catch"](b).then(function(){var a=e(c.currentRouteInfo,!0);return c.finishNavigating=c._canNavigateTo(a).then(function(b){return b?(c.currentRouteInfo=void 0,c._performNavigation(a)):void 0}).then(function(){c.navigating=!1,c.currentRouteInfo=a},function(){c.navigating=!1})})):this._resolve())},a.prototype.unregister=function(a){var b=this._ports,c=b.indexOf(a);0>c||(b.splice(c,1),0!==b.length||t(this.parent)||this.parent.removeChild(this))},a.prototype.configure=function(a){var b=this;return v(a)?A(function(a){b._configureRoute(a)},a):this._configureRoute(a),this._forceNavigate()},a.prototype.unknown=function(a){return this._unknownHandler=a,this},a.prototype.param=function(a,b,c){return this._addHandler(a,b,c,this._paramTransforms)},a.prototype.queryParam=function(a,b,c){return this._addHandler(a,b,c,this._queryTransforms)},a.prototype.intercept=function(a,b){u(b)&&(b="*");var c=b;"*"!==b&&(b=this._Injector.convertDependency(b)),b===Vf&&(b=c);var d=this._interceptors[b];return v(d)||(d=this._interceptors[b]=[]),d.push(a),this},a.prototype.navigate=function(a,b,c){var d=this;g(b)||(b={});var f=this._resolve,h=(this._reject,R(b));if("/"===a&&(a=""),c=c===!0,!m(a)||this.navigating||!c&&a===this._previousUrl&&h===this._previousQuery)return this.navigating?this.finishNavigating.then(function(){return d.navigate(a,b,c)}):f();var i,j,k,l=this._recognizer.recognize(a);if(p(l)){if(l=this._childRecognizer.recognize(a),p(l)){if(this._previousUrl=a,this._previousQuery=h,s(this._unknownHandler)){var n={segment:a,view:void 0};return f(this._unknownHandler(n)).then(function(){var b=n.view;if(!u(b))return d.configure({pattern:a,view:b})})}return f()}if(i=l[0],i.query=b,j=i.delegate.pattern,j=j.substr(0,j.length-H),this._previousPattern===j)return this.navigating=!0,this.finishNavigating=this._navigateChildren(i).then(function(){d._previousUrl=a,d._previousQuery=h,d.navigating=!1
},function(a){throw d.navigating=!1,a})}else i=l[0],i.query=b,j=i.delegate.pattern;k=this._recognizer.generate(i.delegate.view,i.parameters);var o=this._previousSegment;this._previousSegment=k,this.navigating=!0;var q=this._nextRouteInfo=e(i,!0);return this.finishNavigating=this._canNavigate(i).then(function(b){if(!b)throw d.navigating=!1,new Error("Not cleared to navigate");return d._previousUrl=a,d._previousQuery=h,d._performNavigation(i)}).then(function(){d._previousPattern=j,d._previousSegment=k,d.currentRouteInfo=q,d.navigating=!1},function(a){throw d._previousSegment=o,d.navigating=!1,a})},a.prototype.generate=function(a,b,c){var d=a;a=this._Injector.convertDependency(a),a===Vf&&(a=d);for(var e=this,f="";!t(e)&&!e._recognizer.exists(a);)e=e.parent;if(t(e))throw new Error("Route for "+a+" does not exist.");for(var g,h=e._recognizer.generate(a,b);!t(e=e.parent);)g=e._previousSegment,g=t(g)||"/"===g?"":g,f=g+f;return f+h+R(c)},a.prototype._configureRoute=function(a){var b=(this._resolve,this._Injector.convertDependency(a.view)),c=a.alias||b;if(b!==Vf){a.view=b,a.alias=c||b;var d={pattern:a.pattern,delegate:a},e=a.pattern+G,f={pattern:e,delegate:{pattern:e,view:b,alias:c}};this._recognizer.register([d],{name:c}),this._childRecognizer.register([f])}},a.prototype._addHandler=function(a,b,c,d){u(c)&&(c="*");var e=c;if("*"!==c&&(c=this._Injector.convertDependency(c)),c===Vf&&(c=e),p(c)||p(b))return this;var f=d[c];g(f)||(f=d[c]={});var h=f[b];return v(h)||(h=f[b]=[]),h.push(a),this},a.prototype._forceNavigate=function(){var a,b=this,c=this._resolve;if(this.navigating)return this.finishNavigating.then(function(){return b._forceNavigate()});if(this.isRoot&&p(this._previousUrl)){var d=this._browser.urlUtils();this._previousUrl=d.pathname,a=d.query}return p(this._previousQuery)||(a=Q(this._previousQuery)),p(this._previousUrl)?c():this.navigate(this._previousUrl,a,!0)},a.prototype._navigateChildren=function(a){var c=this._getChildRoute(a);return t(c)?this._resolve():C(function(b){return b.navigate(c,a.query)},this.children).then(b)},a.prototype._getChildRoute=function(a){if(!t(a)){var b=a.parameters.childRoute;return m(b)||(b=""),"/"+b}},a.prototype._performNavigation=function(a){var b=this,c=this._isSameRoute(this._nextRouteInfo);return this._performNavigateFrom(c).then(function(){return c?void 0:C(function(b){return b.navigateTo(a)},b._ports)}).then(function(){return b._navigateChildren(a)})},a.prototype._performNavigateFrom=function(a){var c=this;return C(function(a){return a._performNavigateFrom()},this.children).then(function(){return a?void 0:C(function(a){return a.navigateFrom()},c._ports)}).then(b)},a.prototype._canNavigate=function(a){var b=this,c=(this.currentRouteInfo,this._isSameRoute(this._nextRouteInfo));return this._canNavigateFrom(c).then(function(d){return d&&b._canNavigateTo(a,c)})},a.prototype._canNavigateFrom=function(a){var b=this;return this._Promise.all(this.children.reduce(function(a,b){return a.concat(b._canNavigateFrom())},[])).then(S).then(function(c){return!c||a?[c]:C(function(a){return a.canNavigateFrom()},b._ports)}).then(S)},a.prototype._canNavigateTo=function(a,b){var c=this;return p(this._ports)?this._resolve(!0):this._callAllHandlers(a.delegate.alias,a.parameters,a.query).then(function(){return c._callInterceptors(a)}).then(function(d){return d===!1||b?[d]:C(function(b){return b.canNavigateTo(a)},c._ports)}).then(S)},a.prototype._callAllHandlers=function(a,c,d){{var e=this,f=this._Promise;f.resolve.bind(f)}return this._callHandlers(this._queryTransforms["*"],d).then(function(){return e._callHandlers(e._queryTransforms[a],d)}).then(function(){return e._callHandlers(e._paramTransforms["*"],c,d)}).then(function(){return e._callHandlers(e._paramTransforms[a],c,d)}).then(b)},a.prototype._callHandlers=function(a,c,d){var e=this._resolve;return g(c)||(c={}),C(function(a,b){return E(function(a){return e(a(c[b],c,d))},a)},a).then(b)},a.prototype._callInterceptors=function(a){var b=this,c=this._resolve;return E(function(b){return c(b(a))},this._interceptors["*"]).then(S).then(function(d){return d?C(function(b){return c(b(a))},b._interceptors[a.delegate.alias]):[d]}).then(S)},a.prototype._isSameRoute=function(a){var b=this.currentRouteInfo;if(!g(b)||!g(a))return!1;var c=b.delegate,d=a.delegate,e=R(b.parameters),f=R(a.parameters),h=R(b.query),i=R(a.query);return c.view===d.view&&c.alias===d.alias&&c.pattern===d.pattern&&e===f&&h===i},a.prototype._clearInfo=function(){this._previousSegment=void 0,this._previousPattern=void 0,this._previousUrl=void 0,this._previousQuery=void 0,this.currentRouteInfo=void 0,this.navigating=!1,A(function(a){a._clearInfo()},this.children)},a._inject={_Promise:Pb,_Injector:Tc,_EventManager:Wb,_browser:Cc,_browserConfig:Dc,_recognizer:Sc,_childRecognizer:Sc},a}();a.Router=I,plat.register.injectable(Ec,I,null,Hf),a.IRouterStatic=h,plat.register.injectable(Fc,h)}(dh=a.routing||(a.routing={}));var eh;!function(a){var c=function(a){function b(){a.apply(this,arguments)}return __extends(b,a),b.prototype.initialize=function(){var a=M(this.type),b=this.attributes[a];p(b)||this._isPrecompiled()||(this._label=b,this._define(b))},b.prototype.dispose=function(){for(var a=this._label,b=this.parent;!u(a)&&g(b);)g(b[a])&&j(b[a].element)&&b[a].element===this.element&&O(b,a),b=b.parent},b.prototype._define=function(a){var b=this.templateControl;t(b)||(b.name=a);for(var c=this.parent,d={element:this.element,control:b};g(c);){var e=c[a];g(e)||(c[a]=d),c=c.parent}},b.prototype._isPrecompiled=function(){for(var a=this.parent;!t(a);){if(-1!==a.type.indexOf(Lf))return!0;a=a.parent}return!1},b}(ah);a.Name=c,Hb.control(bd,c);var d=function(a){function c(){a.apply(this,arguments),this._expression=[],this._aliases=[]}return __extends(c,a),c.prototype.loaded=function(){t(this.element)||(this.attribute=M(this.type),this._setListener())},c.prototype._setListener=function(){var a=this.attributes[this.attribute];p(this.event)||p(a)||(this._parseArgs(a),this._addEventListeners())},c.prototype._addEventListeners=function(){this.addEventListener(this.element,this.event,this._onEvent,!1)},c.prototype._buildExpression=function(){var a,c,d,e,f,g=this._expression.slice(0),h=this._parser,i=this.parent,j=(!t(i),g.shift());if(t(i)||(e=i.getResources(this._aliases),f=i.context),"@"!==j[0]){var k=this._Exception;if(a=this.findProperty(j),t(a))return k.warn("Could not find property "+j+" on any parent control.",k.CONTROL),{fn:b,context:{},args:[]};var l=a.expresssion,m=l.identifiers;if(m.length>1)return k.warn("Cannot have more than one identifier in a "+this.type+"'s expression.",k.CONTROL),{fn:b,context:{},args:[]};var n=m[0],o=n.split(".");o.pop(),c=0===o.length?a.control:h.parse(o.join(".")).evaluate(a.control),d=a.value}else d=t(e)?b:e[j]||b,c=void 0;for(var p=g.length,q=[],r=0;p>r;++r)q.push(h.parse(g[r]).evaluate(f,e));return{fn:d,context:c,args:q}},c.prototype._onEvent=function(a){var b=this._buildExpression(),c=b.fn;if(!s(c)){var d=this._Exception;return void d.warn("Cannot find registered event method "+this._expression[0]+" for control: "+this.type,d.BIND)}c.apply(b.context,b.args.concat(a))},c.prototype._findAliases=function(a){for(var b,c=a.length,d={},e=[],f=[],g=this._parser;c-->0;)b=a[c].trim(),f=f.concat(g.parse(b).aliases);for(;f.length>0;)b=f.pop(),d[b]||(e.push(b),d[b]=!0);return e},c.prototype._parseArgs=function(a){if(!p(a)){var b=this._regex.argumentRegex.exec(a);t(b)?this._expression.push(a):this._expression=[a.slice(0,b.index)].concat(""!==b[1]?b[1].split(","):[]),this._aliases=this._findAliases(this._expression)}},c._inject={_parser:$b,_regex:_b},c}(ah);a.SimpleEventControl=d;var e=function(a){function b(){a.apply(this,arguments),this.event=Se}return __extends(b,a),b}(d);a.Tap=e;var f=function(a){function b(){a.apply(this,arguments),this.event="blur"}return __extends(b,a),b}(d);a.Blur=f;var h=function(a){function b(){a.apply(this,arguments),this.event="change"}return __extends(b,a),b}(d);a.Change=h;var i=function(a){function b(){a.apply(this,arguments),this.event="copy"}return __extends(b,a),b}(d);a.Copy=i;var k=function(a){function b(){a.apply(this,arguments),this.event="cut"}return __extends(b,a),b}(d);a.Cut=k;var l=function(a){function b(){a.apply(this,arguments),this.event="paste"}return __extends(b,a),b}(d);a.Paste=l;var n=function(a){function b(){a.apply(this,arguments),this.event=Te}return __extends(b,a),b}(d);a.DblTap=n;var o=function(a){function b(){a.apply(this,arguments),this.event="focus"}return __extends(b,a),b}(d);a.Focus=o;var w=function(a){function b(){a.apply(this,arguments),this.event=Ue}return __extends(b,a),b}(d);a.TouchStart=w;var x=function(a){function b(){a.apply(this,arguments),this.event=Ve}return __extends(b,a),b}(d);a.TouchEnd=x;var y=function(a){function b(){a.apply(this,arguments),this.event=We}return __extends(b,a),b}(d);a.TouchMove=y;var z=function(a){function b(){a.apply(this,arguments),this.event=Xe}return __extends(b,a),b}(d);a.TouchCancel=z;var A=function(a){function b(){a.apply(this,arguments),this.event=Ye}return __extends(b,a),b}(d);a.Hold=A;var B=function(a){function b(){a.apply(this,arguments),this.event=Ze}return __extends(b,a),b}(d);a.Release=B;var C=function(a){function b(){a.apply(this,arguments),this.event=$e}return __extends(b,a),b}(d);a.Swipe=C;var D=function(a){function b(){a.apply(this,arguments),this.event=_e}return __extends(b,a),b}(d);a.SwipeLeft=D;var E=function(a){function b(){a.apply(this,arguments),this.event=af}return __extends(b,a),b}(d);a.SwipeRight=E;var F=function(a){function b(){a.apply(this,arguments),this.event=bf}return __extends(b,a),b}(d);a.SwipeUp=F;var G=function(a){function b(){a.apply(this,arguments),this.event=cf}return __extends(b,a),b}(d);a.SwipeDown=G;var I=function(a){function b(){a.apply(this,arguments),this.event=df}return __extends(b,a),b}(d);a.Track=I;var J=function(a){function b(){a.apply(this,arguments),this.event=ef}return __extends(b,a),b}(d);a.TrackLeft=J;var L=function(a){function b(){a.apply(this,arguments),this.event=ff}return __extends(b,a),b}(d);a.TrackRight=L;var N=function(a){function b(){a.apply(this,arguments),this.event=gf}return __extends(b,a),b}(d);a.TrackUp=N;var P=function(a){function b(){a.apply(this,arguments),this.event=hf}return __extends(b,a),b}(d);a.TrackDown=P;var Q=function(a){function b(){a.apply(this,arguments),this.event=jf}return __extends(b,a),b}(d);a.TrackEnd=Q;var R=function(a){function b(){a.apply(this,arguments),this.event="submit"}return __extends(b,a),b.prototype._onEvent=function(b){this.element.hasAttribute("action")||b.preventDefault(),a.prototype._onEvent.call(this,b)},b}(d);a.Submit=R;var S=function(b){function c(){b.apply(this,arguments),this.event="input"}return __extends(c,b),c.prototype._addEventListeners=function(){var b,c=this,d=this.element,e=this._compat,f=!1,g="input",h=function(a){f||c._onEvent(a)},i=function(a){s(b)||(b=H(function(){h(a),b=null}))};u(e.ANDROID)&&(this.addEventListener(d,"compositionstart",function(){f=!0},!1),this.addEventListener(d,"compositionend",function(a){f=!1,h(a)},!1)),this.addEventListener(d,g,h,!1),this.addEventListener(d,"change",h,!1),e.hasEvent(g)||(this.addEventListener(d,"keydown",function(b){var c=b.keyCode,d=a.KeyCodes;c===d.lwk||c===d.rwk||c>=d.shift&&c<=d.escape||c>d.space&&c<=d.down||i(b)},!1),this.addEventListener(d,"cut",i,!1),this.addEventListener(d,"paste",i,!1))},c._inject={_compat:Qb},c}(d);a.React=S,Hb.control(jd,e),Hb.control(kd,f),Hb.control(ld,h),Hb.control(md,i),Hb.control(nd,k),Hb.control(od,l),Hb.control(pd,n),Hb.control(qd,o),Hb.control(rd,R),Hb.control(sd,w),Hb.control(td,x),Hb.control(ud,y),Hb.control(vd,z),Hb.control(wd,A),Hb.control(xd,B),Hb.control(yd,C),Hb.control(zd,D),Hb.control(Ad,E),Hb.control(Bd,F),Hb.control(Cd,G),Hb.control(Dd,I),Hb.control(Ed,J),Hb.control(Fd,L),Hb.control(Gd,N),Hb.control(Hd,P),Hb.control(Id,Q),Hb.control(Jd,S),a.KeyCodes={backspace:8,tab:9,enter:13,shift:16,ctrl:17,alt:18,pause:19,"break":19,"caps lock":20,escape:27,space:32,"page up":33,"page down":34,end:35,home:36,left:37,"left arrow":37,up:38,"up arrow":38,right:39,"right arrow":39,down:40,"down arrow":40,insert:45,"delete":46,0:48,zero:48,")":48,"right parenthesis":48,1:49,one:49,"!":49,exclamation:49,"exclamation point":49,2:50,two:50,"@":50,at:50,3:51,three:51,"#":51,"number sign":51,hash:51,pound:51,4:52,four:52,$:52,dollar:52,"dollar sign":52,5:53,five:53,"%":53,percent:53,"percent sign":53,6:54,six:54,"^":54,caret:54,7:55,seven:55,"&":55,ampersand:55,8:56,eight:56,"*":56,asterisk:56,9:57,nine:57,"(":57,"left parenthesis":57,a:65,b:66,c:67,d:68,e:69,f:70,g:71,h:72,i:73,j:74,k:75,l:76,m:77,n:78,o:79,p:80,q:81,r:82,s:83,t:84,u:85,v:86,w:87,x:88,y:89,z:90,lwk:91,"left window key":91,rwk:92,"right window key":92,select:93,"select key":93,"numpad 0":96,"numpad 1":97,"numpad 2":98,"numpad 3":99,"numpad 4":100,"numpad 5":101,"numpad 6":102,"numpad 7":103,"numpad 8":104,"numpad 9":105,multiply:106,add:107,subtract:109,"decimal point":110,divide:111,f1:112,f2:113,f3:114,f4:115,f5:116,f6:117,f7:118,f8:119,f9:120,f10:121,f11:122,f12:123,"num lock":144,"scroll lock":145,";":186,"semi-colon":186,":":186,colon:186,"=":187,equal:187,"equal sign":187,"+":187,plus:187,",":188,comma:188,"<":188,lt:188,"less than":188,"left angle bracket":188,"-":189,dash:189,_:189,underscore:189,".":190,period:190,">":190,gt:190,"greater than":190,"right angle bracket":190,"/":191,"forward slash":191,"?":191,"question mark":191,"`":192,"grave accent":192,"~":192,tilde:192,"[":219,"open bracket":219,"{":219,"open brace":219,"\\":220,"back slash":220,"|":220,pipe:220,"]":221,"close bracket":221,"}":221,"close brace":221,"'":222,"single quote":222,'"':222,"double quote":222};var T=function(b){function c(){b.apply(this,arguments)}return __extends(c,b),c.prototype._setListener=function(){var a=this.attribute;if(!p(this.event)&&!p(a)){var c=this.attributes[a].trim();if("{"===c[0]){var d=this.evaluateExpression(c)||{method:"",key:null},e=d.key,f=d.keys;return this._parseArgs(d.method),t(e)&&t(f)?(this.attributes[a]=d.method,this._setKeyCodes(),void b.prototype._setListener.call(this)):(f=v(f)?f:[e],this._setKeyCodes(f),void this.addEventListener(this.element,this.event,this._onEvent,!1))}this._setKeyCodes(),b.prototype._setListener.call(this)}},c.prototype._onEvent=function(a){var c,d=this.keyCodes;p(d)?b.prototype._onEvent.call(this,a):u(d[a.keyCode])||(c=d[a.keyCode],(!c.shifted||a.shiftKey)&&b.prototype._onEvent.call(this,a))},c.prototype._setKeyCodes=function(b){v(b)||(b=[]);var c,d,e=b.length,f=this.keyCodes,h=this._regex.shiftedKeyRegex;g(f)||(f=this.keyCodes={});for(var i=0;e>i;++i)c=b[i],d=r(c)?c:a.KeyCodes[c.toLowerCase()],f[d]={shifted:h.test(c)}},c._inject={_regex:_b},c}(d);a.KeyCodeEventControl=T;var U=function(a){function c(){a.apply(this,arguments),this.event="keydown",this.cancelEvent=b}return __extends(c,a),c.prototype._onEvent=function(b){var c=this,d=b.keyCode;(d>=48&&90>=d||d>=186||d>=96&&111>=d)&&(this.cancelEvent=H(function(){a.prototype._onEvent.call(c,b)}))},c.prototype.dispose=function(){this.cancelEvent(),this.cancelEvent=null},c}(T);a.KeyDown=U;var V=function(a){function c(){a.apply(this,arguments),this.event="keydown",this.cancelEvent=b}return __extends(c,a),c.prototype._onEvent=function(b){var c=this,d=b.keyCode;(d>=48&&90>=d||d>=186||d>=96&&111>=d)&&(this.cancelEvent=H(function(){a.prototype._onEvent.call(c,b)}))},c.prototype.dispose=function(){this.cancelEvent(),this.cancelEvent=null},c}(T);a.KeyPress=V;var W=function(a){function b(){a.apply(this,arguments),this.event="keyup"}return __extends(b,a),b}(T);a.KeyUp=W,Hb.control($c,U),Hb.control(_c,V),Hb.control(ad,W);var X=function(a){function b(){a.apply(this,arguments),this.property=""}return __extends(b,a),b.prototype.loaded=function(){t(this.element)||(this.attribute=M(this.type),this.setter(),this.__removeListener=this.attributes.observe(this.setter,this.attribute))},b.prototype.contextChanged=function(){t(this.element)||this.setter()},b.prototype.dispose=function(){s(this.__removeListener)&&(this.__removeListener(),this.__removeListener=null)},b.prototype.setter=function(){var a=this;K(function(){var b=a.element,c=a.property;if(j(b))switch(a.attributes[a.attribute]){case"false":case"0":case"null":case"":b.setAttribute(c,""),b[c]=!1,b.removeAttribute(c);break;default:b.setAttribute(c,c),b[c]=!0}})},b}(ah);a.SetAttributeControl=X;var Y=function(a){function b(){a.apply(this,arguments),this.property="checked"}return __extends(b,a),b}(X);a.Checked=Y;var Z=function(a){function b(){a.apply(this,arguments),this.property="disabled"}return __extends(b,a),b}(X);a.Disabled=Z;var $=function(a){function b(){a.apply(this,arguments),this.property="selected"}return __extends(b,a),b}(X);a.Selected=$;var _=function(a){function b(){a.apply(this,arguments),this.property="readonly"}return __extends(b,a),b}(X);a.ReadOnly=_;var ab=function(a){function c(){a.apply(this,arguments),this.property="display",this.value="none",this.importance="important",this._initialValue=""}return __extends(c,a),c.prototype.initialize=function(){var a=this.element.style||{getPropertyValue:b},c=a.getPropertyValue(this.property);this._setValue(this.value,this.importance),p(c)||"none"===c||(this._initialValue=c)},c.prototype.setter=function(){var a=this;K(function(){if(j(a.element))switch(a.attributes[a.attribute]){case"false":case"0":case"null":case"":a._setValue(a.value,a.importance);break;default:a._setValue(a._initialValue)}})},c.prototype._setValue=function(a,c){var d=this.property,e=this.element.style||{setProperty:b,removeProperty:b,getPropertyValue:b,getPropertyPriority:b},f=e.getPropertyValue(d),g=e.getPropertyPriority(d);if(a!==f||c!==g)return p(a)?void e.removeProperty(d):void e.setProperty(d,a,c)},c}(X);a.Visible=ab;var bb=function(a){function b(){a.apply(this,arguments),this.property="style"}return __extends(b,a),b.prototype.setter=function(){var a=this,b=this.element,c=this.attributes[this.attribute];p(c)||t(b)||K(function(){b.setAttribute(a.property,c)})},b}(X);a.Style=bb,Hb.control(dd,Y),Hb.control(ed,Z),Hb.control(fd,$),Hb.control(gd,_),Hb.control(hd,ab),Hb.control(id,bb);var cb=function(a){function b(){a.apply(this,arguments)}return __extends(b,a),b.prototype.setter=function(){var a=this.element,b=this.property,c=this.attributes[this.attribute];p(c)||t(a)||u(a[b])||(a[b]=c)},b}(X);a.ElementPropertyControl=cb;var db=function(a){function b(){a.apply(this,arguments),this.property="href"}return __extends(b,a),b}(cb);a.Href=db;var eb=function(a){function b(){a.apply(this,arguments),this.property="src"}return __extends(b,a),b.prototype.setter=function(){var a=this.element,b=this.property,c=this.attributes[this.attribute];p(c)||t(a)||u(a[b])||(a[b]=this._browser.urlUtils(c))},b._inject={_browser:Cc},b}(cb);a.Src=eb,Hb.control(Yc,db),Hb.control(Zc,eb);var fb=function(c){function d(){c.apply(this,arguments),this.priority=100,this._supportsTwoWayBinding=!1,this.__fileSupported=lb(Qb).fileSupported,this.__fileNameRegex=lb(_b).fileNameRegex,this.__isSelf=!1}return __extends(d,c),d.prototype.initialize=function(){this._determineType()},d.prototype.loaded=function(){var a=this.parent;if(!t(a)&&!t(this.element)){var b=M(this.type),c=this._parser,d=this._expression=c.parse(this.attributes[b]),e=d.identifiers;if(1!==e.length){var f=this._Exception;return f.warn("Only 1 identifier allowed in a "+this.type+" expression",f.BIND),void(this._contextExpression=null)}var h=e[0].split(".");if(this._property=h.pop(),d.aliases.length>0){var i,j=d.aliases[0],k=a.findResource(j);if(g(k)){if(i=k.resource.type,i!==_f&&i!==dg)return}else k={resource:{}};j===hg||j===fg?this._contextExpression=c.parse(h.join(".")):(this._property="value",this._contextExpression={evaluate:function(){return k.resource},aliases:[],identifiers:[],expression:""})}else this._contextExpression=h.length>0?c.parse(h.join(".")):{evaluate:function(){return a.context},aliases:[],identifiers:[],expression:""};this._supportsTwoWayBinding&&this.templateControl.observeProperties(this),this._watchExpression(),t(this._addEventType)||this._addEventType()}},d.prototype.contextChanged=function(){this._watchExpression()},d.prototype.dispose=function(){this._addEventType=null},d.prototype.evaluate=function(){var a=this._expression;if(!u(a))return this.evaluateExpression(a)},d.prototype.observeProperty=function(a,b,c){var d,e=this;if(p(b))d=this._expression.expression;else if(r(b))d=this._expression.expression+"."+b;else{var f,h=this._parser,i=h.parse(b),j=i.identifiers;if(1!==j.length)return f=this._Exception,void f.warn("Only 1 identifier path allowed when observing changes to a bound property's child with a control implementing ISupportTwoWayBinding and working with "+this.type,f.BIND);var k=h.parse(this._expression.expression+"."+j[0]);d=k.identifiers[0];var l=d.split("."),m=(l.pop(),l.join(".")),n=this.evaluateExpression(m);if(!g(n)){if(!t(n))return f=this._Exception,void f.warn("A control implementing ISupportTwoWayBinding is trying to index into a primitive type when trying to evaluate "+this.type+'="'+this._expression.expression+'"',f.BIND);n=this._ContextManager.createContext(this.parent,m)}}a=a.bind(this.templateControl);var o;return o=c===!0?this.observeArray(function(c){a(c,b)},d):this.observe(function(c,d){e.__isSelf||c===d||a(c,d,b)},d),a(this.evaluateExpression(d),void 0,b,!0),o},d.prototype._addTextEventListener=function(){var b,c=this,d=this.element,e=this._compat,f=!1,g="input",h=function(){f||c._propertyChanged()},i=function(){s(b)||(b=H(function(){h(),b=null}))};u(e.ANDROID)&&(this.addEventListener(d,"compositionstart",function(){f=!0},!1),this.addEventListener(d,"compositionend",function(){f=!1,h()},!1)),e.hasEvent(g)?this.addEventListener(d,g,h,!1):(this.addEventListener(d,"keydown",function(b){var c=b.keyCode,d=a.KeyCodes;c===d.lwk||c===d.rwk||c>=d.shift&&c<=d.escape||c>d.space&&c<=d.down||i()},!1),this.addEventListener(d,"cut",i,!1),this.addEventListener(d,"paste",i,!1)),this.addEventListener(d,"change",h,!1)},d.prototype._addChangeEventListener=function(){this.addEventListener(this.element,"change",this._propertyChanged,!1)},d.prototype._addButtonEventListener=function(){this.addEventListener(this.element,Se,this._propertyChanged,!1)},d.prototype._getChecked=function(){return this.element.checked},d.prototype._getValue=function(){return this.element.value},d.prototype._getTextContent=function(){return this.element.textContent},d.prototype._getFile=function(){var a=this.element,c=a.value;return this.__fileSupported&&a.files.length>0?a.files[0]:{name:c.replace(this.__fileNameRegex,""),path:c,lastModifiedDate:void 0,type:void 0,size:void 0,msDetachStream:b,msClose:b,slice:function(){return{}}}},d.prototype._getFiles=function(){var a=this.element;if(this.__fileSupported)return Array.prototype.slice.call(a.files);for(var c,d=a.value.split(/,|;/g),e=d.length,f=[],g=0;e>g;++g)c=d[g],f.push({name:c.replace(this.__fileNameRegex,""),path:c,lastModifiedDate:void 0,type:void 0,size:void 0,msDetachStream:b,msClose:b,slice:function(){return{}}});return f},d.prototype._getSelectedValues=function(){for(var a,b=this.element.options,c=b.length,d=[],e=0;c>e;++e)a=b[e],a.selected&&d.push(a.value);return d},d.prototype._setText=function(a,b,c){return this.__isSelf?void 0:t(a)&&(a="",c===!0)?(t(this.element.value)&&this._setValue(a),void this._propertyChanged()):void this._setValue(a)},d.prototype._setRange=function(a,b,c){return this.__isSelf?void 0:p(a)&&(a=0,c===!0)?(p(this.element.value)&&this._setValue(a),void this._propertyChanged()):void this._setValue(a)},d.prototype._setHidden=function(a,b,c){return this.__isSelf?void 0:p(a)&&(a="",c===!0)?(p(this.element.value)&&this._setValue(a),void this._propertyChanged()):void this._setValue(a)},d.prototype._setValue=function(a){var b=this.element;b.value!==a&&(b.value=a)},d.prototype._setChecked=function(a,b,c){if(!this.__isSelf){if(!q(a)){if(c===!0)return void this._propertyChanged();a=!!a}this.element.checked=a}},d.prototype._setRadio=function(a){var b=this.element;if(!this.__isSelf)return t(a)&&b.checked?void this._propertyChanged():void(b.checked=b.value===a)},d.prototype._setSelectedIndex=function(a,b,c){if(!this.__isSelf){var d=this.element,e=d.value;if(t(a))return c!==!0&&this._document.body.contains(d)?void(d.selectedIndex=-1):void this._propertyChanged();if(m(a)){if(e===a)return;if(!this._document.body.contains(d))return d.value=a,void(d.value!==a&&(d.value=e,this._propertyChanged()))}else{var f,g=this._Exception;r(a)?(a=a.toString(),f="Trying to bind a value of type number to a <select> element. The value will implicitly be converted to type string."):f="Trying to bind a value that is not a string to a <select> element. The element's selected index will be set to -1.",g.warn(f,g.BIND)}d.value=a,(d.value!==a||-1===d.selectedIndex)&&(d.selectedIndex=-1)}},d.prototype._setSelectedIndices=function(a,b,c){if(!this.__isSelf){var d,e=this.element.options,f=t(e)?0:e.length,g=t(a);if(!g&&v(a))for(var h,i;f-->0;)d=e[f],h=d.value,i=Number(h),d.selected=-1!==a.indexOf(h)||r(i)&&-1!==a.indexOf(i)?!0:!1;else for(c===!0&&this._propertyChanged();f-->0;){if(d=e[f],!g&&d.value===""+a)return void(d.selected=!0);d.selected=!1}}},d.prototype._determineType=function(){if(!this._observingBindableProperty()){var a=this.element;if(!t(a))switch(a.nodeName.toLowerCase()){case"input":switch(a.type){case"button":case"submit":case"reset":case"image":this._addEventType=this._addButtonEventListener,this._getter=this._getValue;break;case"checkbox":this._addEventType=this._addChangeEventListener,this._getter=this._getChecked,this._setter=this._setChecked;break;case"radio":this._initializeRadio();break;case"range":this._addEventType=this._addChangeEventListener,this._getter=this._getValue,this._setter=this._setRange;break;case"file":var b=a.multiple;this._addEventType=this._addChangeEventListener,this._getter=b?this._getFiles:this._getFile;break;case"hidden":this._getter=this._getValue,this._setter=this._setHidden;break;default:this._addEventType=this._addTextEventListener,this._getter=this._getValue,this._setter=this._setText}break;case"textarea":this._addEventType=this._addTextEventListener,this._getter=this._getValue,this._setter=this._setText;break;case"select":this._initializeSelect();break;case"button":this._addEventType=this._addButtonEventListener,this._getter=this._getTextContent}}},d.prototype._watchExpression=function(){var a=this,b=this._contextExpression,c=this.evaluateExpression(b);if(!g(c)){if(!(t(c)&&b.identifiers.length>0)){var d=this._Exception;return void d.warn(this.type+" is trying to index into a primitive type. "+this._contextExpression.expression+" is already defined and not an object when trying to evaluate "+this.type+'="'+this._expression.expression+'"',d.BIND)}c=this._createContext(b.identifiers[0])}var e;if(s(this._setter)){this._setter===this._setSelectedIndices&&(e=this._property,t(c[e])&&(c[e]=[]),this.observeArray(function(b){a._setter(b[0].object,null,!0)},b+"."+e));var f=this._expression;this.observeExpression(function(b,c){a._setter(b,c)},f),this._setter(this.evaluateExpression(f),void 0,!0)}},d.prototype._createContext=function(a){var b=a.split("."),c=b.shift().slice(1),d=this.parent;return c===fg?(a=b.join("."),d=this.parent.root):c===Jb&&(a=b.join(".")),this._ContextManager.createContext(d,a)},d.prototype._propertyChanged=function(){if(!t(this._contextExpression)){var a=this.evaluateExpression(this._contextExpression),b=this._property,c=this._getter();t(a)||a[b]===c||(this.__isSelf=!0,a[b]=c,this.__isSelf=!1)}},d.prototype._initializeRadio=function(){var a=this.element;if(this._addEventType=this._addChangeEventListener,this._getter=this._getValue,this._setter=this._setRadio,!a.hasAttribute("name")){var b=M(this.type),c=this.attributes[b];a.setAttribute("name",c)}a.hasAttribute("value")||a.setAttribute("value","")},d.prototype._initializeSelect=function(){var a,b=this.element,c=b.multiple,d=b.options,e=d.length;this._addEventType=this._addChangeEventListener,c?(this._getter=this._getSelectedValues,this._setter=this._setSelectedIndices):(this._getter=this._getValue,this._setter=this._setSelectedIndex);for(var f=0;e>f;++f)a=d[f],a.hasAttribute("value")||a.setAttribute("value",a.textContent)},d.prototype._observingBindableProperty=function(){var a=this,b=this.templateControl;return!t(b)&&s(b.onInput)&&s(b.observeProperties)?(b.onInput(function(b){a._getter=function(){return b},a._propertyChanged()}),this._supportsTwoWayBinding=!0):!1},d._inject={_parser:$b,_ContextManager:cc,_compat:Qb,_document:Tb},d}(ah);a.Bind=fb,Hb.control(Xc,fb);var gb=function(a){function b(){a.apply(this,arguments),this.property="",this.priority=200,this._listeners=[],this._boundAddListener=this._addListener.bind(this)}return __extends(b,a),b.prototype.initialize=function(){this.attribute=M(this.type),this._setProperty(this._getValue())},b.prototype.loaded=function(){this._observeProperty(),this._setProperty(this._getValue())},b.prototype.dispose=function(){s(this._removeListener)&&this._removeListener(),this._listeners=[]},b.prototype._setProperty=function(a,b){var c=this.templateControl;t(c)||(this._ContextManager.defineGetter(c,this.property,{value:a,observe:this._boundAddListener},!0,!0),this._callListeners(a,b))},b.prototype._callListeners=function(a,b){for(var c=this._listeners,d=c.length,e=0;d>e;++e)c[e](a,b)},b.prototype._addListener=function(a){var b=this._listeners;return a=a.bind(this.templateControl),b.push(a),function(){var c=b.indexOf(a);-1!==c&&b.splice(c,1)}},b.prototype._getValue=function(){return t(this.templateControl)?void 0:this.evaluateExpression(this.attributes[this.attribute])},b.prototype._observeProperty=function(){t(this.templateControl)||(this._removeListener=this.observeExpression(this._setProperty,this.attributes[this.attribute]))},b._inject={_ContextManager:cc},b}(ah);a.ObservableAttributeControl=gb;var hb=function(a){function b(){a.apply(this,arguments),this.property="options"}return __extends(b,a),b}(gb);a.Options=hb,Hb.control(cd,hb)}(eh=a.controls||(a.controls={}));var fh=function(){function a(){this.uid=L(Wc);var a=this.navigator=lb(bc);a.initialize(lb(Fc).currentRouter())}return a.start=function(){if(!a._compat.isCompatible){var b=a._Exception;return void b.fatal("PlatypusTS only supports modern browsers where Object.defineProperty is defined",b.COMPAT)}a.__addPlatCss();var c=a._EventManager;c.dispose(Wf),c.on(Wf,qe,a.__ready),c.on(Wf,we,a.__shutdown),c.initialize()},a.registerApp=function(b){if(!t(a.app)&&m(a.app.uid)&&a._EventManager.dispose(a.app.uid),a.__injector=b,a._compat.amd){var c=a._LifecycleEvent,d=c.dispatch;H(function(){d(qe,c)})}},a.load=function(b){var c=a._LifecycleEvent,d=a._compiler,e=a._document.body,f=a._document.head;return c.dispatch(ye,a),t(b)?(e.setAttribute(Ie,""),void H(function(){d.compile([f]),d.compile([e]),e.removeAttribute(Ie)})):s(b.setAttribute)?(b.setAttribute(Ie,""),void H(function(){d.compile([b]),b.removeAttribute(Ie)})):void H(function(){d.compile([b])})},a.__ready=function(b){Lg.Injector.initialize(),a.__registerAppEvents(b),b.defaultPrevented||a.load()},a.__shutdown=function(){var b,c=navigator.app,d=a._LifecycleEvent;if(!t(c)&&s(c.exitApp)){if(b=d.dispatch(xe,a),b.defaultPrevented)return;c.exitApp()}},a.__registerAppEvents=function(b){var c=a.__injector;if(!t(c)&&s(c.inject)){var d=a.app=c.inject();d.on(re,d.suspend),d.on(se,d.resume),d.on(te,d.online),d.on(ue,d.offline),d.on(ve,d.error),d.on(xe,d.exiting),s(d.ready)&&d.ready(b)}},a.__addPlatCss=function(){var b=a._document;if(!a._compat.platCss){if(!t(b.styleSheets)&&b.styleSheets.length>0)return void b.styleSheets[0].insertRule("[plat-hide] { display: none !important; }",0);var c=document.createElement("style");c.textContent="[plat-hide] { display: none !important; }",document.head.appendChild(c)}},a.prototype.suspend=function(){},a.prototype.resume=function(){},a.prototype.error=function(){},a.prototype.ready=function(){},a.prototype.exiting=function(){},a.prototype.online=function(){},a.prototype.offline=function(){},a.prototype.dispatchEvent=function(b){for(var c=[],d=1;d<arguments.length;d++)c[d-1]=arguments[d];
var e=a._EventManager||lb(Wb);e.dispatch(b,this,e.DIRECT,c)},a.prototype.on=function(b,c){var d=a._EventManager||lb(Wb);return d.on(this.uid,b,c,this)},a.prototype.load=function(b){a.load(b)},a.prototype.exit=function(){this.dispatchEvent(we)},a.app=null,a}();a.App=fh,a.IAppStatic=xb,Hb.injectable(Kb,xb,[Qb,Wb,Tb,ec,Xb,Zb],Ff),a.IApp=yb,Hb.injectable(Lb,yb,[Kb],Hf)}(plat||(plat={})),module.exports=plat;